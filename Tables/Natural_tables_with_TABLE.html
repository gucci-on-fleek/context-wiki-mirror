<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../style.css" rel="stylesheet">
  <link href="../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Tables/Natural tables with TABLE&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Tables/Natural_tables_with_TABLE" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Tables/Natural tables with TABLE
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=728&diff=41565">2025-01-18</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h3>
       Contents
      </h3>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#Introduction">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         Introduction
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-2">
       <a href="#Multipage_TABLEs">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         Multipage TABLEs
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-3">
         <a href="#Changing_split_location">
          <span class="tocnumber">
           2.1
          </span>
          <span class="toctext">
           Changing split location
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-4">
         <a href="#Headers_with_TABLEs">
          <span class="tocnumber">
           2.2
          </span>
          <span class="toctext">
           Headers with TABLEs
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-5">
       <a href="#Tables_in_multiple_columns">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         Tables in multiple columns
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-6">
       <a href="#Designing_complex_TABLEs">
        <span class="tocnumber">
         4
        </span>
        <span class="toctext">
         Designing complex TABLEs
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-7">
         <a href="#Cell_Addressing_and_Frames">
          <span class="tocnumber">
           4.1
          </span>
          <span class="toctext">
           Cell Addressing and Frames
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-8">
         <a href="#Column_Offset.2FGap">
          <span class="tocnumber">
           4.2
          </span>
          <span class="toctext">
           Column Offset/Gap
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-9">
         <a href="#Row_Offset.2FGap">
          <span class="tocnumber">
           4.3
          </span>
          <span class="toctext">
           Row Offset/Gap
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-10">
           <a href="#Gaps_for_individual_cells">
            <span class="tocnumber">
             4.3.1
            </span>
            <span class="toctext">
             Gaps for individual cells
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2 tocsection-11">
         <a href="#Make_a_cell_bold">
          <span class="tocnumber">
           4.4
          </span>
          <span class="toctext">
           Make a cell bold
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-12">
         <a href="#Cells_with_breaking_lines">
          <span class="tocnumber">
           4.5
          </span>
          <span class="toctext">
           Cells with breaking lines
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-13">
         <a href="#Rules">
          <span class="tocnumber">
           4.6
          </span>
          <span class="toctext">
           Rules
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-14">
           <a href="#Example:_an_invoice_with_thick_rules">
            <span class="tocnumber">
             4.6.1
            </span>
            <span class="toctext">
             Example: an invoice with thick rules
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-15">
           <a href="#Rules_with_different_thickness">
            <span class="tocnumber">
             4.6.2
            </span>
            <span class="toctext">
             Rules with different thickness
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-16">
           <a href="#Thick_bottom_rules">
            <span class="tocnumber">
             4.6.3
            </span>
            <span class="toctext">
             Thick bottom rules
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-17">
           <a href="#Diagonal_rules">
            <span class="tocnumber">
             4.6.4
            </span>
            <span class="toctext">
             Diagonal rules
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2 tocsection-18">
         <a href="#Using_character_alignment">
          <span class="tocnumber">
           4.7
          </span>
          <span class="toctext">
           Using character alignment
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-19">
           <a href="#Character_alignment_methods">
            <span class="tocnumber">
             4.7.1
            </span>
            <span class="toctext">
             Character alignment methods
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2 tocsection-20">
         <a href="#Specifying_the_cell_column">
          <span class="tocnumber">
           4.8
          </span>
          <span class="toctext">
           Specifying the cell column
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-21">
         <a href="#Round_corners">
          <span class="tocnumber">
           4.9
          </span>
          <span class="toctext">
           Round corners
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-22">
         <a href="#Other_options">
          <span class="tocnumber">
           4.10
          </span>
          <span class="toctext">
           Other options
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-23">
         <a href="#Rotated_headline">
          <span class="tocnumber">
           4.11
          </span>
          <span class="toctext">
           Rotated headline
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-24">
           <a href="#MetaPost_solution">
            <span class="tocnumber">
             4.11.1
            </span>
            <span class="toctext">
             MetaPost solution
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-25">
           <a href="#Solution_with_TeX_primitives">
            <span class="tocnumber">
             4.11.2
            </span>
            <span class="toctext">
             Solution with TeX primitives
            </span>
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-26">
       <a href="#TABLEs_with_old_table_syntax">
        <span class="tocnumber">
         5
        </span>
        <span class="toctext">
         TABLEs with old table syntax
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-27">
       <a href="#Get_current_row.2Fcolumn_number">
        <span class="tocnumber">
         6
        </span>
        <span class="toctext">
         Get current row/column number
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-28">
       <a href="#An_alignment_issue">
        <span class="tocnumber">
         7
        </span>
        <span class="toctext">
         An alignment issue
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-29">
       <a href="#Footnotes_in_TABLEs">
        <span class="tocnumber">
         8
        </span>
        <span class="toctext">
         Footnotes in TABLEs
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-30">
       <a href="#Settings_for_multiple_TABLEs_in_a_single_page">
        <span class="tocnumber">
         9
        </span>
        <span class="toctext">
         Settings for multiple TABLEs in a single page
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-31">
       <a href="#Creating_tables_from_CSV_data_.28Comma_Separated_Values.29">
        <span class="tocnumber">
         10
        </span>
        <span class="toctext">
         Creating tables from CSV data (Comma Separated Values)
        </span>
       </a>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="Introduction">
      Introduction
     </span>
    </h2>
    <p>The preferred way to typeset tables is to use what are called &ldquo;natural tables&rdquo; (also known as &ldquo;automatic tables&rdquo; or &ldquo;HTML tables&rdquo;). They are especially suited for <a href="../Input_and_compilation/XML_source.html" title="Input and compilation/XML source">XML</a> conversions. See the <a class="extiw" href="http://www.pragma-ade.nl/general/manuals/enattab.pdf" title="manual:enattab.pdf">enattab.pdf</a> manual for many examples.
</p>
    <p>To place a table use:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\placetable</span></span><span class="br">{</span>Caption<span class="br">}</span>
<span class="br">{</span><span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> One <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> two <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> One <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> two <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span><span class="br">}</span>
</pre>
     </li>
     <li class="rendering">
      <img height="96" src="../wikiteximage/4cde21eda40e15625a058732c0dc3502.webp" width="624">
     </li>
    </ul>
    <p>A more elaborate example:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex">This is our red-coloured table.
<span class="cs"><span class="stylecs">\setupcolors</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>

<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span><span class="brx">[</span>odd<span class="brx">]</span><span class="brx">[</span>background<span class="brx">=</span>color,backgroundcolor<span class="brx">=</span>red, width<span class="brx">=</span>.2<span class="cs">\textwidth</span><span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>split<span class="brx">=</span>yes<span class="brx">]</span> <span class="comment">% allow splitting over page boundaries</span>
  <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>3<span class="brx">]</span> 1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2<span class="brx">]</span> 2/3     <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>3<span class="brx">]</span> 4 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
  <span class="cs"><span class="documentcs">\bTR</span></span>                   <span class="cs"><span class="documentcs">\bTD</span></span> 2 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 3 <span class="cs">\eTD</span>                   <span class="cs">\eTR</span>
  <span class="cs"><span class="documentcs">\bTR</span></span>                   <span class="cs"><span class="documentcs">\bTD</span></span> 2 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 3 <span class="cs">\eTD</span>                   <span class="cs">\eTR</span>
  <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>3<span class="brx">]</span> 1/2/3                     <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 4 <span class="cs">\eTD</span>       <span class="cs">\eTR</span>
  <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> 1       <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 2 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 3 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 4 <span class="cs">\eTD</span>       <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
     </li>
     <li class="rendering">
      <img height="142" src="../wikiteximage/c7a3b42c9d5c936ec2b9d0d167f59627.webp" width="502">
     </li>
    </ul>
    <p>Note that every element must use <tt>\b</tt> ... <tt>\e</tt>.
</p>
    <p>Willi Egger wrote a <a href="../Documentation/This_Way_-_My_Way#MyWay.html" title="Documentation/This Way - My Way">My Way</a> how he set a typesetter's lead type case: <a class="external text" href="http://dl.contextgarden.net/myway/NaturalTables.pdf" rel="nofollow">Use of natural tables</a>
</p>
    <h2>
     <span class="mw-headline" id="Multipage_TABLEs">
      Multipage TABLEs
     </span>
    </h2>
    <p>Try to divide your table into...
</p>
    <ul>
     <li>
      <tt>
       <a href="../Command/bTABLEhead.html" title="Command/bTABLEhead">
        \bTABLEhead
       </a>
      </tt>
      (table header, can repeat after page breaks)
     </li>
     <li>
      <tt>
       <a class="new" href="../index.php?title=Command/bTABLEnext&action=edit&redlink=1.html" title="Command/bTABLEnext (page does not exist)">
        \bTABLEnext
       </a>
      </tt>
      (alternate table header on following pages)
     </li>
     <li>
      <tt>
       <a class="new" href="../index.php?title=Command/bTABLEsection&action=edit&redlink=1.html" title="Command/bTABLEsection (page does not exist)">
        \bTABLEsection
       </a>
      </tt>
      (subtitle that also can repeat after page breaks)
     </li>
     <li>
      <tt>
       <a class="new" href="../index.php?title=Command/bTABLEbody&action=edit&redlink=1.html" title="Command/bTABLEbody (page does not exist)">
        \bTABLEbody
       </a>
      </tt>
      (table body)
     </li>
     <li>
      <tt>
       <a class="new" href="../index.php?title=Command/bTABLEfoot&action=edit&redlink=1.html" title="Command/bTABLEfoot (page does not exist)">
        \bTABLEfoot
       </a>
      </tt>
      (table footer)
     </li>
    </ul>
    <p>and <tt><a href="../Command/setupTABLE.html" title="Command/setupTABLE">\setupTABLE</a></tt><tt>[split=yes]</tt> or <tt>[split=repeat]</tt>
</p>
    <p>see also <a class="extiw" href="http://source.contextgarden.net/tabl-ntb.mkiv" title="source:tabl-ntb.mkiv">tabl-ntb.mkiv</a>
</p>
    <p>If you must <b>split</b> a natural table over several pages, you can
simply do this by adding <tt>\setupTABLE[split=yes]</tt> to your TABLE
definition. Another way is to define it right at the TABLE start
by adding the parameter <tt>[split=yes]</tt> (see example).
However,
<tt><a href="../Command/startlinecorrection.html" title="Command/startlinecorrection">\startlinecorrection</a></tt>
can lead to unpredictable vertical spaces between rows <a class="external autonumber" href="http://archive.contextgarden.net/message/20100912.112605.8a1aaf13.en.html" rel="nofollow">[1]</a>.
</p>
    <p>In this case the <b>table head</b>
(all between <tt><a href="../Command/bTABLEhead.html" title="Command/bTABLEhead">\bTABLEhead</a></tt> and <tt><a class="new" href="../index.php?title=Command/eTABLEhead&action=edit&redlink=1.html" title="Command/eTABLEhead (page does not exist)">\eTABLEhead</a></tt>)
is printed only once at the beginning of the table. But if you use <tt>[split=repeat]</tt>,
it is printed on top of every new page, that contains parts of
your multipage table. Please take account of the fact that the
head cells are enclosed by <tt><a class="new" href="../index.php?title=Command/bTH&action=edit&redlink=1.html" title="Command/bTH (page does not exist)">\bTH</a></tt> and <tt><a class="new" href="../index.php?title=Command/eTH&action=edit&redlink=1.html" title="Command/eTH (page does not exist)">\eTH</a></tt> (and not \[be]TD).
</p>
    <p>If you want to use an alternative table header for all following pages,
you can do this by defining an additional header. Just add the second header
between <tt><a class="new" href="../index.php?title=Command/bTABLEnext&action=edit&redlink=1.html" title="Command/bTABLEnext (page does not exist)">\bTABLEnext</a></tt>...<tt><a class="new" href="../index.php?title=Command/eTABLEnext&action=edit&redlink=1.html" title="Command/eTABLEnext (page does not exist)">\eTABLEnext</a></tt>,
right after your normal head definition.
Now every additional page of the multipage table starts with the
<b>next table head</b>.
</p>
    <p>The <b>table foot</b> is declared between <tt><a class="new" href="../index.php?title=Command/bTABLEfoot&action=edit&redlink=1.html" title="Command/bTABLEfoot (page does not exist)">\bTABLEfoot</a></tt> and
<tt><a class="new" href="../index.php?title=Command/eTABLEfoot&action=edit&redlink=1.html" title="Command/eTABLEfoot (page does not exist)">\eTABLEfoot</a></tt>. It defines the concluding row of your natural table.
</p>
    <p><b>Beware:</b> Split tables often begin not on the page (or in the column, if you use them) where they <i>could</i> start, but on/in the next one.
This is a known limitation due to the complicated calculation of remaining space on the page.
</p>
    <p>That won&rsquo;t become better before this calculations are newly written in Lua. (Said Hans on 2010-09-24.) And it became better for LMTX, in 2021/2022.
</p>
    <p>The following standalone example deals with all the mentioned aspects of natural tables.
Just <i>copy&paste</i> it as a starting point for further experiments...
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\starttext</span></span>

<span class="cs"><span class="stylecs">\setupcolors</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>

<span class="comment">% setup for all cells</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span>each<span class="brx">]</span><span class="brx">[</span>style<span class="brx">=</span><span class="cs">\tfx</span><span class="cs">\it</span>, align<span class="brx">=</span>center<span class="brx">]</span>

<span class="comment">% setup table head</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span>first<span class="brx">]</span>
  <span class="brx">[</span>background<span class="brx">=</span>color,
   backgroundcolor<span class="brx">=</span>yellow<span class="brx">]</span>
<span class="comment">% setup table footer</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span>last<span class="brx">]</span>
  <span class="brx">[</span>style<span class="brx">=</span>bold,
   background<span class="brx">=</span>color,
   backgroundcolor<span class="brx">=</span>green<span class="brx">]</span>

<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>split<span class="brx">=</span>repeat,option<span class="brx">=</span>stretch<span class="brx">]</span><span class="comment">% head on every page, stretch columns</span>
<span class="comment">%</span>
<span class="comment">% IMPORTANT: use \bTH ... \eTH to enclose the head|next cells</span>
<span class="cs"><span class="documentcs">\bTABLEhead</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTH</span></span>  head1 <span class="cs">\eTH</span>
  <span class="cs"><span class="documentcs">\bTH</span></span>  head2 <span class="cs">\eTH</span>
  <span class="cs"><span class="documentcs">\bTH</span></span>  head3 <span class="cs">\eTH</span>
<span class="cs">\eTR</span>
<span class="cs">\eTABLEhead</span>
<span class="comment">% </span>
<span class="cs"><span class="documentcs">\bTABLEnext</span></span> <span class="comment">% setup for next table head</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="brx">[</span>background<span class="brx">=</span>color,backgroundcolor<span class="brx">=</span>cyan<span class="brx">]</span>
  <span class="cs"><span class="documentcs">\bTH</span></span>  next1 <span class="cs">\eTH</span>
  <span class="cs"><span class="documentcs">\bTH</span></span>  next2 <span class="cs">\eTH</span>
  <span class="cs"><span class="documentcs">\bTH</span></span>  next3 <span class="cs">\eTH</span>
<span class="cs">\eTR</span>
<span class="cs">\eTABLEnext</span>
<span class="comment">%</span>
<span class="comment">% the table body (main part)</span>
<span class="comment">%</span>
<span class="cs"><span class="documentcs">\bTABLEbody</span></span>
<span class="comment">%</span>
<span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>100<span class="br">}</span><span class="br">{</span><span class="comment">% 100 rows</span>
<span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTC</span></span>  body body body body body <span class="cs">\eTC</span>
  <span class="cs"><span class="documentcs">\bTC</span></span>  body body body body body <span class="cs">\eTC</span>
  <span class="cs"><span class="documentcs">\bTC</span></span>  body body body body body <span class="cs">\eTC</span>
<span class="cs">\eTR</span>
<span class="br">}</span><span class="comment">%</span>
<span class="comment">%</span>
<span class="cs">\eTABLEbody</span>
<span class="comment">%</span>
<span class="comment">% the table foot</span>
<span class="comment">%</span>
<span class="cs"><span class="documentcs">\bTABLEfoot</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTC</span></span>  foot1 <span class="cs">\eTC</span>
  <span class="cs"><span class="documentcs">\bTC</span></span>  foot2 <span class="cs">\eTC</span>
  <span class="cs"><span class="documentcs">\bTC</span></span>  foot3 <span class="cs">\eTC</span>
<span class="cs">\eTR</span>
<span class="cs">\eTABLEfoot</span>
<span class="comment">%</span>
<span class="cs">\eTABLE</span>

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="1240" src="../wikiteximage/32ac9b9397d04a93750d9ad9d100cd33.webp" width="874">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Changing_split_location">
      Changing split location
     </span>
    </h3>
    <p>Sometimes in multipage tables you have cells that have to stay together:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>split<span class="brx">=</span>yes<span class="brx">]</span>
<span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>10<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> xxx <span class="cs">\eTD</span> <span class="cs">\eTR</span><span class="br">}</span>
<span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>after<span class="brx">=</span><span class="cs"><span class="documentcs">\page</span></span><span class="brx">]</span> <span class="cs"><span class="documentcs">\bTD</span></span> yyy <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>10<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> xxx <span class="cs">\eTD</span> <span class="cs">\eTR</span><span class="br">}</span>
<span class="cs">\eTABLE</span>
</pre>
    <p>Note that the table is split after the yyy row.
</p>
    <h3>
     <span class="mw-headline" id="Headers_with_TABLEs">
      Headers with TABLEs
     </span>
    </h3>
    <p>When you have a multi-page TABLE in the document (using either the <tt>split=repeat</tt> or <tt>split=yes</tt> options), and the (page) header text is also styled with a TABLE, the table header ends up getting crammed into the document header resulting in incorrect output. To alleviate this, <tt><a class="new" href="../index.php?title=Command/bTABLEnested&action=edit&redlink=1.html" title="Command/bTABLEnested (page does not exist)">\bTABLEnested</a></tt> and <tt><a class="new" href="../index.php?title=Command/eTABLEnested&action=edit&redlink=1.html" title="Command/eTABLEnested (page does not exist)">\eTABLEnested</a></tt> may be used as in the example below to ensure that table headers don&rsquo;t get mixed up with the document header.
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setupheadertexts</span></span><span class="brx">[</span><span class="cs"><span class="stylecs">\directsetup</span></span><span class="br">{</span>headertable<span class="br">}</span><span class="brx">]</span>

<span class="cs"><span class="stylecs">\startsetups</span></span> <span class="brx">[</span>headertable<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLEnested</span></span><span class="brx">[</span>option<span class="brx">=</span>stretch,frame<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>1<span class="brx">]</span><span class="brx">[</span>align<span class="brx">=</span>flushleft<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>2<span class="brx">]</span><span class="brx">[</span>align<span class="brx">=</span>flushright<span class="brx">]</span>
  <span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTD</span></span>
    Firstname Lastname <span class="cs">\par</span>
    123, First street  <span class="cs">\par</span>
    Ph: 1234567890     <span class="cs">\par</span>
  <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span>
    Company Name       <span class="cs">\par</span>
    123, First street  <span class="cs">\par</span>
    Ph: 9876543210     <span class="cs">\par</span>
  <span class="cs">\eTD</span>
  <span class="cs">\eTR</span>
<span class="cs">\eTABLEnested</span>
<span class="cs"><span class="stylecs">\stopsetups</span></span>

<span class="cs"><span class="documentcs">\starttext</span></span>

<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>split<span class="brx">=</span>repeat, option<span class="brx">=</span>stretch<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLEhead</span></span>
  <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>style<span class="brx">=</span>bold<span class="brx">]</span><span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>5<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTH</span></span> Header Col <span class="brx">#</span>1<span class="cs">\eTH</span><span class="br">}</span><span class="cs">\eTR</span>
<span class="cs">\eTABLEhead</span>
<span class="cs"><span class="documentcs">\bTABLEbody</span></span>
  <span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>50<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>5<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTD</span></span> Row <span class="brx">#</span>1 col <span class="brx">#</span><span class="brx">#</span>1<span class="cs">\eTD</span><span class="br">}</span><span class="cs">\eTR</span><span class="br">}</span>
<span class="cs">\eTABLEbody</span>
<span class="cs">\eTABLE</span>

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="1240" src="../wikiteximage/6c9c53d4eab5cfa586482cc6c810410d.webp" width="874">
     </li>
    </ul>
    <p>Compiling the above by using <tt><a href="../Command/bTABLE.html" title="Command/bTABLE">\bTABLE</a></tt> and <tt><a class="new" href="../index.php?title=Command/eTABLE&action=edit&redlink=1.html" title="Command/eTABLE (page does not exist)">\eTABLE</a></tt> instead of <tt><a class="new" href="../index.php?title=Command/bTABLEnested&action=edit&redlink=1.html" title="Command/bTABLEnested (page does not exist)">\bTABLEnested</a></tt> and <tt><a class="new" href="../index.php?title=Command/eTABLEnested&action=edit&redlink=1.html" title="Command/eTABLEnested (page does not exist)">\eTABLEnested</a></tt> in the setup for <tt>headertable</tt> one notices the need for the nested type.
</p>
    <h2>
     <span class="mw-headline" id="Tables_in_multiple_columns">
      Tables in multiple columns
     </span>
    </h2>
    <p>... should just work (at least in your installation but not here...). See the following example.
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\startcolumns</span></span><span class="brx">[</span>n<span class="brx">=</span>3<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>21<span class="br">}</span>
<span class="br">{</span><span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> a<span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> b <span class="cs">\eTD</span> <span class="cs">\eTR</span><span class="br">}</span>
<span class="cs">\eTABLE</span>
<span class="cs"><span class="documentcs">\stopcolumns</span></span>
</pre>
    <h2>
     <span class="mw-headline" id="Designing_complex_TABLEs">
      Designing complex TABLEs
     </span>
    </h2>
    <p>Everything is easy when a simple grid is enough. Unfortunately, this
is not the case most of the time, tables tend to have information
which should flow accross cell boundaries either vertically
or horizontally. One of the reasons to use TABLE instead of the
table environment is that TABLE provides an easy (relatively speaking, 
at least) way to make merged cells to both directions.
</p>
    <p>There are probably as many ways to design TABLEs as there are
users, but a simple one to begin with is to start with a
grid:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="179" src="../wikiteximage/362b132876b9fe43d21300372a4e669a.webp" width="356">
     </li>
    </ul>
    <p>The desired table layout is then drawn onto this grid, and the top left corner cell
of each cell in the final layout identified:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="179" src="../wikiteximage/cd417ac01957e3dc012e3b5d900587b5.webp" width="356">
     </li>
    </ul>
    <p>The cells are listed from left to right and up to down. Each larger cell is then given
it size by using <tt>nc=...</tt> and <tt>nr=...</tt> parameters with <tt>\bTD</tt>. The
code producing the table above is:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span>each<span class="brx">]</span><span class="brx">[</span>height<span class="brx">=</span>0.5cm<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>each<span class="brx">]</span><span class="brx">[</span>width<span class="brx">=</span>1cm<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2,nr<span class="brx">=</span>2<span class="brx">]</span> r1c1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> r1c3 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>2<span class="brx">]</span> r1c4 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2,nr<span class="brx">=</span>2<span class="brx">]</span> r1c5 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>2<span class="brx">]</span> r2c3 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2<span class="brx">]</span> r3c1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2<span class="brx">]</span> r3c4 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> r3c6 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> r4c1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2<span class="brx">]</span> r4c2 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>2<span class="brx">]</span> r4c4 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2<span class="brx">]</span> r4c5 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>2,nc<span class="brx">=</span>2<span class="brx">]</span> r5c1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>2<span class="brx">]</span> r5c3 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>2,nc<span class="brx">=</span>2<span class="brx">]</span> r5c5 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> r6c4 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
    <p>Everything rectangular can be done with TABLE, as long as it can be fit in the grid. The grid
does not have to be equidistant, and if its dimensions are omitted, the program
will fit the data in. L-shaped or other complex cell shapes are not possible.
Using them would be a bit odd, in any case, as alignment and text flow problems
would be quite interesting.
</p>
    <h3>
     <span class="mw-headline" id="Cell_Addressing_and_Frames">
      Cell Addressing and Frames
     </span>
    </h3>
    <p>The setup commands for TABLE do not seem to be very verbosedly commented.
There are, however, a few shorthands, which are useful to understand.
First of all, there are several ways to address cells. This is a brief
summary of some of them:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span><span class="brx">(</span>list of rows<span class="brx">)</span><span class="brx">]</span><span class="brx">[</span>...<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span><span class="brx">(</span>list of columns<span class="brx">)</span><span class="brx">]</span><span class="brx">[</span>...<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span><span class="brx">(</span>list of columns<span class="brx">)</span><span class="brx">]</span><span class="brx">[</span><span class="brx">(</span>list of rows<span class="brx">)</span><span class="brx">]</span><span class="brx">[</span>...<span class="brx">]</span>
</pre>
    <p>A list contains one or more numbers separated by commas.
Word "last" is equivalent to the number of the last row or
column. The complete list can be replaced by the word "each"
to address all cells on the row/column.
</p>
    <p>Let us consider the following table:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>each<span class="brx">]</span><span class="brx">[</span>align<span class="brx">=</span><span class="br">{</span>middle,lohi<span class="br">}</span>,frame<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span>2,3,4,5,6<span class="brx">]</span><span class="brx">[</span>height<span class="brx">=</span>1.0cm<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span>2,4<span class="brx">]</span><span class="brx">[</span>topframe<span class="brx">=</span>on<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>1,2,3<span class="brx">]</span><span class="brx">[</span>rightframe<span class="brx">=</span>on<span class="brx">]</span>
...
</pre>
    <p>In plain language the rows are interpreted as follows:
</p>
    <ul>
     <li>
      Align each cell in each column (i.e. all cells) horizontally in the middle
     </li>
    </ul>
    <p>and vertically in the middle (lohi), and remove all frames (borders)
</p>
    <ul>
     <li>
      The height of rows 2 -- 6 is 1.0 cm
     </li>
     <li>
      Draw a line on top of rows 2 and 4
     </li>
     <li>
      Draw a line to the right side of columns 1 -- 3
     </li>
    </ul>
    <p>In this case the table is slightly complicated, there are some split cells,
as shown below:
</p>
    <table>
     <tbody>
      <tr valign="top">
       <td>
<pre class="tex"><span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\bf</span> r1c1 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\bf</span> r1c2 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\bf</span> r1c3 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\bf</span> r1c4 <span class="cs">\eTD</span>
<span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r2c1 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r2c2 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>2<span class="brx">]</span> r2c3 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r2c4 <span class="cs">\eTD</span>
<span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r3c1 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r3c2 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r3c4 <span class="cs">\eTD</span>
<span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r4c1 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r4c2 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>3<span class="brx">]</span> r4c3 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nr<span class="brx">=</span>3<span class="brx">]</span> r4c4 <span class="cs">\eTD</span>
<span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r5c1 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r5c2 <span class="cs">\eTD</span>
<span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r6c1 <span class="cs">\eTD</span>
  <span class="cs"><span class="documentcs">\bTD</span></span> r6c2 <span class="cs">\eTD</span>
<span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
</td>
       <td>
<ul class="demo"><li class="rendering"><img height="175" src="../wikiteximage/2fadfec433b1e8eb2df518ec598b11c1.webp" width="165"></li></ul>
</td>
      </tr>
     </tbody>
    </table>
    <p>The cell numbering is well worth noting. It is very logical (upper
leftmost part of a combined cell), but sometimes the results are
surprising in the beginning.
</p>
    <p>The important point about cell numbering is that there is really
a difference between "bottom border of row 3" and "top border of
row 4". To illustrate this, let us change the frame setups:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span>2,4<span class="brx">]</span><span class="brx">[</span>topframe<span class="brx">=</span>on<span class="brx">]</span>
</pre>
    <p>is changed to
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span>1,3<span class="brx">]</span><span class="brx">[</span>bottomframe<span class="brx">=</span>on<span class="brx">]</span>
</pre>
    <p>At first sight this is exactly the same thing. But...
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="175" src="../wikiteximage/9dc213569119832ca2b83e684462ff62.webp" width="165">
     </li>
    </ul>
    <p>Where did the horizontal line in column 3 disappear? Nowhere. There is no
row 3 in column 3, so there cannot be a frame under it. This problem
can be overcome by using topframe and leftframe instead of bottom and
right, as the cells below and to the right of a border have to exist.
</p>
    <p>However, this solution leaves the problem of bottom and rightmost borders.
How to draw a line in the bottom of the table? Using 
<tt>\setupTABLE[r][6][bottomframe=on]</tt> will leave the gap in columns 3 and 4, 
and <tt>\setupTABLE[r][7][topframe=on]</tt> is not possible, as there is no 
row 7. The clever idea of using "last" instead of the row number (6) will fail, 
as "last" seems to behave exactly the same way as number 6.
</p>
    <p>One useful method is to switch on the borders cell by
cell by adding <tt>\setupTABLE[3,4][4][bottomframe=on]</tt>, i.e.
draw a border under cells r4c3 and r4c4.
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="175" src="../wikiteximage/84bed80555a571cbaae308d546ffa718.webp" width="165">
     </li>
    </ul>
    <h3>
     <span id="Column_Offset/Gap">
     </span>
     <span class="mw-headline" id="Column_Offset.2FGap">
      Column Offset/Gap
     </span>
    </h3>
    <p>From the mailing list at 2005-11-09 by Vit Zyka, modified by Hans Hagen:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A5<span class="brx">]</span>

<span class="comment">% distance mechanism, per column (H)</span>

<span class="cs"><span class="documentcs">\start</span></span>
   <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>1<span class="brx">]</span><span class="brx">[</span>distance<span class="brx">=</span>2em<span class="brx">]</span>
   <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>2<span class="brx">]</span><span class="brx">[</span>distance<span class="brx">=</span>3em<span class="brx">]</span>

   <span class="cs"><span class="documentcs">\bTABLE</span></span>
   <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span>  <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span>  <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nx<span class="brx">=</span>2<span class="brx">]</span> test <span class="cs">\eTD</span>  <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span>  <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nx<span class="brx">=</span>2<span class="brx">]</span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
   <span class="cs">\eTABLE</span>

   <span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>option<span class="brx">=</span>stretch<span class="brx">]</span>
   <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span>  <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span>  <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nx<span class="brx">=</span>2<span class="brx">]</span> test <span class="cs">\eTD</span>  <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span>  <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nx<span class="brx">=</span>2<span class="brx">]</span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
   <span class="cs">\eTABLE</span>
<span class="cs"><span class="documentcs">\stop</span></span>

<span class="comment">% distance mechanism, per table (V)</span>

<span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>offset<span class="brx">=</span>none<span class="brx">]</span><span class="br">{</span><span class="comment">%</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>2<span class="brx">]</span><span class="brx">[</span>align<span class="brx">=</span>left<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>3<span class="brx">]</span><span class="brx">[</span>align<span class="brx">=</span>right<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>columndistance<span class="brx">=</span>2cm,leftmargindistance<span class="brx">=</span>.3cm,rightmargindistance<span class="brx">=</span>.5cm<span class="brx">]</span>
 <span class="cs"><span class="documentcs">\bTR</span></span>
   <span class="cs"><span class="documentcs">\bTH</span></span><span class="brx">[</span>nc<span class="brx">=</span>3<span class="brx">]</span> Table head<span class="cs">\eTH</span>
 <span class="cs">\eTR</span>
 <span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2<span class="brx">]</span> AB<span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span> C<span class="cs">\eTD</span><span class="cs">\eTR</span>
 <span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2,align<span class="brx">=</span>left<span class="brx">]</span> AB<span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span> C<span class="cs">\eTD</span><span class="cs">\eTR</span>
 <span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>2,align<span class="brx">=</span>middle<span class="brx">]</span> AB<span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span> C<span class="cs">\eTD</span><span class="cs">\eTR</span>
 <span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span> A<span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span> B<span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span> C<span class="cs">\eTD</span><span class="cs">\eTR</span>
 <span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span> Aa<span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span> Bb<span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span> Cccc<span class="cs">\eTD</span><span class="cs">\eTR</span>
 <span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nc<span class="brx">=</span>3,align<span class="brx">=</span>middle<span class="brx">]</span> ABC<span class="cs">\eTD</span><span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
<span class="br">}</span>
</pre>
     </li>
     <li class="rendering">
      <img height="336" src="../wikiteximage/0ca023454998d8eca198337f0dee3e80.webp" width="676">
     </li>
    </ul>
    <h3>
     <span id="Row_Offset/Gap">
     </span>
     <span class="mw-headline" id="Row_Offset.2FGap">
      Row Offset/Gap
     </span>
    </h3>
    <p>Rows, just like columns, can be drawn with a gap.
As above, this can be achieved using:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>spaceinbetween<span class="brx">=</span>2cm<span class="brx">]</span>
  ...
<span class="cs">\eTABLE</span>
</pre>
    <p>A gap differs from an offset as can be seen when drawing
cells using a background and/or a frame.
</p>
    <p>Note that offsets can be uniform <tt>[offset=dimension]</tt>,
or asymmetric
<tt>[toffset=dimension,boffset=dimension,loffset=dimension,roffset=dimension]</tt>
</p>
    <h4>
     <span class="mw-headline" id="Gaps_for_individual_cells">
      Gaps for individual cells
     </span>
    </h4>
    <p>One might want to produce gaps between specific rows and/or specific columns.
This can be achieved using a white frame, for example,
as shown in the following (incomplete) fragment:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>frame<span class="brx">=</span>off,columndistance<span class="brx">=</span>.5em<span class="brx">]</span>
  ...
  <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>topframe<span class="brx">=</span>on,framecolor<span class="brx">=</span>white,rulethickness<span class="brx">=</span>.5em<span class="brx">]</span>
    ...
  <span class="cs">\eTR</span>
  ...
<span class="cs">\eTABLE</span>
</pre>
    <p>Note that the <tt>rulethickness</tt> was set for the particular row
and not for the entire table; otherwise, it would enter into the
calculation of the cell dimensions (and interplay with other parameters
such as <tt>columndistance</tt>).
</p>
    <p>More complicated situations, for example, mixing frames, colored cell backgrounds, special gaps, ..., can be achieved using MetaPost graphics as a <tt>background</tt>.
</p>
    <h3>
     <span class="mw-headline" id="Make_a_cell_bold">
      Make a cell bold
     </span>
    </h3>
    <p>Drawing bold lines around a cell is done using the
<tt>[rulethickness=<i>dim</i>]</tt> key on a cell. The thicker rules will
offset the text inside the cell both downwards and sideways, so care
should be taken that the cell's increased rulethickness is offset by an
equal decrease in offset.
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span><span class="brx">[</span>each<span class="brx">]</span><span class="brx">[</span>rulethickness<span class="brx">=</span>.25pt,offset<span class="brx">=</span><span class="cs">\dimexpr</span>1mm+1.75pt<span class="brx">]</span> 
<span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> 1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 2/3 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> 2 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 2 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 3 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> 2 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>rulethickness<span class="brx">=</span>2pt,offset<span class="brx">=</span>1mm<span class="brx">]</span> 2 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 3 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> 1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 4 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> 1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 2 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
      <p>produces
</p>
     </li>
     <li class="rendering">
      <img height="203" src="../wikiteximage/9ce048c61f8ead05d5635a5b8b43f03b.webp" width="105">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Cells_with_breaking_lines">
      Cells with breaking lines
     </span>
    </h3>
    <p>If you provide a width to a cell the lines will break.
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>2<span class="brx">]</span><span class="brx">[</span>width<span class="brx">=</span>3cm<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> 1 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> This is a very long line that should break. <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
      <p>produces
</p>
     </li>
     <li class="rendering">
      <img height="48" src="../wikiteximage/a34fe2c192d27b6ca3b594b2824a635b.webp" width="194">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Rules">
      Rules
     </span>
    </h3>
    <h4>
     <span class="mw-headline" id="Example:_an_invoice_with_thick_rules">
      Example: an invoice with thick rules
     </span>
    </h4>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A5<span class="brx">]</span>
<span class="br">{</span><span class="cs">\bfa</span> Invoice<span class="br">}</span>
<span class="cs"><span class="stylecs">\switchtobodyfont</span></span><span class="brx">[</span>6pt<span class="brx">]</span>
<span class="cs"><span class="documentcs">\blank</span></span>
<span class="cs"><span class="documentcs">\bTABLE</span></span>
   <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>frame<span class="brx">=</span>off,offset<span class="brx">=</span>1mm<span class="brx">]</span>
   <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span><span class="brx">[</span>*<span class="brx">]</span><span class="brx">[</span>height<span class="brx">=</span>7.25mm<span class="brx">]</span>
   <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>1,2<span class="brx">]</span>  <span class="brx">[</span>width<span class="brx">=</span>20mm,offset<span class="brx">=</span><span class="cs">\dimexpr</span>1mm+2pt,align<span class="brx">=</span>flushleft<span class="brx">]</span>
   <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>3,4,5<span class="brx">]</span><span class="brx">[</span>width<span class="brx">=</span>20mm,offset<span class="brx">=</span><span class="cs">\dimexpr</span>1mm+2pt,align<span class="brx">=</span>flushright<span class="brx">]</span>
   <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>bottomframe<span class="brx">=</span>on, rulethickness<span class="brx">=</span>2pt,offset<span class="brx">=</span>1mm<span class="brx">]</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="cs">\bf</span> Date <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="cs">\bf</span> Description <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="cs">\bf</span> Quantity <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="cs">\bf</span> Price <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="cs">\bf</span> Total <span class="cs">\eTD</span>
   <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>bottomframe<span class="brx">=</span>on,rulethickness<span class="brx">=</span>.25pt<span class="brx">]</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 05-01-2010 <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> Element  1 <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 10.0 <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 6.00 <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 60.00 <span class="cs">\eTD</span>
   <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>bottomframe<span class="brx">=</span>on,rulethickness<span class="brx">=</span>.25pt<span class="brx">]</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 05-01-2010 <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> Element 2 <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 2.0 <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 3.00 <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 6.00 <span class="cs">\eTD</span>
   <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>topframe<span class="brx">=</span>on,rulethickness<span class="brx">=</span>2pt,offset<span class="brx">=</span>1mm<span class="brx">]</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nx<span class="brx">=</span>3<span class="brx">]</span> <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>align<span class="brx">=</span>flushleft<span class="brx">]</span> Subtotal <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 66.00 <span class="cs">\eTD</span>
   <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>offset<span class="brx">=</span><span class="cs">\dimexpr</span>1mm+2pt<span class="brx">]</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nx<span class="brx">=</span>3<span class="brx">]</span> <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>align<span class="brx">=</span>flushleft<span class="brx">]</span> VAT 19<span class="cs">\%</span> <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 12.54 <span class="cs">\eTD</span>
   <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span>
        <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>nx<span class="brx">=</span>3<span class="brx">]</span> <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>align<span class="brx">=</span>flushleft<span class="brx">]</span> <span class="cs">\bf</span> Total <span class="cs">\eTD</span>
	<span class="cs"><span class="documentcs">\bTD</span></span> 78.54 <span class="cs">\eTD</span>
   <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
     </li>
     <li class="rendering">
      <img height="245" src="../wikiteximage/88a8978ae6fb0ca0bd1e6bc8a3d6b5da.webp" width="594">
     </li>
    </ul>
    <h4>
     <span class="mw-headline" id="Rules_with_different_thickness">
      Rules with different thickness
     </span>
    </h4>
    <p>There is only one value for all four borders. However, MetaPost can be used as a workaround until the separate "rulethickness" values are implemented.
</p>
    <p>The following example (mkiv only!) by Wolfgang Schuster shows a table using MetaPost for the rules:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\startuseMPgraphic</span></span><span class="br">{</span>tableborders<span class="br">}</span>

draw leftboundary   OverlayBox withpen pensquare scaled <span class="cs"><span class="systemcs">\frameddimension</span></span>  <span class="br">{</span>leftrulethickness<span class="br">}</span>&nbsp;;
draw rightboundary  OverlayBox withpen pensquare scaled <span class="cs"><span class="systemcs">\frameddimension</span></span> <span class="br">{</span>rightrulethickness<span class="br">}</span>&nbsp;;
draw topboundary    OverlayBox withpen pensquare scaled <span class="cs"><span class="systemcs">\frameddimension</span></span>   <span class="br">{</span>toprulethickness<span class="br">}</span>&nbsp;;
draw bottomboundary OverlayBox withpen pensquare scaled <span class="cs"><span class="systemcs">\frameddimension</span></span><span class="br">{</span>bottomrulethickness<span class="br">}</span>&nbsp;;

clip currentpicture to OverlayBox
	leftenlarged   <span class="brx">(</span><span class="cs"><span class="systemcs">\frameddimension</span></span>  <span class="br">{</span>leftrulethickness<span class="br">}</span>/2<span class="brx">)</span>
	rightenlarged  <span class="brx">(</span><span class="cs"><span class="systemcs">\frameddimension</span></span> <span class="br">{</span>rightrulethickness<span class="br">}</span>/2<span class="brx">)</span>
	topenlarged    <span class="brx">(</span><span class="cs"><span class="systemcs">\frameddimension</span></span>   <span class="br">{</span>toprulethickness<span class="br">}</span>/2<span class="brx">)</span>
	bottomenlarged <span class="brx">(</span><span class="cs"><span class="systemcs">\frameddimension</span></span><span class="br">{</span>bottomrulethickness<span class="br">}</span>/2<span class="brx">)</span>&nbsp;;

setbounds currentpicture to OverlayBox&nbsp;;

<span class="cs"><span class="stylecs">\stopuseMPgraphic</span></span>

<span class="cs"><span class="stylecs">\defineoverlay</span></span><span class="brx">[</span>tableborders<span class="brx">]</span><span class="brx">[</span><span class="cs"><span class="stylecs">\useMPgraphic</span></span><span class="br">{</span>tableborders<span class="br">}</span><span class="brx">]</span>

<span class="cs"><span class="stylecs">\startsetups</span></span> tableborders

<span class="cs"><span class="stylecs">\setupTABLE</span></span>
  <span class="brx">[</span>         background<span class="brx">=</span><span class="br">{</span>color,tableborders<span class="br">}</span>,
                 frame<span class="brx">=</span>off,
      backgroundoffset<span class="brx">=</span>0pt,
     leftrulethickness<span class="brx">=</span><span class="cs"><span class="systemcs">\framedparameter</span></span><span class="br">{</span>rulethickness<span class="br">}</span>,
    rightrulethickness<span class="brx">=</span><span class="cs"><span class="systemcs">\framedparameter</span></span><span class="br">{</span>rulethickness<span class="br">}</span>,
      toprulethickness<span class="brx">=</span><span class="cs"><span class="systemcs">\framedparameter</span></span><span class="br">{</span>rulethickness<span class="br">}</span>,
   bottomrulethickness<span class="brx">=</span><span class="cs"><span class="systemcs">\framedparameter</span></span><span class="br">{</span>rulethickness<span class="br">}</span><span class="brx">]</span>

<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span>  <span class="brx">[</span>odd<span class="brx">]</span>  <span class="brx">[</span>backgroundcolor<span class="brx">=</span>lightgray<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span>  <span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>backgroundcolor<span class="brx">=</span>gray,bottomrulethickness<span class="brx">=</span>2pt<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span>  <span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>toprulethickness<span class="brx">=</span>2pt,bottomrulethickness<span class="brx">=</span>2pt<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>leftrulethickness<span class="brx">=</span>2pt<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>rightrulethickness<span class="brx">=</span>2pt<span class="brx">]</span>

<span class="cs"><span class="stylecs">\stopsetups</span></span>

<span class="cs"><span class="documentcs">\starttext</span></span>

<span class="cs"><span class="documentcs">\bTABLE</span></span>
  <span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>7<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>3<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">#</span>1-<span class="brx">#</span><span class="brx">#</span>1<span class="cs">\eTD</span><span class="br">}</span><span class="cs">\eTR</span><span class="br">}</span>
<span class="cs">\eTABLE</span>

<span class="cs"><span class="documentcs">\blank</span></span>

<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>setups<span class="brx">=</span>tableborders<span class="brx">]</span>
  <span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>7<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>3<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">#</span>1-<span class="brx">#</span><span class="brx">#</span>1<span class="cs">\eTD</span><span class="br">}</span><span class="cs">\eTR</span><span class="br">}</span>
<span class="cs">\eTABLE</span>

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
      <p>gives:
</p>
     </li>
     <li class="rendering">
      <img height="1240" src="../wikiteximage/b3b6524eae817cc2daaf2ca35017af0e.webp" width="874">
     </li>
    </ul>
    <h4>
     <span class="mw-headline" id="Thick_bottom_rules">
      Thick bottom rules
     </span>
    </h4>
    <p>This is a simplified version of the example above (corresponding mailing thread - <a class="external text" href="http://www.ntg.nl/pipermail/ntg-context/2012/069541.html" rel="nofollow">TABLE: header with a thick bottom line</a>).
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\startuseMPgraphic</span></span><span class="br">{</span>MP:thickBtm<span class="br">}</span>
  draw bottomboundary OverlayBox withpen pensquare scaled <span class="cs"><span class="systemcs">\frameddimension</span></span><span class="br">{</span>bottomrulethickness<span class="br">}</span>;
  clip currentpicture to OverlayBox;
  setbounds currentpicture to OverlayBox;
<span class="cs"><span class="stylecs">\stopuseMPgraphic</span></span>

<span class="cs"><span class="stylecs">\defineoverlay</span></span><span class="brx">[</span>OL:thickBtm<span class="brx">]</span><span class="brx">[</span><span class="cs"><span class="stylecs">\useMPgraphic</span></span><span class="br">{</span>MP:thickBtm<span class="br">}</span><span class="brx">]</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
  <span class="cs"><span class="documentcs">\bTABLE</span></span>
    <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>align<span class="brx">=</span>middle<span class="brx">]</span>
    <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>header<span class="brx">]</span><span class="brx">[</span>background<span class="brx">=</span><span class="br">{</span>OL:thickBtm<span class="br">}</span>,bottomrulethickness<span class="brx">=</span>4pt<span class="brx">]</span>
    <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span><span class="brx">[</span>4<span class="brx">]</span><span class="brx">[</span>background<span class="brx">=</span><span class="br">{</span>OL:thickBtm<span class="br">}</span>,bottomrulethickness<span class="brx">=</span>2pt<span class="brx">]</span>
    <span class="comment">%</span>
    <span class="cs"><span class="documentcs">\bTABLEhead</span></span><span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>3<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTH</span></span><span class="brx">#</span>1<span class="cs">\eTH</span><span class="br">}</span><span class="cs">\eTR</span><span class="cs">\eTABLEhead</span>
    <span class="cs"><span class="documentcs">\bTABLEbody</span></span><span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>6<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="systemcs">\dorecurse</span></span><span class="br">{</span>3<span class="br">}</span><span class="br">{</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">#</span>1-<span class="brx">#</span><span class="brx">#</span>1<span class="cs">\eTD</span><span class="br">}</span><span class="cs">\eTR</span><span class="br">}</span><span class="cs">\eTABLEbody</span>
  <span class="cs">\eTABLE</span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
      <p>Gives:
</p>
     </li>
     <li class="rendering">
      <img height="1240" src="../wikiteximage/30f1fe36439959b32bfb525da6f62f4b.webp" width="874">
     </li>
    </ul>
    <h4>
     <span class="mw-headline" id="Diagonal_rules">
      Diagonal rules
     </span>
    </h4>
    <p>Sometimes a diagonal rule is required in the top left corner cell of a table to create two fields, one for the left column and one for the top row.
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\startuseMPgraphic</span></span><span class="br">{</span>DiagonalRule<span class="br">}</span>
  rulethickness&nbsp;:<span class="brx">=</span> <span class="cs"><span class="systemcs">\frameddimension</span></span><span class="br">{</span>rulethickness<span class="br">}</span>;

  drawoptions<span class="brx">(</span>
    withpen pencircle scaled rulethickness
    withcolor <span class="cs"><span class="stylecs">\MPcolor</span></span><span class="br">{</span><span class="cs"><span class="systemcs">\framedparameter</span></span><span class="br">{</span>framecolor<span class="br">}</span><span class="br">}</span><span class="brx">)</span>;

  pair leftcorner, rightcorner;
  leftcorner  :<span class="brx">=</span> <span class="brx">(</span>rulethickness, <span class="cs"><span class="systemcs">\overlayheight</span></span>-rulethickness<span class="brx">)</span>;
  rightcorner&nbsp;:<span class="brx">=</span> <span class="brx">(</span><span class="cs"><span class="systemcs">\overlaywidth</span></span>-rulethickness, rulethickness<span class="brx">)</span>;

  draw leftcorner -- rightcorner;
<span class="cs"><span class="stylecs">\stopuseMPgraphic</span></span>

<span class="cs"><span class="stylecs">\defineoverlay</span></span>
  <span class="brx">[</span>DiagonalRule<span class="brx">]</span>
  <span class="brx">[</span><span class="cs"><span class="stylecs">\useMPgraphic</span></span><span class="br">{</span>DiagonalRule<span class="br">}</span><span class="brx">]</span>

<span class="cs"><span class="systemcs">\define</span></span><span class="brx">[</span>2<span class="brx">]</span><span class="cs">\DiagonalLabel</span><span class="br">{</span><span class="comment">%</span>
  <span class="cs"><span class="stylecs">\setuptabulate</span></span> <span class="brx">[</span>after<span class="brx">=</span><span class="br">{</span><span class="cs"><span class="documentcs">\blank</span></span><span class="brx">[</span><span class="cs"><span class="systemcs">\frameddimension</span></span><span class="br">{</span>offset<span class="br">}</span><span class="brx">]</span><span class="br">}</span><span class="brx">]</span>
  <span class="cs"><span class="documentcs">\starttabulate</span></span> <span class="brx">[</span>|p|r|<span class="brx">]</span>
    <span class="cs">\NC</span>    <span class="cs">\NC</span> <span class="brx">#</span>2 <span class="cs">\NC</span><span class="cs">\NR</span>
    <span class="cs">\NC</span> <span class="brx">#</span>1 <span class="cs">\NC</span>    <span class="cs">\NC</span><span class="cs">\NR</span>
  <span class="cs"><span class="documentcs">\stoptabulate</span></span>
<span class="br">}</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
  <span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>row<span class="brx">]</span> <span class="brx">[</span>1<span class="brx">]</span> <span class="brx">[</span>width<span class="brx">=</span>2cm<span class="brx">]</span>
  <span class="cs"><span class="documentcs">\bTABLE</span></span>
    <span class="cs"><span class="documentcs">\bTR</span></span>
      <span class="cs"><span class="documentcs">\bTD</span></span> <span class="brx">[</span>background<span class="brx">=</span>DiagonalRule<span class="brx">]</span>
        <span class="cs">\DiagonalLabel</span><span class="br">{</span>Foo<span class="br">}</span><span class="br">{</span>Bar<span class="br">}</span>
      <span class="cs">\eTD</span>
      <span class="cs"><span class="documentcs">\bTD</span></span> Second <span class="cs">\eTD</span>
      <span class="cs"><span class="documentcs">\bTD</span></span> Third <span class="cs">\eTD</span>
    <span class="cs">\eTR</span>
    <span class="cs"><span class="documentcs">\bTR</span></span>
      <span class="cs"><span class="documentcs">\bTD</span></span> Alpha <span class="cs">\eTD</span>
      <span class="cs"><span class="documentcs">\bTD</span></span> Beta  <span class="cs">\eTD</span>
      <span class="cs"><span class="documentcs">\bTD</span></span> Gamma <span class="cs">\eTD</span>
    <span class="cs">\eTR</span>
  <span class="cs">\eTABLE</span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
      <p>Gives:
</p>
     </li>
     <li class="rendering">
      <img height="1240" src="../wikiteximage/5f63bcee466bf9702e0f29b590cccca4.webp" width="874">
     </li>
    </ul>
    <p>This solution has (at least) one caveat: Because the first
tabulate column is set in paragraph mode, it will eat up as much
space as <em>possible</em>, in contrast to occupying as much space as
necessary. That is why the width of the column has to be set
explicitly.
</p>
    <h3>
     <span class="mw-headline" id="Using_character_alignment">
      Using character alignment
     </span>
    </h3>
    <p>ConTeXt can align columns of numbers on a character (often a decimal point to align accounting data) automatically, removing the need to add fixed spaces into your document. For any such column you need to specify the character on which to align. You use the <tt>aligncharacter=yes</tt> parameter to set up character alignment, <tt>alignmentcharacter={.}</tt> to say what the character should be (in this case a full stop) and <tt>align=middle</tt> to set the overall alignment of the column.
</p>
    <table>
     <tbody>
      <tr valign="top">
       <td>
<pre class="tex"><span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>1<span class="brx">]</span><span class="brx">[</span>align<span class="brx">=</span>right<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>2<span class="brx">]</span><span class="brx">[</span>alignmentcharacter<span class="brx">=</span><span class="br">{</span>.<span class="br">}</span>,
aligncharacter<span class="brx">=</span>yes,align<span class="brx">=</span>middle<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTH</span></span> Category <span class="cs">\eTH</span> <span class="cs"><span class="documentcs">\bTH</span></span> Data entry <span class="cs">\eTH</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> First <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 71.3 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> Second <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 43.7 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> Total <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 115 <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
</td>
       <td>
<ul class="demo"><li class="rendering"><img height="103" src="../wikiteximage/cf432cea730637075bb55736c3a2f7f2.webp" width="179"></li></ul>
</td>
      </tr>
     </tbody>
    </table>
    <p>You'll note that the final line, because it has no <code>.</code> in the number, gets aligned under the right-hand side of the numbers. In most circumstances you would want such a number aligned with the left-hand set of digits. To so do, issue the following command in your preamble:
</p>
    <pre class="tex"><span class="cs">\chardef</span><span class="cs">\characteralignmentmode</span><span class="brx">=</span>2
</pre>
    <p>and now the table above will turn out like this:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="103" src="../wikiteximage/fe131396ca77ba712df7aa1cbe492557.webp" width="179">
     </li>
    </ul>
    <p>If there's no <code>alignmentcharacter</code> in the cell, the content will be aligned in the following way depending on the value of <code>\characteralignmentmode</code>:
</p>
    <table style="border:1px solid #DDDDDD;">
     <tbody>
      <tr style="background-color:#DDDDDD; font-weight: bold;">
       <td>mode</td>
       <td width="200"></td>
       <td>.</td>
       <td width="200"></td>
      </tr>
      <tr>
       <td align="center" style="background-color:#DDDDDD">0</td>
       <td align="center" colspan="3">centered</td>
      </tr>
      <tr style="background-color:#EEEEEE;">
       <td align="center" style="background-color:#DDDDDD">1</td>
       <td align="left">left in before</td>
       <td style="background-color:#DDDDDD">.</td>
       <td></td>
      </tr>
      <tr>
       <td align="center" style="background-color:#DDDDDD">2</td>
       <td align="right">right in before</td>
       <td style="background-color:#DDDDDD">.</td>
       <td></td>
      </tr>
      <tr style="background-color:#EEEEEE;">
       <td align="center" style="background-color:#DDDDDD">3</td>
       <td></td>
       <td style="background-color:#DDDDDD">.</td>
       <td align="left">left in after</td>
      </tr>
      <tr>
       <td align="center" style="background-color:#DDDDDD">4</td>
       <td></td>
       <td style="background-color:#DDDDDD">.</td>
       <td align="right">right in after</td>
      </tr>
     </tbody>
    </table>
    <h4>
     <span class="mw-headline" id="Character_alignment_methods">
      Character alignment methods
     </span>
    </h4>
    <p>MkIV (starting in late June 2014) offers two methods for character alignment.  The first, "number", attempts to identify the number from preceding and trailing text, align the number on the separator and separately vertically align preceding or trailing text by paddind in-between the number and the preceding/trailing text.  This looks very nice when the preceding or trailing text is all of the same width (for example, a currency symbol or&nbsp;% sign), but will mis-align if the preceding or trailing text has varying widths.  Number mode is the default for most separators, but can be forced by specifying <code>alignmentcharacter={number-&gt;-}</code>.
</p>
    <p>Note that the below examples will not render properly until the wiki supports this feature; this file shows the expected output. <a href="../File:character_alignment_methods_example.pdf" title="File:character alignment methods example.pdf">File:character alignment methods example.pdf</a>
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="comment">% mode=mkiv</span>
<span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A5<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>1,2,3,4<span class="brx">]</span><span class="brx">[</span>alignmentcharacter<span class="brx">=</span><span class="br">{</span>number-&gt;.<span class="br">}</span>,aligncharacter<span class="brx">=</span>yes,align<span class="brx">=</span>middle<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLEhead</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span>
<span class="cs"><span class="documentcs">\bTH</span></span> Same-Width Prefix <span class="cs">\eTH</span> <span class="cs"><span class="documentcs">\bTH</span></span> Varying-Width Prefix <span class="cs">\eTH</span>
<span class="cs"><span class="documentcs">\bTH</span></span> Same-Width Suffix <span class="cs">\eTH</span> <span class="cs"><span class="documentcs">\bTH</span></span> Varying-Width Suffix <span class="cs">\eTH</span>
<span class="cs">\eTR</span>
<span class="cs">\eTABLEhead</span>
<span class="cs"><span class="documentcs">\bTABLEbody</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span>  \$1.00 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>    \$1.00 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>  1.00<span class="cs">\%</span> <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>  1.00<span class="cs">\%</span>   <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> \$10.00 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> \$\$10.00 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 10.00<span class="cs">\%</span> <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 10.00<span class="cs">\%</span><span class="cs">\%</span> <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span>  \$1.0  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>    \$1.0  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>  1.0<span class="cs">\%</span>  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>  1.0<span class="cs">\%</span>    <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> \$10.0  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> \$\$10.0  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 10.0<span class="cs">\%</span>  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 10.0<span class="cs">\%</span><span class="cs">\%</span>  <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs">\eTABLEbody</span>
<span class="cs">\eTABLE</span>
</pre>
     </li>
     <li class="rendering">
      <img height="148" src="../wikiteximage/7ebcebc47cd73bcef36c0f03d3cce216.webp" width="626">
     </li>
    </ul>
    <p>In the above example the "varying-width" columns do not align on the alignment character.  For these cases the "text" method is provided.  The logic simpler&mdash;it does not attempt to pad space in-between the number and any preceding or trailing text, so the text will always align on the alignment character, but forgoes the attempt to vertically align preceding and trailing text.  This is the default mode for the "-" separator, but can be forced by specifying <code>alignmentcharacter={text-&gt;.}</code>.  The below example shows that all four columns align on the ".", but the "$" and "%" are no longer stacked.
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="comment">% mode=mkiv</span>
<span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A5<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>1,2,3,4<span class="brx">]</span><span class="brx">[</span>alignmentcharacter<span class="brx">=</span><span class="br">{</span>text-&gt;.<span class="br">}</span>,aligncharacter<span class="brx">=</span>yes,align<span class="brx">=</span>middle<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLEhead</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span>
<span class="cs"><span class="documentcs">\bTH</span></span> Same-Width Prefix <span class="cs">\eTH</span> <span class="cs"><span class="documentcs">\bTH</span></span> Varying-Width Prefix <span class="cs">\eTH</span>
<span class="cs"><span class="documentcs">\bTH</span></span> Same-Width Suffix <span class="cs">\eTH</span> <span class="cs"><span class="documentcs">\bTH</span></span> Varying-Width Suffix <span class="cs">\eTH</span>
<span class="cs">\eTR</span>
<span class="cs">\eTABLEhead</span>
<span class="cs"><span class="documentcs">\bTABLEbody</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span>  \$1.00 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>    \$1.00 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>  1.00<span class="cs">\%</span> <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>  1.00<span class="cs">\%</span>   <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> \$10.00 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> \$\$10.00 <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 10.00<span class="cs">\%</span> <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 10.00<span class="cs">\%</span><span class="cs">\%</span> <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span>  \$1.0  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>    \$1.0  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>  1.0<span class="cs">\%</span>  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span>  1.0<span class="cs">\%</span>    <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> \$10.0  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> \$\$10.0  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 10.0<span class="cs">\%</span>  <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> 10.0<span class="cs">\%</span><span class="cs">\%</span>  <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs">\eTABLEbody</span>
<span class="cs">\eTABLE</span>
</pre>
     </li>
     <li class="rendering">
      <img height="148" src="../wikiteximage/7d460e9cc92334c3c882bf73ad94802d.webp" width="626">
     </li>
    </ul>
    <p>Entering <code>\nocharacteralign</code> disables character alignment in a cell.
</p>
    <h3>
     <span class="mw-headline" id="Specifying_the_cell_column">
      Specifying the cell column
     </span>
    </h3>
    <p>When writing a table you can omit empty cells and define only cells for specified columns. To have this feature fully available you need to have a beta or a quite fresh ConTeXt version.
</p>
    <p>Two methods are available:
</p>
    <ul>
     <li>
      With the TD "n" option, the undefined cells are merged into a single spanned cell.
     </li>
     <li>
      With the TD "m" option, the undefined cells appear as empty normal cells.
     </li>
    </ul>
    <p>Here is an example using the "n" option:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A5<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>width<span class="brx">=</span>3em<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span> d1 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>n<span class="brx">=</span>2<span class="brx">]</span> d2 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>n<span class="brx">=</span>5<span class="brx">]</span> d5 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>n<span class="brx">=</span>7<span class="brx">]</span> d7 <span class="cs">\eTD</span><span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span> f1 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>n<span class="brx">=</span>4<span class="brx">]</span> f4 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>n<span class="brx">=</span>5<span class="brx">]</span> f5 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>n<span class="brx">=</span>7<span class="brx">]</span> f7 <span class="cs">\eTD</span><span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
     </li>
     <li class="rendering">
      <img height="53" src="../wikiteximage/06ebfeb47d674783351311d5c94f5544.webp" width="251">
     </li>
    </ul>
    <p>Here is an example using the "m" option:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A5<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>width<span class="brx">=</span>3em<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span> d1 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>m<span class="brx">=</span>2<span class="brx">]</span> d2 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>m<span class="brx">=</span>5<span class="brx">]</span> d5 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>m<span class="brx">=</span>7<span class="brx">]</span> d7 <span class="cs">\eTD</span><span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span> f1 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>m<span class="brx">=</span>4<span class="brx">]</span> f4 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>m<span class="brx">=</span>5<span class="brx">]</span> f5 <span class="cs">\eTD</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>m<span class="brx">=</span>7<span class="brx">]</span> f7 <span class="cs">\eTD</span><span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
     </li>
     <li class="rendering">
      <img height="53" src="../wikiteximage/b8751590db6a9fc2c2cbac675b6c016f.webp" width="251">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Round_corners">
      Round corners
     </span>
    </h3>
    <p>For a different approach for round corners and colored background follow the text after this example.
</p>
    <p>It is possible to round the corners of the table if you turn off the main frame of the table and frame the table in <tt><a href="../Command/framed.html" title="Command/framed">\framed</a></tt>. Compare two different approaches in the first and second example.
</p>
    <p>You can't color the background of the table with round corners unless the frame rulethickness is not big enough to cover the rectangular corners of the background (second example). Well, you can if you frame the table twice. Once in the thick white frame and then in the thin frame with negative offset and slightly smaller corner radius (third example). Be aware of other complications -- notice that the thick white frame is still visible in the text above it.
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="stylecs">\setupcolors</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span> 
<span class="comment">%\showstruts</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>background<span class="brx">=</span>color,backgroundcolor<span class="brx">=</span>yellow<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupframed</span></span><span class="brx">[</span>framecolor<span class="brx">=</span>darkgreen<span class="brx">]</span>

<span class="cs"><span class="stylecs">\defineparagraphs</span></span><span class="brx">[</span>ThreeCols<span class="brx">]</span>

<span class="cs">\startThreeCols</span>

First

<span class="cs">\def</span><span class="cs">\StartTable</span>
   <span class="br">{</span><span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span>   <span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>topframe<span class="brx">=</span>off<span class="brx">]</span><span class="comment">%</span>
    <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span>   <span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>bottomframe<span class="brx">=</span>off<span class="brx">]</span><span class="comment">%</span>
    <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>leftframe<span class="brx">=</span>off<span class="brx">]</span><span class="comment">%</span>
    <span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>rightframe<span class="brx">=</span>off<span class="brx">]</span><span class="comment">%</span>
    <span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>strut<span class="brx">=</span>no,corner<span class="brx">=</span>round,offset<span class="brx">=</span>.5<span class="cs"><span class="stylecs">\linewidth</span></span><span class="brx">]</span>
    <span class="cs">\bgroup</span><span class="br">}</span>

<span class="cs">\def</span><span class="cs">\StopTable</span>
   <span class="br">{</span><span class="cs">\egroup</span><span class="br">}</span>

<span class="cs">\StartTable</span>
    <span class="cs"><span class="documentcs">\bTABLE</span></span>
        <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
        <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
        <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
    <span class="cs">\eTABLE</span>
<span class="cs">\StopTable</span>

<span class="cs">\nextThreeCols</span>

Second

<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span>   <span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>topframe<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span>   <span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>bottomframe<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>leftframe<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>rightframe<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>strut<span class="brx">=</span>no,corner<span class="brx">=</span>round,offset<span class="brx">=</span>.5<span class="cs"><span class="stylecs">\linewidth</span></span>,,rulethickness<span class="brx">=</span>1mm<span class="brx">]</span><span class="cs">\bgroup</span>
    <span class="cs"><span class="documentcs">\bTABLE</span></span>
        <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
        <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
        <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
    <span class="cs">\eTABLE</span>
<span class="cs">\egroup</span>

<span class="cs">\nextThreeCols</span>

Third

<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span>   <span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>topframe<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>row<span class="brx">]</span>   <span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>bottomframe<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>leftframe<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>column<span class="brx">]</span><span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>rightframe<span class="brx">=</span>off<span class="brx">]</span>
<span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>strut<span class="brx">=</span>no,corner<span class="brx">=</span>round,
    radius<span class="brx">=</span>1.4mm,offset<span class="brx">=</span>-1mm,,rulethickness<span class="brx">=</span>.1mm<span class="brx">]</span><span class="cs">\bgroup</span>
    <span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>strut<span class="brx">=</span>no,corner<span class="brx">=</span>round,
            radius<span class="brx">=</span>1.5mm,offset<span class="brx">=</span>0mm,,rulethickness<span class="brx">=</span>1mm,framecolor<span class="brx">=</span>white<span class="brx">]</span><span class="cs">\bgroup</span>
        <span class="cs"><span class="documentcs">\bTABLE</span></span>
            <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
            <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
            <span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> test <span class="cs">\eTD</span> <span class="cs">\eTR</span>
        <span class="cs">\eTABLE</span>
    <span class="cs">\egroup</span>
<span class="cs">\egroup</span>

<span class="cs">\stopThreeCols</span>

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="1240" src="../wikiteximage/b21d01210e1e3b13c4c680cada44314a.webp" width="874">
     </li>
    </ul>
    <p>From 2006-10-11 on, ConTeXt contains one more mechanism for round corners. Watch the example:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A5<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="stylecs">\setupcolors</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>y<span class="brx">]</span>    <span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>background<span class="brx">=</span>color,backgroundcolor<span class="brx">=</span>blue,frame<span class="brx">=</span>off,bottomframe<span class="brx">=</span>on,topframe<span class="brx">=</span>on,framecolor<span class="brx">=</span>white<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>backgroundcorner<span class="brx">=</span>2,corner<span class="brx">=</span>10,frame<span class="brx">=</span>on<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>backgroundcorner<span class="brx">=</span>4,corner<span class="brx">=</span>12,frame<span class="brx">=</span>on<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>row<span class="brx">]</span>  <span class="brx">[</span>each<span class="brx">]</span> <span class="brx">[</span>background<span class="brx">=</span>color,backgroundcolor<span class="brx">=</span>blue,frame<span class="brx">=</span>on,framecolor<span class="brx">=</span>white<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>2<span class="brx">]</span>    <span class="brx">[</span>corner<span class="brx">=</span>8<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>2<span class="brx">]</span>    <span class="brx">[</span>corner<span class="brx">=</span>5<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>first<span class="brx">]</span><span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>corner<span class="brx">=</span>7<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>last<span class="brx">]</span> <span class="brx">[</span>corner<span class="brx">=</span>6<span class="brx">]</span>

<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>frame<span class="brx">=</span>off,align<span class="brx">=</span>middle<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> one   <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> two    <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> three <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> first <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> second <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> third <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> alpha <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> beta   <span class="cs">\eTD</span> <span class="cs"><span class="documentcs">\bTD</span></span> gamma <span class="cs">\eTD</span> <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="1240" src="../wikiteximage/171dc65ddd0d3c516499cc17a32167a0.webp" width="874">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Other_options">
      Other options
     </span>
    </h3>
    <p>Some other useful options that were not covered above:
</p>
    <ul>
     <li>
      <tt>
       align=yes
      </tt>
      will align the text both left and right justified
     </li>
     <li>
      <tt>
       loffset
      </tt>
      ,
      <tt>
       roffset
      </tt>
      ,
      <tt>
       toffset
      </tt>
      ,
      <tt>
       boffset
      </tt>
      can be used in addition to
      <tt>
       offset
      </tt>
      to specify cell content offsets in each direction separately, see also
      <tt>
       <a href="../Command/framed.html" title="Command/framed">
        \framed
       </a>
      </tt>
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Rotated_headline">
      Rotated headline
     </span>
    </h3>
    <p>Sometimes you have table cells that are rather short but headings that are rather long.
In this case it could make sense to rotate the headings. With a rotation other than 90&deg;, it additionally makes sense to let the heading overlap (so push the cells back together). This is either possible with MetaPost or TeX primitives (<a class="external text" href="https://www.mail-archive.com/ntg-context@ntg.nl/msg108472.html" rel="nofollow">Source</a>).
</p>
    <h4>
     <span class="mw-headline" id="MetaPost_solution">
      MetaPost solution
     </span>
    </h4>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\startuseMPgraphic</span></span><span class="br">{</span>tableheader<span class="br">}</span><span class="br">{</span>text,rotation<span class="br">}</span>

   label.lft<span class="brx">(</span>"<span class="cs"><span class="stylecs">\strut</span></span><span class="cs">\bf</span><span class="cs"><span class="stylecs">\MPvar</span></span><span class="br">{</span>text<span class="br">}</span>",origin<span class="brx">)</span>
     rotated <span class="cs"><span class="stylecs">\MPvar</span></span><span class="br">{</span>rotation<span class="br">}</span>
     shifted <span class="brx">(</span><span class="cs">\the</span><span class="cs"><span class="systemcs">\strutht</span></span>,0<span class="brx">)</span>;

   setbounds currentpicture to unitsquare
 
   xyscaled<span class="brx">(</span><span class="cs">\the</span><span class="cs">\struttotal</span>,abs<span class="brx">(</span>sind<span class="brx">(</span><span class="cs"><span class="stylecs">\MPvar</span></span><span class="br">{</span>rotation<span class="br">}</span><span class="brx">)</span><span class="brx">)</span>*<span class="cs">\the</span><span class="cs"><span class="systemcs">\widthofstring</span></span><span class="br">{</span><span class="cs"><span class="stylecs">\MPvar</span></span><span class="br">{</span>text<span class="br">}</span><span class="br">}</span><span class="brx">)</span>;

<span class="cs"><span class="stylecs">\stopuseMPgraphic</span></span>

<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>frame<span class="brx">=</span>off<span class="brx">]</span>
   <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>align<span class="brx">=</span><span class="br">{</span>middle,low<span class="br">}</span><span class="brx">]</span>
     <span class="cs"><span class="documentcs">\bTH</span></span> <span class="cs">\eTH</span>
     <span class="cs"><span class="documentcs">\bTH</span></span><span class="brx">[</span>width<span class="brx">=</span>3em<span class="brx">]</span> 
<span class="cs"><span class="stylecs">\dontleavehmode</span></span><span class="cs"><span class="stylecs">\useMPgraphic</span></span><span class="br">{</span>tableheader<span class="br">}</span><span class="br">{</span>text<span class="brx">=</span>Water 
buffalo,rotation<span class="brx">=</span>320<span class="br">}</span> <span class="cs">\eTH</span>
     <span class="cs"><span class="documentcs">\bTH</span></span><span class="brx">[</span>width<span class="brx">=</span>3em<span class="brx">]</span> 
<span class="cs"><span class="stylecs">\dontleavehmode</span></span><span class="cs"><span class="stylecs">\useMPgraphic</span></span><span class="br">{</span>tableheader<span class="br">}</span><span class="br">{</span>text<span class="brx">=</span>Mexican redknee 
tarantula,rotation<span class="brx">=</span>320<span class="br">}</span> <span class="cs">\eTH</span>
     <span class="cs"><span class="documentcs">\bTH</span></span><span class="brx">[</span>width<span class="brx">=</span>3em<span class="brx">]</span> 
<span class="cs"><span class="stylecs">\dontleavehmode</span></span><span class="cs"><span class="stylecs">\useMPgraphic</span></span><span class="br">{</span>tableheader<span class="br">}</span><span class="br">{</span>text<span class="brx">=</span>European turtle 
dove,rotation<span class="brx">=</span>320<span class="br">}</span> <span class="cs">\eTH</span>
   <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>topframe<span class="brx">=</span>on,align<span class="brx">=</span>middle<span class="brx">]</span>
     <span class="cs"><span class="documentcs">\bTD</span></span> Amount of legs <span class="cs">\eTD</span>
     <span class="cs"><span class="documentcs">\bTD</span></span> 4 <span class="cs">\eTD</span>
     <span class="cs"><span class="documentcs">\bTD</span></span> 8 <span class="cs">\eTD</span>
     <span class="cs"><span class="documentcs">\bTD</span></span> 2 <span class="cs">\eTD</span>
   <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
     </li>
     <li class="rendering">
      <img height="183" src="../wikiteximage/be6f3f26968a7ae9dd6919f762815611.webp" width="267">
     </li>
    </ul>
    <h4>
     <span class="mw-headline" id="Solution_with_TeX_primitives">
      Solution with TeX primitives
     </span>
    </h4>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>frame<span class="brx">=</span>off<span class="brx">]</span>
   <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>align<span class="brx">=</span><span class="br">{</span>middle,low<span class="br">}</span><span class="brx">]</span>
     <span class="cs"><span class="documentcs">\bTH</span></span> <span class="cs">\eTH</span>
     <span class="cs"><span class="documentcs">\bTH</span></span> 
<span class="cs"><span class="stylecs">\dontleavehmode</span></span><span class="cs">\kern</span>1.5em<span class="cs"><span class="systemcs">\llap</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\rotate</span></span><span class="brx">[</span>rotation<span class="brx">=</span>320<span class="brx">]</span><span class="br">{</span><span class="cs"><span class="stylecs">\strut</span></span> 
Water buffalo<span class="br">}</span><span class="br">}</span> <span class="cs">\eTH</span>
     <span class="cs"><span class="documentcs">\bTH</span></span> 
<span class="cs"><span class="stylecs">\dontleavehmode</span></span><span class="cs">\kern</span>1.5em<span class="cs"><span class="systemcs">\llap</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\rotate</span></span><span class="brx">[</span>rotation<span class="brx">=</span>320<span class="brx">]</span><span class="br">{</span><span class="cs"><span class="stylecs">\strut</span></span> 
Mexican redknee tarantula<span class="br">}</span><span class="br">}</span> <span class="cs">\eTH</span>
     <span class="cs"><span class="documentcs">\bTH</span></span> 
<span class="cs"><span class="stylecs">\dontleavehmode</span></span><span class="cs">\kern</span>1.5em<span class="cs"><span class="systemcs">\llap</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\rotate</span></span><span class="brx">[</span>rotation<span class="brx">=</span>320<span class="brx">]</span><span class="br">{</span><span class="cs"><span class="stylecs">\strut</span></span> 
European turtle dove<span class="br">}</span><span class="br">}</span> <span class="cs">\eTH</span>
   <span class="cs">\eTR</span>
   <span class="cs"><span class="documentcs">\bTR</span></span><span class="brx">[</span>topframe<span class="brx">=</span>on,align<span class="brx">=</span>middle<span class="brx">]</span>
     <span class="cs"><span class="documentcs">\bTD</span></span> Amount of legs <span class="cs">\eTD</span>
     <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>width<span class="brx">=</span>3em<span class="brx">]</span> 4 <span class="cs">\eTD</span>
     <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>width<span class="brx">=</span>3em<span class="brx">]</span> 8 <span class="cs">\eTD</span>
     <span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">[</span>width<span class="brx">=</span>3em<span class="brx">]</span> 2 <span class="cs">\eTD</span>
   <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
     </li>
     <li class="rendering">
      <img height="196" src="../wikiteximage/6a58b10de3657855617a3a248494d717.webp" width="267">
     </li>
    </ul>
    <p>Breakdown:
</p>
    <ul>
     <li>
      <code>\dontleavehmode</code>
      says ConTeXt/TeX to stay in horizontal mode for the cell.
     </li>
     <li>
      <code>\kern1.5em</code>
      adds a non breakable space of 1.5em, adjust this to adjust the cell width.
     </li>
     <li>
      <code>\llap</code>
      says ConTeXt/TeX to assume for all content within a width of 0 and put the content to the left of the current position.
     </li>
     <li>
      <code>\rotate</code>
      do the actual rotation, see
      <a href="../Command/rotate.html" title="Command/rotate">
       Command/rotate
      </a>
      .
     </li>
     <li>
      <code>\strut</code>
      adds a vertical box of the maximal height text could have so all text is typeset to the correction position.
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="TABLEs_with_old_table_syntax">
      TABLEs with old table syntax
     </span>
    </h2>
    <p>From the mailing list in March 2009, by Wolfgang Schuster and Hans Hagen:
</p>
    <pre class="tex"><span class="cs">\def</span><span class="cs"><span class="documentcs">\startTABLE</span></span>
 <span class="br">{</span><span class="cs"><span class="systemcs">\dosingleempty</span></span><span class="cs">\dostartTABLE</span><span class="br">}</span>

<span class="cs">\def</span><span class="cs">\dostartTABLE</span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span><span class="comment">%</span>
 <span class="br">{</span><span class="cs">\bgroup</span>
  <span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span><span class="comment">%</span>
  <span class="cs">\let</span><span class="cs">\NC</span><span class="cs">\doTABLENC</span>
  <span class="cs">\let</span><span class="cs">\NR</span><span class="cs">\doTABLENR</span>
  <span class="cs">\let</span><span class="cs"><span class="documentcs">\bTR</span></span><span class="cs">\relax</span>
  <span class="cs">\let</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="cs">\relax</span>
  <span class="cs">\let</span><span class="cs"><span class="documentcs">\bTH</span></span><span class="cs">\relax</span>
  <span class="cs">\let</span><span class="cs"><span class="documentcs">\bTN</span></span><span class="cs">\relax</span><span class="br">}</span>

<span class="cs">\def</span><span class="cs"><span class="documentcs">\stopTABLE</span></span>
 <span class="br">{</span><span class="cs">\eTABLE</span>
  <span class="cs">\egroup</span><span class="br">}</span>

<span class="cs">\newconditional</span><span class="cs">\inTABLEnc</span>

<span class="cs">\unexpanded</span><span class="cs">\def</span><span class="cs">\doTABLENR</span>
 <span class="br">{</span><span class="cs">\eTR</span>
  <span class="cs">\setfalse</span><span class="cs">\inTABLEnc</span><span class="br">}</span>

<span class="cs">\unexpanded</span><span class="cs">\def</span><span class="cs">\doTABLENC</span>
 <span class="br">{</span><span class="cs">\futurelet</span><span class="cs">\next</span><span class="cs">\dodoTABLENC</span><span class="br">}</span>

<span class="cs">\def</span><span class="cs">\dodoTABLENC</span>
 <span class="br">{</span><span class="cs">\ifx</span><span class="cs">\next</span><span class="cs">\doTABLENR</span> <span class="cs">\else</span>
    <span class="cs">\expandafter</span><span class="cs">\dododoTABLENC</span>
  <span class="cs">\fi</span><span class="br">}</span>

<span class="cs">\long</span><span class="cs">\def</span><span class="cs">\dododoTABLENC</span><span class="brx">#</span>1<span class="cs">\NC</span>
<span class="br">{</span><span class="cs">\ifconditional</span><span class="cs">\inTABLEnc</span><span class="cs">\else</span><span class="cs">\settrue</span><span class="cs">\inTABLEnc</span><span class="cs">\parseTR</span><span class="brx">[</span><span class="brx">]</span><span class="brx">[</span><span class="brx">]</span><span class="cs">\fi</span>
 <span class="cs"><span class="systemcs">\dodoubleempty</span></span><span class="cs">\parseTD</span><span class="brx">#</span>1<span class="cs">\eTD</span><span class="cs">\NC</span><span class="br">}</span>
</pre>
    <p>This is now part of the core as the <a class="extiw" href="http://source.contextgarden.net/tabl-nte.tex" title="source:tabl-nte.tex">NTE module</a>. Quoting its internal documentation:
</p>
    <p>This module is suggested by Wolfgang Schuster who also prototyped it and came up with the rationale:
</p>
    <p>This module provides an easy way to use natural in a similiar way as the older table module (based on the <a class="new" href="../index.php?title=TABLE&action=edit&redlink=1" title="TABLE (page does not exist)">TABLE</a> macros) and the newer <a class="new" href="../index.php?title=tabulate&action=edit&redlink=1" title="tabulate (page does not exist)">tabulate</a> module.
</p>
    <p>You can see the advantage in the following table, once created with the new macros and once with the normal macros provided with the natural table module.
</p>
    <p>Let us start with the original macros:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\bTABLE</span></span>
  <span class="cs"><span class="documentcs">\bTR</span></span>
    <span class="cs"><span class="documentcs">\bTD</span></span> Text 1 <span class="cs">\eTD</span>
    <span class="cs"><span class="documentcs">\bTD</span></span> Text 2 <span class="cs">\eTD</span>
  <span class="cs">\eTR</span>
  <span class="cs"><span class="documentcs">\bTR</span></span>
    <span class="cs"><span class="documentcs">\bTD</span></span> Text 3 <span class="cs">\pasteeTD</span>
    <span class="cs"><span class="documentcs">\bTD</span></span> Text 4 <span class="cs">\eTD</span>
  <span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
</pre>
    <p>Watch how the new macros use less code:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\startTABLE</span></span>
<span class="cs">\NC</span> Text 1 <span class="cs">\NC</span> Text 2 <span class="cs">\NC</span><span class="cs">\NR</span>
<span class="cs">\NC</span> Text 3 <span class="cs">\NC</span> Text 4 <span class="cs">\NC</span><span class="cs">\NR</span>
<span class="cs"><span class="documentcs">\stopTABLE</span></span>
</pre>
    <p>The actual code differs from the prototype that it does not need to collect whole rows and parse them but looks ahead instead.
</p>
    <h2>
     <span id="Get_current_row/column_number">
     </span>
     <span class="mw-headline" id="Get_current_row.2Fcolumn_number">
      Get current row/column number
     </span>
    </h2>
    <p>See for example here: <a href="../Command/currentTABLErow.html" title="Command/currentTABLErow">Command/currentTABLErow</a>
tt&gt;\bTD
</p>
    <h2>
     <span class="mw-headline" id="An_alignment_issue">
      An alignment issue
     </span>
    </h2>
    <p>In some cases the alignment of cell contents may not behave as you might expect. Here is an illustrative example. The following code
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="systemcs">\define</span></span><span class="brx">[</span>3<span class="brx">]</span><span class="cs">\Glyphbox</span>
  <span class="br">{</span><span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>frame<span class="brx">=</span>on,align<span class="brx">=</span>middle<span class="brx">]</span><span class="cs">\bgroup</span>
     <span class="brx">#</span>1<span class="cs">\\</span>
     <span class="brx">#</span>2<span class="cs">\\</span>
     <span class="brx">#</span>3<span class="comment">%</span>
   <span class="cs">\egroup</span><span class="br">}</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>frame<span class="brx">=</span>on,align<span class="brx">=</span>middle<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\Glyphbox</span><span class="br">{</span>I<span class="br">}</span><span class="br">{</span>a<span class="br">}</span><span class="br">{</span>1<span class="br">}</span> <span class="cs">\eTD</span> 
     <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\Glyphbox</span><span class="br">{</span>I<span class="br">}</span><span class="br">{</span>a<span class="br">}</span><span class="br">{</span>1<span class="br">}</span> <span class="cs">\eTD</span> 
<span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\Glyphbox</span><span class="br">{</span>III<span class="br">}</span><span class="br">{</span>aaa<span class="br">}</span><span class="br">{</span>111<span class="br">}</span> <span class="cs">\eTD</span>
     <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\Glyphbox</span><span class="br">{</span>III<span class="br">}</span><span class="br">{</span>aaa<span class="br">}</span><span class="br">{</span>111<span class="br">}</span> <span class="cs">\eTD</span>
<span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
<span class="cs"><span class="documentcs">\stoptext</span></span> 
</pre>
      <p>gives us:
</p>
     </li>
     <li class="rendering">
      <img height="1240" src="../wikiteximage/3072758d6eb74cdb3fbcc2a6654fcc8d.webp" width="874">
     </li>
    </ul>
    <p>Note that in the first row the cells are not middle-aligned. As Wolfgang Schuster pointed out on the list, we need *two* things to fix this:
</p>
    <p>1. You need <tt>\dontleavehmode</tt> in front of the <tt>\framed</tt>.
</p>
    <p>2. You need <tt>\setupTABLE[start][..,..=..,..]</tt> because <tt>\bTABLE</tt> sets a default value for the align key which can&rsquo;t be overwritten with a simple <tt>\setupTABLE[..,..=..,..]</tt>.
</p>
    <p>
Implementing this </p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="systemcs">\define</span></span><span class="brx">[</span>3<span class="brx">]</span><span class="cs">\Glyphbox</span>
  <span class="br">{</span><span class="cs"><span class="stylecs">\dontleavehmode</span></span>
   <span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>frame<span class="brx">=</span>on,align<span class="brx">=</span>middle<span class="brx">]</span><span class="cs">\bgroup</span>
     <span class="brx">#</span>1<span class="cs">\\</span>
     <span class="brx">#</span>2<span class="cs">\\</span>
     <span class="brx">#</span>3<span class="comment">%</span>
   <span class="cs">\egroup</span><span class="br">}</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>start<span class="brx">]</span><span class="brx">[</span>frame<span class="brx">=</span>on,align<span class="brx">=</span>middle<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\Glyphbox</span><span class="br">{</span>I<span class="br">}</span><span class="br">{</span>a<span class="br">}</span><span class="br">{</span>1<span class="br">}</span> <span class="cs">\eTD</span> 
     <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\Glyphbox</span><span class="br">{</span>I<span class="br">}</span><span class="br">{</span>a<span class="br">}</span><span class="br">{</span>1<span class="br">}</span> <span class="cs">\eTD</span> 
<span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span> <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\Glyphbox</span><span class="br">{</span>III<span class="br">}</span><span class="br">{</span>aaa<span class="br">}</span><span class="br">{</span>111<span class="br">}</span> <span class="cs">\eTD</span>
     <span class="cs"><span class="documentcs">\bTD</span></span> <span class="cs">\Glyphbox</span><span class="br">{</span>III<span class="br">}</span><span class="br">{</span>aaa<span class="br">}</span><span class="br">{</span>111<span class="br">}</span> <span class="cs">\eTD</span>
<span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
<span class="cs"><span class="documentcs">\stoptext</span></span> 
</pre>
      <p>we now get the following correct output with centered cells in the first row:
</p>
     </li>
     <li class="rendering">
      <img height="1240" src="../wikiteximage/48bb40a2aca7b8b76aa9f37cd3f3dd37.webp" width="874">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Footnotes_in_TABLEs">
      Footnotes in TABLEs
     </span>
    </h2>
    <p>From this conversation on the mailing list<a class="external autonumber" href="https://mailman.ntg.nl/pipermail/ntg-context/2017/089097.html" rel="nofollow">[2]</a>. In order to get global footnotes printing after tables (without using the local footnotes trick):
</p>
    <pre class="tex">Text<span class="cs"><span class="documentcs">\footnote</span></span><span class="br">{</span>Normal Footnote<span class="br">}</span>
<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>split<span class="brx">=</span>repeat,align<span class="brx">=</span>normal<span class="brx">]</span>
<span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span> Something<span class="cs"><span class="stylecs">\postponenotes</span></span><span class="cs"><span class="documentcs">\footnote</span></span><span class="brx">[</span>x<span class="brx">]</span><span class="br">{</span>bla bla<span class="br">}</span><span class="cs">\eTD</span><span class="cs">\eTR</span>
<span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="documentcs">\bTD</span></span> Foo<span class="cs"><span class="documentcs">\note</span></span><span class="brx">[</span>x<span class="brx">]</span> <span class="cs">\eTD</span><span class="cs">\eTR</span>
<span class="cs">\eTABLE</span>
<span class="cs"><span class="stylecs">\flushnotes</span></span>
More Text<span class="cs"><span class="documentcs">\footnote</span></span><span class="br">{</span>Another Normal Footnote<span class="br">}</span>
</pre>
    <ul class="demo">
     <li class="rendering">
      <img height="1240" src="../wikiteximage/d4853cdbd959e44a5f8803309c5100fe.webp" width="874">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Settings_for_multiple_TABLEs_in_a_single_page">
      Settings for multiple TABLEs in a single page
     </span>
    </h2>
    <p>Please note that if you have multiple TABLEs in a single page, use the \start & \stop commands to ensure the locality of the attributes of each table. Else settings from one TABLE might have strange effects on the settings of another.
</p>
    <p>When you need a certain setup for multiple tables you can put all \setupTABLE commands in a setups-environment and load these settings at the start of the table, e.g.
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startsetups</span></span> <span class="brx">[</span>tablesettings<span class="brx">]</span>
    <span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>r<span class="brx">]</span> <span class="brx">[</span>1<span class="brx">]</span> <span class="brx">[</span>..,..<span class="brx">=</span>..,..<span class="brx">]</span>
    <span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>c<span class="brx">]</span> <span class="brx">[</span>2<span class="brx">]</span> <span class="brx">[</span>..,..<span class="brx">=</span>..,..<span class="brx">]</span>
<span class="cs"><span class="stylecs">\stopsetups</span></span>

<span class="cs"><span class="documentcs">\bTABLE</span></span><span class="brx">[</span>setups<span class="brx">=</span>tablesettings<span class="brx">]</span>
    ...
<span class="cs">\eTABLE</span>
</pre>
    <p>When you need individual settings for each table add \start before the setup-commands and \stop after the table, this keeps all setups local to the current table, e.g.
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\start</span></span>

<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>r<span class="brx">]</span> <span class="brx">[</span>1<span class="brx">]</span> <span class="brx">[</span>..,..<span class="brx">=</span>..,..<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span> <span class="brx">[</span>c<span class="brx">]</span> <span class="brx">[</span>2<span class="brx">]</span> <span class="brx">[</span>..,..<span class="brx">=</span>..,..<span class="brx">]</span>

<span class="cs"><span class="documentcs">\bTABLE</span></span>
    ...
<span class="cs">\eTABLE</span>

<span class="cs"><span class="documentcs">\stop</span></span>
</pre>
    <h2>
     <span id="Creating_tables_from_CSV_data_(Comma_Separated_Values)">
     </span>
     <span class="mw-headline" id="Creating_tables_from_CSV_data_.28Comma_Separated_Values.29">
      Creating tables from CSV data (Comma Separated Values)
     </span>
    </h2>
    <p><b>Beware, this is very old code</b>; while it might still work (untested), it makes more sense to do data processing with Lua.
</p>
    <p>See also <a href="Database_module.html" title="Tables/Database module">the database module</a>!
</p>
    <p>and <a class="external text" href="http://dl.contextgarden.net/myway/csv.pdf" rel="nofollow">Creating Tables using CSV (Comma-separated values)</a> by Mojca Miklavec
</p>
    <p>An interesting example of creating a table using comma separated values was posted to the <a class="external text" href="http://archive.contextgarden.net/message/20050923.193302.f2110c93.en.html" rel="nofollow">mailing list</a> in 2005 by <a href="../User:ChristopherCreutzig.html" title="User:ChristopherCreutzig">Christopher Creutzig</a>
</p>
    <p>The following macros take care of processing CSV data:
</p>
    <pre class="tex"><span class="comment">% Iterate over all the lines of text captured with \obeylines active</span>
<span class="comment">% command to call is first argument, is not called for empty lines</span>
<span class="cs">\bgroup</span>
<span class="cs">\obeylines</span>
<span class="cs">\gdef</span><span class="cs">\ProcessLines</span><span class="brx">#</span>1<span class="brx">#</span>2<span class="br">{</span><span class="cs">\doProcessLines</span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="brx">#</span>2^^M<span class="cs">\doProcessLines</span><span class="br">}</span><span class="comment">%</span>
<span class="cs">\gdef</span><span class="cs">\doProcessLines</span><span class="brx">#</span>1<span class="brx">#</span>2^^M<span class="brx">#</span>3<span class="cs">\doProcessLines</span><span class="br">{</span><span class="comment">%</span>
 <span class="cs"><span class="systemcs">\doifnotempty</span></span><span class="br">{</span><span class="brx">#</span>2<span class="br">}</span><span class="br">{</span><span class="brx">#</span>1<span class="br">{</span><span class="brx">#</span>2<span class="br">}</span><span class="br">}</span><span class="comment">%</span>
 <span class="cs"><span class="systemcs">\doifnotempty</span></span><span class="br">{</span><span class="brx">#</span>3<span class="br">}</span><span class="br">{</span><span class="cs">\doProcessLines</span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="brx">#</span>3<span class="cs">\doProcessLines</span><span class="br">}</span><span class="comment">%</span>
<span class="br">}</span><span class="comment">%</span>
<span class="cs">\egroup</span>

<span class="cs">\def</span><span class="cs">\startCSV</span><span class="br">{</span><span class="cs">\bgroup</span><span class="cs">\obeylines</span><span class="cs">\dostartCSV</span><span class="br">}</span>
</pre>
    <p>The next lines are an example of transforming the data into a natural table, but can be easily adapted to any type of the table or perhaps (mis)used in even more strange ways:
</p>
    <pre class="tex"><span class="cs">\def</span><span class="cs">\TBLentry</span><span class="brx">#</span>1<span class="br">{</span><span class="cs"><span class="documentcs">\bTD</span></span><span class="brx">#</span>1<span class="cs">\eTD</span><span class="br">}</span>
<span class="cs">\def</span><span class="cs">\TBLline</span><span class="brx">#</span>1<span class="br">{</span><span class="cs"><span class="documentcs">\bTR</span></span><span class="cs"><span class="systemcs">\processcommalist</span></span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span><span class="cs">\TBLentry</span><span class="br">}</span>

<span class="cs">\def</span><span class="cs">\dostartCSV</span><span class="brx">#</span>1<span class="cs">\stopCSV</span><span class="br">{</span><span class="comment">%</span>
  <span class="cs"><span class="documentcs">\bTABLE</span></span>
  <span class="cs">\ProcessLines</span><span class="cs">\TBLline</span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="comment">%</span>
  <span class="cs">\eTABLE</span>
  <span class="cs">\egroup</span>
<span class="br">}</span>
</pre>
    <p>The following lines will then finally result in a desired table:
</p>
    <pre class="tex"><span class="comment">% some additional settings for the table may be made as well</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>2<span class="brx">]</span><span class="brx">[</span>style<span class="brx">=</span><span class="cs">\tt</span><span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>c<span class="brx">]</span><span class="brx">[</span>3<span class="brx">]</span><span class="brx">[</span>align<span class="brx">=</span>middle<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupTABLE</span></span><span class="brx">[</span>r<span class="brx">]</span><span class="brx">[</span>1<span class="brx">]</span><span class="brx">[</span>style<span class="brx">=</span>bold<span class="brx">]</span> <span class="comment">% how to override the \tt in the second column?</span>

<span class="cs">\startCSV</span>
Name,Email,Accepted
<span class="cs"><span class="documentcs">\CONTEXT</span></span>,worth@trying.to,Yes
Hans,main@developer.of,Yes
Bug,get@rid.of,No
<span class="cs">\stopCSV</span>
</pre>
    <ul class="demo">
     <li class="rendering">
      <img height="48" src="../wikiteximage/6391246539a9001db35e2cbe542e334d.webp" width="626">
     </li>
    </ul>
    <p>Some remarks: the (tentative) code ignores the fact that
</p>
    <ul>
     <li>
      csv data may optionally be enclosed in "" quotes that have to be removed (to be done in \TBLentry)
     </li>
     <li>
      quoted strings may contain commas themselves (which means writing a custom version of \processcommalist instead).
     </li>
    </ul>
    <p>See also <tt><a class="new" href="../index.php?title=Command/processseparatedlist&action=edit&redlink=1.html" title="Command/processseparatedlist (page does not exist)">\processseparatedlist</a></tt>.
</p>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-10
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Tables/Natural_tables_with_TABLE">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
