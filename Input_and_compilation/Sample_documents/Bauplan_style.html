<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../../style.css" rel="stylesheet">
  <link href="../../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Input and compilation/Sample documents/Bauplan style&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Input_and_compilation/Sample_documents/Bauplan_style" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Input and compilation/Sample documents/Bauplan style
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=830&diff=38811">2025-01-10</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <p>&lt; <a href="../Sample_documents.html" title="Input and compilation/Sample documents">Sample documents</a>
</p>
    <p>A little environment to integrate your construction plans in a document.<br>
Example pdf: <a class="internal" href="../../images/8/8a/Carport.pdf" title="Carport.pdf">Carport.pdf</a><br>
This example is the result of the following ConTeXt code:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\environment</span></span> e-bauplan
<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs">\Plan</span><span class="brx">[</span>prefix<span class="brx">=</span>situ,ech<span class="brx">=</span>20000,mm<span class="brx">=</span>4150000,titre<span class="brx">=</span>Plan de situation,
  projet<span class="brx">=</span>Abri voiture,auteur<span class="brx">=</span>Peter M&uuml;nster<span class="brx">]</span>

<span class="cs">\Plan</span><span class="brx">[</span>ech<span class="brx">=</span>2000,mm<span class="brx">=</span>351000,titre<span class="brx">=</span>Plan de situation <span class="brx">(</span>d&eacute;tail<span class="brx">)</span><span class="brx">]</span>

<span class="cs">\Plan</span><span class="brx">[</span>prefix<span class="brx">=</span>masse,ech<span class="brx">=</span>500,mm<span class="brx">=</span>60800,titre<span class="brx">=</span>Plan de masse<span class="brx">]</span>

<span class="cs">\Plan</span><span class="brx">[</span>prefix<span class="brx">=</span>coupe,ech<span class="brx">=</span>100,mm<span class="brx">=</span>19620,titre<span class="brx">=</span>Coupe<span class="brx">]</span>

<span class="cs">\Plan</span><span class="brx">[</span>prefix<span class="brx">=</span>plan,ech<span class="brx">=</span>50,mm<span class="brx">=</span>10080,titre<span class="brx">=</span>Plan<span class="brx">]</span>

<span class="cs">\Plan</span><span class="brx">[</span>prefix<span class="brx">=</span>povray,ech<span class="brx">=</span>60,mm<span class="brx">=</span>15000,titre<span class="brx">=</span>Simulation <span class="brx">(</span>1<span class="brx">)</span><span class="brx">]</span>

<span class="cs">\Plan</span><span class="brx">[</span>prefix<span class="brx">=</span>photo,ech<span class="brx">=</span>100,mm<span class="brx">=</span>25000,titre<span class="brx">=</span>Photo <span class="brx">(</span>2<span class="brx">)</span><span class="brx">]</span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
    <p>And here the environment file:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\startenvironment</span></span> e-bauplan

<span class="comment">%% It's a French document:</span>
<span class="cs">\useregime</span><span class="brx">[</span>il9<span class="brx">]</span>
<span class="cs"><span class="stylecs">\enableregime</span></span><span class="brx">[</span>il9<span class="brx">]</span>
<span class="cs">\useencoding</span><span class="brx">[</span>ffr<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definehspace</span></span><span class="brx">[</span>fr<span class="brx">]</span><span class="brx">[</span>:<span class="brx">]</span><span class="brx">[</span>.16667em<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definehspace</span></span><span class="brx">[</span>fr<span class="brx">]</span><span class="brx">[</span>;<span class="brx">]</span><span class="brx">[</span>.16667em<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definehspace</span></span><span class="brx">[</span>fr<span class="brx">]</span><span class="brx">[</span>!<span class="brx">]</span><span class="brx">[</span>.16667em<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definehspace</span></span><span class="brx">[</span>fr<span class="brx">]</span><span class="brx">[</span>?<span class="brx">]</span><span class="brx">[</span>.16667em<span class="brx">]</span>
<span class="cs"><span class="stylecs">\mainlanguage</span></span><span class="brx">[</span>fr<span class="brx">]</span>

<span class="comment">%% We need a lot of space:</span>
<span class="cs"><span class="stylecs">\setuplayout</span></span><span class="brx">[</span>header<span class="brx">=</span>0pt,footer<span class="brx">=</span>0pt,backspace<span class="brx">=</span>2cm,width<span class="brx">=</span>middle,
  topspace<span class="brx">=</span>1cm,height<span class="brx">=</span>middle<span class="brx">]</span>

<span class="cs"><span class="stylecs">\setuppagenumbering</span></span><span class="brx">[</span>state<span class="brx">=</span>stop<span class="brx">]</span><span class="comment">% Doing it on our own.</span>

<span class="comment">%% Usage: \Plan[prefix=...,ech=...,mm=...,titre=...,projet=...,auteur=...]</span>
<span class="comment">%% prefix: the name of the file is "prefix-mm.{eps,pdf,jpg}"</span>
<span class="comment">%% ech: the scale </span>
<span class="comment">%% mm: the width of the image in mm</span>
<span class="comment">%% titre: the titel of the page</span>
<span class="comment">%% projet: the name of the project</span>
<span class="comment">%% auteur: the name of the author; as "projet" only neccessary for the 1. page</span>
<span class="cs">\newdimen</span><span class="cs">\Width</span> <span class="cs">\newdimen</span><span class="cs">\Height</span>
<span class="cs">\def</span><span class="cs">\Plan</span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span><span class="br">{</span><span class="comment">%</span>
  <span class="cs"><span class="systemcs">\getparameters</span></span><span class="brx">[</span>PL<span class="brx">]</span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span>
  <span class="cs">\Width</span><span class="brx">=</span><span class="cs">\the</span><span class="cs">\dimexpr</span><span class="brx">(</span><span class="cs">\the</span><span class="cs">\numexpr</span><span class="brx">(</span>20*<span class="cs">\PLmm</span>/<span class="cs">\PLech</span><span class="brx">)</span>mm/20<span class="brx">)</span>
  <span class="cs">\def</span><span class="cs">\myFig</span><span class="br">{</span><span class="cs"><span class="documentcs">\externalfigure</span></span><span class="brx">[</span><span class="cs">\PLprefix</span>-<span class="cs">\PLmm</span><span class="brx">]</span><span class="brx">[</span>width<span class="brx">=</span><span class="cs">\the</span><span class="cs">\Width</span><span class="brx">]</span><span class="br">}</span><span class="comment">%</span>
  <span class="cs">\setbox</span><span class="cs">\scratchbox</span><span class="cs">\hbox</span><span class="br">{</span><span class="cs">\myFig</span><span class="br">}</span><span class="cs">\Height</span><span class="brx">=</span><span class="cs">\ht</span><span class="cs">\scratchbox</span>
  <span class="cs">\ifdim</span><span class="cs">\Width</span>&gt;1.2<span class="cs">\Height</span>
    <span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A4,landscape,rotated<span class="brx">]</span><span class="brx">[</span>A4<span class="brx">]</span>
  <span class="cs">\else</span>
    <span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A4<span class="brx">]</span><span class="brx">[</span>A4<span class="brx">]</span>
  <span class="cs">\fi</span>
  <span class="cs"><span class="documentcs">\startstandardmakeup</span></span>
  <span class="cs"><span class="documentcs">\midaligned</span></span><span class="br">{</span><span class="cs">\myFig</span><span class="br">}</span><span class="cs">\vfil</span>
  <span class="br">{</span><span class="cs"><span class="documentcs">\tx</span></span> Projet: <span class="cs">\PLprojet</span>, Auteur: <span class="cs">\PLauteur</span>, Date: <span class="cs"><span class="documentcs">\currentdate</span></span><span class="br">}</span><span class="cs">\hfill</span>
  <span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>align<span class="brx">=</span>lohi,offset<span class="brx">=</span>2ex<span class="brx">]</span><span class="br">{</span><span class="br">{</span><span class="cs">\bfc</span><span class="cs">\PLtitre</span><span class="br">}</span><span class="cs"><span class="documentcs">\blank</span></span>
  &Eacute;chelle: 1/<span class="cs">\PLech</span><span class="cs"><span class="stylecs">\quad</span></span><span class="cs">\hfill</span><span class="brx">(</span><span class="cs">\currentpage</span>/<span class="cs">\lastpage</span><span class="brx">)</span><span class="br">}</span><span class="cs">\vskip</span>0pt plus -1fil
  <span class="cs"><span class="documentcs">\stopstandardmakeup</span></span><span class="br">}</span>
<span class="cs"><span class="documentcs">\stopenvironment</span></span>
</pre>
    <p>An up to date version of this module can be found at <a class="external free" href="http://pmrb.free.fr/work/OS/ConTeXt/" rel="nofollow">http://pmrb.free.fr/work/OS/ConTeXt/</a>
</p>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-13
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Input_and_compilation/Sample_documents/Bauplan_style">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
