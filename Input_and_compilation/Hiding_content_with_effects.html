<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../style.css" rel="stylesheet">
  <link href="../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Input and compilation/Hiding content with effects&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Input_and_compilation/Hiding_content_with_effects" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Input and compilation/Hiding content with effects
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=1010&diff=41326">2025-01-18</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <p>Probably for your <a href="../Document_layout_and_layers/Presentations.html" title="Document layout and layers/Presentations">slides</a>, probably for some <a href="../Document_layout_and_layers/Presentations/Animation.html" title="Document layout and layers/Presentations/Animation">Animation</a> or for whatever reason you may want it: you can hide some content from the document, while leaving exactly the same amount of space as that content would need if typeset in the usual way.
</p>
    <p><b>Beware</b>, this doesn&rsquo;t work in current (2018) MkIV. Have a look at <a href="PDF/PDF_viewer_layers.html" title="Input and compilation/PDF/PDF viewer layers">PDF viewer layers</a>, <a class="external text" href="https://source.contextgarden.net/tex/context/base/mkiv/attr-lay.mkiv" rel="nofollow">attr-lay.mkiv</a>.
</p>
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h2>
       Contents
      </h2>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#Overview">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         Overview
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-2">
       <a href="#The_plain_TeX_way">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         The plain TeX way
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-3">
       <a href="#Layer:_state.3Dtop">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         Layer: state=top
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-4">
       <a href="#Final_Remarks">
        <span class="tocnumber">
         4
        </span>
        <span class="toctext">
         Final Remarks
        </span>
       </a>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="Overview">
      Overview
     </span>
    </h2>
    <p>On the <a class="external text" href="http://archive.contextgarden.net/thread/20050707.223338.a9169811.html" rel="nofollow">mailing list</a> Hans suggested many different ways (astonishing easy to use) to hide the content in a PDF document. Sadly, most of them are viewer-dependent.
</p>
    <table class="wikitable">
     <tbody>
      <tr>
       <th>
        method
       </th>
       <th>
        properties
       </th>
      </tr>
      <tr valign="top">
       <td><pre class="tex"><span class="cs"><span class="stylecs">\defineeffect</span></span><span class="brx">[</span>my-secrets<span class="brx">]</span><span class="brx">[</span>layer<span class="brx">]</span><span class="brx">[</span>state<span class="brx">=</span>top<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starteffect</span></span><span class="brx">[</span>my-secrets<span class="brx">]</span>
My public secret.
<span class="cs"><span class="documentcs">\stopeffect</span></span>
</pre>
</td>
       <td>
<ul><li>makes (invisible) layer on top (JS-based)</li>
<li>completely hides everything</li>
<li>works with newer Adobe Acrobat/Viewer; in most other browsers the content is not hidden</li>
<li>I managed to freeze Acrobat 6.0 pro when trying to save the text</li></ul>
</td>
      </tr>
      <tr align="left" valign="top">
       <td><pre class="tex"><span class="cs"><span class="stylecs">\defineeffect</span></span><span class="brx">[</span>my-hesitations<span class="brx">]</span><span class="brx">[</span>layer<span class="brx">]</span><span class="brx">[</span>state<span class="brx">=</span>stop<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starteffect</span></span><span class="brx">[</span>my-hesitations<span class="brx">]</span>
To <span class="cs"><span class="documentcs">\ConTeXt</span></span>\ or not to <span class="protectedcs">\ConTeXt?</span>
<span class="cs"><span class="documentcs">\stopeffect</span></span>
<span class="cs"><span class="documentcs">\button</span></span><span class="br">{</span>Show   Decision<span class="br">}</span><span class="brx">[</span>VideLayer<span class="br">{</span>my-hesitations<span class="br">}</span><span class="brx">]</span>
<span class="cs"><span class="documentcs">\button</span></span><span class="br">{</span>Hide   Decision<span class="br">}</span><span class="brx">[</span>HideLayer<span class="br">{</span>my-hesitations<span class="br">}</span><span class="brx">]</span>
<span class="cs"><span class="documentcs">\button</span></span><span class="br">{</span>Toggle Decision<span class="br">}</span><span class="brx">[</span>ToggleLayer<span class="br">{</span>my-hesitations<span class="br">}</span><span class="brx">]</span>
</pre>
</td>
       <td>
<ul><li>makes (invisible) layer, which can be switched on and off (JS-based)</li>
<li>you can switch the content on and off</li>
<li>when hidden, it is completely hidden</li>
<li>works with newer Adobe Acrobat/Viewer; in most other browsers the content is not hidden</li>
<li>even some new Acrobat versions can't handle the buttons</li></ul>
</td>
      </tr>
      <tr align="left" valign="top">
       <td><pre class="tex"><span class="cs"><span class="documentcs">\starteffect</span></span><span class="brx">[</span>hidden<span class="brx">]</span> <span class="comment">% In MkIV</span>
My secret hidden for Adam's apple&nbsp;;<span class="brx">)</span>
<span class="cs"><span class="documentcs">\stopeffect</span></span>
</pre>
</td>
       <td>
<ul><li>makes transparent fonts</li>
<li>no JavaScript</li>
<li>pretty safe for different viewers</li>
<li>only text is hidden, but not images, rules, ...</li></ul>
</td>
      </tr>
      <tr align="left" valign="top">
       <td><a href="Hiding_content_with_effects#The_plain_TeX_way.html" title="Input and compilation/Hiding content with effects">the plain TeX way</a>
</td>
       <td>
<ul><li>puts a blank box instead of its content (letter)</li>
<li>absolutely no content in the document, not even hidden (only blank space)</li>
<li>only works for letters and whitespace, no macros, no figures, ...</li></ul>
</td>
      </tr>
     </tbody>
    </table>
    <h2>
     <span class="mw-headline" id="The_plain_TeX_way">
      The plain TeX way
     </span>
    </h2>
    <p>This example was adapted from the TeXBOOK. However, it can only handle usual text. Forget about macros, forget about graphics ...
</p>
    <p>I hope and still believe that it is possible to extend this macro to make it work in general case. This would also be a preferred solution as it doesn't depend on the viewer's JavaScript <i>in</i>capabilities.
</p>
    <pre class="tex"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
<span class="comment">% the portion of code adapted from the TeXBOOK, Excercise 11.5&nbsp;%</span>
<span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>

<span class="cs">\def</span><span class="cs">\dolist</span><span class="br">{</span><span class="cs">\afterassignment</span><span class="cs">\dodolist</span><span class="cs">\let</span><span class="cs">\next</span><span class="brx">=</span> <span class="br">}</span>
<span class="cs">\def</span><span class="cs">\dodolist</span><span class="br">{</span><span class="cs">\ifx</span><span class="cs">\next</span><span class="cs">\endlist</span><span class="cs">\let</span><span class="cs">\next</span><span class="cs">\relax</span>
  <span class="cs">\else</span> <span class="cs">\\</span><span class="cs">\let</span><span class="cs">\next</span><span class="cs">\dolist</span> <span class="cs">\fi</span>
<span class="cs">\next</span><span class="br">}</span>
<span class="cs">\def</span><span class="cs">\endlist</span><span class="br">{</span><span class="cs">\endlist</span><span class="br">}</span>

<span class="cs">\def</span><span class="cs">\\</span><span class="br">{</span><span class="cs">\if</span><span class="cs"><span class="stylecs">\space</span></span><span class="cs">\next</span>\ <span class="comment">% assume that \next is unexpandable</span>
<span class="cs">\else</span><span class="cs">\setbox</span>0<span class="brx">=</span><span class="cs">\hbox</span><span class="br">{</span><span class="cs">\next</span><span class="br">}</span><span class="cs">\setbox</span>1<span class="brx">=</span><span class="cs">\hbox</span><span class="br">{</span><span class="br">}</span><span class="comment">%</span>
  <span class="cs">\dp</span>1<span class="brx">=</span><span class="cs">\dp</span>0<span class="cs">\ht</span>1<span class="brx">=</span><span class="cs">\ht</span>0<span class="cs">\wd</span>1<span class="brx">=</span><span class="cs">\wd</span>0<span class="cs">\box</span>1<span class="cs">\fi</span><span class="br">}</span>

<span class="cs">\def</span><span class="cs">\demobox</span><span class="brx">#</span>1<span class="br">{</span><span class="br">{</span><span class="cs">\dolist</span><span class="brx">#</span>1<span class="cs">\endlist</span><span class="br">}</span><span class="br">}</span>

</pre>
    <ul class="demo">
     <li class="rendering">
      <img height="77" src="../wikiteximage/1ec084d909c14d3c16d3e01d4d6cd790.webp" width="627">
     </li>
    </ul>
    <h2>
     <span id="Layer:_state=top">
     </span>
     <span class="mw-headline" id="Layer:_state.3Dtop">
      Layer: state=top
     </span>
    </h2>
    <p>You can try something like:
</p>
    <pre class="tex"><span class="cs">\defineproperty</span><span class="brx">[</span>my-secrets<span class="brx">]</span><span class="brx">[</span>layer<span class="brx">]</span><span class="brx">[</span>state<span class="brx">=</span>top<span class="brx">]</span>

I don't tell this to everybody:
<span class="comment">%</span>
<span class="cs">\startproperty</span><span class="brx">[</span>my-secrets<span class="brx">]</span><span class="comment">%</span>
<span class="cs"><span class="documentcs">\quotation</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\ConTeXt</span></span>\ goes beyond the limits of imagination, that's why I love it!<span class="br">}</span>
<span class="cs">\stopproperty</span>
<span class="comment">%</span>
You'll understand that once you get to know it better.
</pre>
    <p>which results in
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="13" src="../wikiteximage/4fe10623974fc6d0c747704bbf063124.webp" width="55">
     </li>
    </ul>
    <p>This can be compared to the non-hidden version, which is:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="42" src="../wikiteximage/2a4b97c5c31aa2bbe66fc17e1ac59ee0.webp" width="629">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Final_Remarks">
      Final Remarks
     </span>
    </h2>
    <ul>
     <li>
      Just as a hint: don't ever think about hiding your secrets or solutions to the problems for your students this way. Readers with Adobe Acrobat Professional can select
      <i>
       Layers
      </i>
      on the left and switch the hidden layer on again. You have been warned.
     </li>
     <li>
      Kerning could cause miniscule differences in the exact placement of the (hidden) content.
     </li>
    </ul>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-14
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Input_and_compilation/Hiding_content_with_effects">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
