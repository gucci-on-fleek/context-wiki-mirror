<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../../style.css" rel="stylesheet">
  <link href="../../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Input and compilation/Executable scripts and auxiliary files/Speed&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Input_and_compilation/Executable_scripts_and_auxiliary_files/Speed" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Input and compilation/Executable scripts and auxiliary files/Speed
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=6403&diff=41748">2025-01-19</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <p>Tips and tricks to speed up ConTeXt.
</p>
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h3>
       Contents
      </h3>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#Fonts">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         Fonts
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-2">
       <a href="#Cache">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         Cache
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-3">
         <a href="#Graphic_Resources">
          <span class="tocnumber">
           2.1
          </span>
          <span class="toctext">
           Graphic Resources
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-4">
       <a href="#Command_Line_Options">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         Command Line Options
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-5">
         <a href="#Runs">
          <span class="tocnumber">
           3.1
          </span>
          <span class="toctext">
           Runs
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-6">
         <a href="#Console">
          <span class="tocnumber">
           3.2
          </span>
          <span class="toctext">
           Console
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-7">
         <a href="#Other">
          <span class="tocnumber">
           3.3
          </span>
          <span class="toctext">
           Other
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-8">
       <a href="#Computer_Resources">
        <span class="tocnumber">
         4
        </span>
        <span class="toctext">
         Computer Resources
        </span>
       </a>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="Fonts">
      Fonts
     </span>
    </h2>
    <p>Frozen fonts.
</p>
    <h2>
     <span class="mw-headline" id="Cache">
      Cache
     </span>
    </h2>
    <h3>
     <span class="mw-headline" id="Graphic_Resources">
      Graphic Resources
     </span>
    </h3>
    <p>To avoid converting images on the fly every time ConTeXt is run, one can cache the images converted to PDF. Subsequently cached PDFs are used. Loading PDF is always faster compared to using other formats.
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\externalfigure</span></span><span class="brx">[</span>cow.jpg<span class="brx">]</span>
               <span class="brx">[</span>width<span class="brx">=</span>40mm,
                cache<span class="brx">=</span>./cache,
                conversion<span class="brx">=</span>gray.pdf<span class="brx">]</span>
</pre>
    <h2>
     <span class="mw-headline" id="Command_Line_Options">
      Command Line Options
     </span>
    </h2>
    <p>They are mostly use on servers without human intervention, but can help on desktop, too. For the list of command line options use
</p>
    <pre class="tex">context --help
</pre>
    <h3>
     <span class="mw-headline" id="Runs">
      Runs
     </span>
    </h3>
    <p>ConTeXt finds itself how many runs are needed (up to 3) to make cross references right. There are occasions when one run is sufficient (development, partial processing). In that case one can use 
</p>
    <pre class="tex">context --once
</pre>
    <h3>
     <span class="mw-headline" id="Console">
      Console
     </span>
    </h3>
    <p>Console output can be slow. When you don't need it, use
</p>
    <pre class="tex">context --noconsole
</pre>
    <h3>
     <span class="mw-headline" id="Other">
      Other
     </span>
    </h3>
    <p>For production there are other useful options like
</p>
    <pre class="tex">context --nosynctex --...
</pre>
    <h2>
     <span class="mw-headline" id="Computer_Resources">
      Computer Resources
     </span>
    </h2>
    <p>While optimizing the code one can compare the statistics of the ConTeXt run.
</p>
    <p>Hans on the list (LMTX):
</p>
    <p>The current version of lmtx has some updated tracing of memory usage.
This is irrelevant for most users but some of you generat elarge an
complex files so ... (I'm talking about mf here).
</p>
    <p>There is a command line option
</p>
    <pre class="tex">   --usage
</pre>
    <p><br>
that will make a run report some more statistics. The info shown might
look somewhat cryptic but we basically have (per category)
</p>
    <ul>
     <li>
      max: the maximum allowed memory (for many categories we can make that larger, but I need proof that it's needed)
     </li>
    </ul>
    <ul>
     <li>
      min: this is how we start out
     </li>
    </ul>
    <ul>
     <li>
      stp: when more memory is needed, this is the step that we use to increase
     </li>
    </ul>
    <ul>
     <li>
      set: this is the value that context configures by default, often larger than min, and less than max
     </li>
    </ul>
    <ul>
     <li>
      mem: the memory usage (often in units)
     </li>
    </ul>
    <ul>
     <li>
      all: the real usage (multiplied by the unit)
     </li>
    </ul>
    <ul>
     <li>
      ini, ptr and top: are the startup values (when something is also stored in the format), the current usage and the max usage (all within the mentioned min-max range).
     </li>
    </ul>
    <p>The rest speaks for itself. Font usage reflects only the tex end, of
course there is plenty usage at the lua end. The language info .... I
might extend that with pattern and exception usage. Actually, tex memory
usage is not that large in luametatex.
</p>
    <p>When mem gets increased, there is a message. We can use that to
eventually determine the best values. Actually we might even lower some
initial values (not that it matters much, lua uses more).
</p>
    <p>Of course there is also
</p>
    <pre class="tex">   --timing
</pre>
    <p>but that one has been there from the start, although I did update it to
reflect the more detailed tracing. The graphics are the same as always:
red lines are usage, the blue line is the runtime.
</p>
    <p>In general, memory management has been improved: all categories are now
more dynamic, there is more checking for overflows, there is some
recovery slack in allocation, etc. I will play a bit more some of it,
for instance we might end up with more detailed configuration options,
in addition the the already new ones.
</p>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-12
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Input_and_compilation/Executable_scripts_and_auxiliary_files/Speed">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
