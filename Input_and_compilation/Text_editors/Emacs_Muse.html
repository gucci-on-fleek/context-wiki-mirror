<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../../style.css" rel="stylesheet">
  <link href="../../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Input and compilation/Text editors/Emacs Muse&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Input_and_compilation/Text_editors/Emacs_Muse" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Input and compilation/Text editors/Emacs Muse
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=2509&diff=38531">2025-01-09</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <p>Emacs Muse (also known as "Muse" or "Emacs-Muse") is an authoring and
publishing environment for Emacs.  It simplifies the process of writing
documents and publishing them to various output formats.
</p>
    <p>Muse is written in elisp (Emacs-lisp) so you must have emacs installed if
you are to benefit of Muse's editing capacities. Then Muse has to be also
present on your system (it is planned to be some day part of emacs, but
right now it isn't); please visit the Muse site [<a class="external autonumber" href="http://www.mwolson.org/projects/EmacsMuse.html" rel="nofollow">[1]</a>] for details.
</p>
    <p>It can be used to prepare, to some extent, ConTeXt documents. The greatest
benefit of using Muse are&nbsp;:
</p>
    <ul>
     <li>
      Editing content (raw text, mathematics, graphics) is done in a text editor with a very small amount of code.
     </li>
     <li>
      Muse will later take care of coding your content into the various outputs (or "styles") which you decide, including html, xml, texinfo, LaTeX, and ConTeXt.
     </li>
     <li>
      From the same source file, Muse can output with only one command all the styles you ask (when within a "project"). Have a look at the muse
     </li>
    </ul>
    <p>QuickStart and Manual to see how to do all this. 
</p>
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h2>
       Contents
      </h2>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#ConTeXt_styles">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         ConTeXt styles
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-2">
       <a href="#Muse_files">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         Muse files
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-3">
       <a href="#Math">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         Math
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-4">
       <a href="#Graphics">
        <span class="tocnumber">
         4
        </span>
        <span class="toctext">
         Graphics
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-5">
       <a href="#Presentations">
        <span class="tocnumber">
         5
        </span>
        <span class="toctext">
         Presentations
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-6">
       <a href="#Bibliography">
        <span class="tocnumber">
         6
        </span>
        <span class="toctext">
         Bibliography
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-7">
       <a href="#Publishing_your_file">
        <span class="tocnumber">
         7
        </span>
        <span class="toctext">
         Publishing your file
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-8">
       <a href="#Muse_customization">
        <span class="tocnumber">
         8
        </span>
        <span class="toctext">
         Muse customization
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-9">
         <a href="#Your_own_styles">
          <span class="tocnumber">
           8.1
          </span>
          <span class="toctext">
           Your own styles
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-10">
         <a href="#Exercise:_how_to_use_Thomas_A._Schmitz.27s_.22taspresent.22_presentation_module">
          <span class="tocnumber">
           8.2
          </span>
          <span class="toctext">
           Exercise: how to use Thomas A. Schmitz's "taspresent" presentation module
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-11">
       <a href="#For_those_who_won.27t_use_emacs_:-.28">
        <span class="tocnumber">
         9
        </span>
        <span class="toctext">
         For those who won't use emacs&nbsp;:-(
        </span>
       </a>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="ConTeXt_styles">
      ConTeXt styles
     </span>
    </h2>
    <p>For ConTeXt users, Muse has four predefined styles&nbsp;:
</p>
    <ul>
     <li>
      "context" outputs your muse file to a tex file, which of course you can further edit as such.
     </li>
    </ul>
    <ul>
     <li>
      "context-pdf" outputs your muse file to a pdf file, using context.
     </li>
    </ul>
    <ul>
     <li>
      "context-slides" outputs your muse file to a tex file into one of the official context presentation styles.
     </li>
    </ul>
    <ul>
     <li>
      "context-slides-pdf" outputs your muse file to a pdf file into one of the official context presentation styles.
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Muse_files">
      Muse files
     </span>
    </h2>
    <p>A muse file has typically ".muse" as extension, and when muse-mode is
loaded, emacs will recognize it as a muse file; you can load some
minor modes as well, such as AucTeX's math mode. At the top of your
muse file, you write "directives" (one by line) such as:
</p>
    <p><code>#author Myself</code>
</p>
    <p><code>#title MyTitle</code>
</p>
    <p><code>#bibsource MyBibtexFile</code> , etc.
</p>
    <p>Then your text, with markups such as&nbsp;:
</p>
    <p><code>* Sectiontitle</code> for a first-level title 
</p>
    <p><code>** Subsectiontitle</code> for a second-level title
</p>
    <p><code>*emphasized text*</code> for emphasizing, etc (read the nice manual)
</p>
    <h2>
     <span class="mw-headline" id="Math">
      Math
     </span>
    </h2>
    <p>To insert mathematic formulae, you make use of the &lt;math&gt; tag:
</p>
    <p><code>&lt;math&gt;\sqrt{2x}=y&lt;/math&gt;</code> becomes in your tex file:</p>
    <pre class="tex"> $<span class="cs"><span class="documentcs">\sqrt</span></span><span class="br">{</span>2x<span class="br">}</span><span class="brx">=</span>y$</pre>
    <p>If the &lt;math&gt; tag follows six or more spaces at the beginning at a line:
</p>
    <pre>     <code>&lt;math&gt;\sqrt{2x}=y&lt;/math&gt;</code> 
</pre>
    <p>it becomes in your tex file:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\startformula</span></span>
<span class="cs"><span class="documentcs">\sqrt</span></span><span class="br">{</span>2x<span class="br">}</span><span class="brx">=</span>y
<span class="cs"><span class="documentcs">\stopformula</span></span>
</pre>
    <h2>
     <span class="mw-headline" id="Graphics">
      Graphics
     </span>
    </h2>
    <p>Muse has ways to insert external graphics; you would typically write
something like this in the muse file&nbsp;:
</p>
    <p><code>[[graphic's file name][caption]]</code>; the graphic file has to be in the
present directory though.
</p>
    <p>It is also possible to write code for metafun or tikz graphics within
the muse file; it goes like that:
</p>
    <p><code>&lt;tikz&gt;tikz code&lt;/tikz&gt;</code>,
</p>
    <p>or
</p>
    <p><code>&lt;mpo&gt;metapost/metafun code&lt;/mpo&gt;</code>
</p>
    <p>If you publish to html in addition to context, the code will be
transformed into png graphics.
</p>
    <p><br>
However, these two graphics tags are not (yet?) part of the official
muse distribution; you would have to download the files on my site
<a class="external autonumber" href="http://jm.bornier.free.fr/muse/muse.html" rel="nofollow">[2]</a> and install them into your
muse directory (they do no harm&nbsp;:-)).
</p>
    <p>Of course you can write crude context code in a muse file, with the
help of the &lt;literal&gt; tag:
</p>
    <p><code>&lt;literal style="context"&gt;
Some context code
&lt;/literal&gt;</code>
This code will be interpreted only in context styles.
</p>
    <h2>
     <span class="mw-headline" id="Presentations">
      Presentations
     </span>
    </h2>
    <p>To prepare a context presentation write your muse file as usual, but
sections and subsections will appear differently in the output
</p>
    <p><code>* Sectiontitle</code> appears as </p>
    <pre class="tex"><span class="cs">\Topic</span><span class="br">{</span>Sectiontitle<span class="br">}</span></pre>
    <p>, and
<code>** Subsectiontitle</code> as </p>
    <pre class="tex"><span class="cs"><span class="documentcs">\page</span></span> <span class="br">{</span><span class="cs">\bf</span> Subsectiontitle<span class="br">}</span></pre>
    <p>You can choose the presentation style you want among the "official"
one (present in the base directory of your context distribution); the
default style is "pre-01"; but if at the top of the muse file (that
is, before your text begins) you write (e.g.):
</p>
    <p><code>#module pre-14</code>,
</p>
    <p>this muse "directive" tells muse to make use of presentation
style "pre-14" (remember the directive must be alone on its line).
</p>
    <h2>
     <span class="mw-headline" id="Bibliography">
      Bibliography
     </span>
    </h2>
    <p>Muse provides the <code>&lt;cite&gt;</code> tag to manage citations and insertion of
references into a biblography. The "bibsource" directive instructs
Muse which is the bibtex file to use; then inserting 
</p>
    <p><code>&lt;cite&gt;bibtex key&lt;/cite&gt;</code> 
</p>
    <p>will produce a citation of "authoryear" type, and insert
the cited document in the bibliography. It is possible also to obtain
"author" or "year" citations like this (respectively):
</p>
    <p><code>&lt;cite type="author"&gt;bibtex key&lt;/cite&gt;</code> 
</p>
    <p><code>&lt;cite type="year"&gt;bibtex key&lt;/cite&gt;</code>
</p>
    <h2>
     <span class="mw-headline" id="Publishing_your_file">
      Publishing your file
     </span>
    </h2>
    <p>When your muse file is prepared and saved, you can publish it with the command:
</p>
    <p><code>X-c X-t </code> 
</p>
    <p>Then type in emacs' modeline the style you want (e.g. <i>context</i>), and that's it!
</p>
    <h2>
     <span class="mw-headline" id="Muse_customization">
      Muse customization
     </span>
    </h2>
    <p>Many functions in emacs-muse are customizable, and for use of the context
styles some degree of customization will be highly useful (although not
strictly necessary). Let me recall that customization within emacs is
mostly done with the commands:
</p>
    <p><code> M-x customize-option RET &lt;option-name&gt; RET</code> , and 
</p>
    <p><code> M-x customize-group RET &lt;group-name&gt; RET</code> 
</p>
    <p>So you can start with "M-x customize-group RET muse-context RET" and see
what can be done, upon which I want to comment briefly; here are some 
options you will see then and might want to modify (less interesting ones
are left aside):
</p>
    <p><b>muse-context-pdf-program</b>: set by default to texexec --pdf; if you prefer
to use texexec --xetex or texexec --lua modify this variable accordingly.
</p>
    <p><b>muse-context-header</b>: this will be put at the top of the .tex file. It is
minimal, but ready for "interaction", "bibliography" and "tikz pictures". Add
and remove whatever you need here; the best way in my view is to prepare a
file "my-preamble.tex" where all your additions to the "header" would be
written, and just add the following to muse-context-header: 
\input "&lt;path-to my-preamble.tex&gt;". So you don't have to go back to
customization when you want to change something in your preamble, you just
modify my-preamble.tex.
</p>
    <p><b>muse-context-footer</b>: ready for bibliography (if any) at the end of your
document.
</p>
    <p><b>muse-context-markup-specials-document</b>: this option permits to define how
some character will be rendered in your tex file; it can be useful for
you, depending on your language, to make some customization. Writing
mostly in french, I customized &oelig; to be rendered as \oe, and &euro; as \euro,
for example. It also depends of how your keyboard and emacs are configured.
</p>
    <h3>
     <span class="mw-headline" id="Your_own_styles">
      Your own styles
     </span>
    </h3>
    <p>The list of avalaible styles can be easily extended to fit your own
needs, as Muse allows to define derived styles; you might for example
decide that muse files created in the ~/foo directory will have as
preamble a specific content you wrote as ~/foo/foo-preamble.tex.
</p>
    <p>You would then define a style context-foo and another context-foo-pdf,
using this code (to be put in an initialization file):
</p>
    <p><code> (muse-derive-style "context-foo" "context"</code> 
</p>
    <p>	<code> 	   :header "~/foo/foo-preamble.tex")</code> 
</p>
    <p><code> (muse-derive-style "context-foo-pdf" "context-pdf"</code> 
</p>
    <p>	<code> 	   :header "~/foo/foo-preamble.tex")</code> 
</p>
    <h3>
     <span id="Exercise:_how_to_use_Thomas_A._Schmitz's_&quot;taspresent&quot;_presentation_module">
     </span>
     <span class="mw-headline" id="Exercise:_how_to_use_Thomas_A._Schmitz.27s_.22taspresent.22_presentation_module">
      Exercise: how to use Thomas A. Schmitz's "taspresent" presentation module
     </span>
    </h3>
    <p>Thomas has recently offered a very useful module with several styles for presentations. I won't describe 
it here but I will just let you know how I use it with muse.
</p>
    <p>Some special code has to appear in the preamble, so I have to define a special variable for muse, 
which I call <code>muse-context-tas-header</code>:
</p>
    <pre> (defvar muse-context-tas-header
"\\usemodule[taspresent][style=&lt;lisp&gt;(if (string-equal (muse-publishing-directive \"style\") nil) \"blueframe\" 
(muse-publishing-directive \"style\"))&lt;/lisp&gt;,font=Pagella,size=17pt]
\\setvariables [taspresent]
              [author={&lt;lisp&gt;(muse-publishing-directive \"author\")&lt;/lisp&gt;},
               title={&lt;lisp&gt;(muse-publishing-directive \"title\")&lt;/lisp&gt;}]
\\starttext \n \\Maketitle \n \\page \n \\lecback \n"
)</pre>
    <p>You can see that the first line says to use the module with various options; in particular the default style 
is blueframe; the author and title are the ones written in the muse file. Then this "header" goes beyond the 
preamble as it includes the <code>\Maketitle</code> macro and what follows it (<code>\lecback</code>).
</p>
    <p>Another variable <code>muse-context-tas-markup-strings</code> is defined to take care of text structure 
(which is simple for presentations). In the taspresent module, you typically use <code>\Slidetitle{}</code> 
for a new slide; we want to use muse's first-level title, i.e. a star+space at the beginning of a line 
containing the title of the slide. For this I define a working variable:
</p>
    <pre>(defvar muse-context-tas-markup-strings
  (nconc 
   '((section      . "\\Slidetitle  {")
 muse-context-markup-regexps)))</pre>
    <p>Now we're ready to define two new styles, which are derived respectively from the context and context-pdf styles:
</p>
    <pre>(muse-derive-style "tas" "context"
		   :header 'muse-context-tas-header
                   :strings 'muse-context-tas-markup-strings)

(muse-derive-style "tas-pdf" "context-pdf"
		   :header  'muse-context-tas-header
                   :strings 'muse-context-tas-markup-strings
)</pre>
    <p>This code defines two muse styles, "tas" and "tas-pdf" (Thomas I hope you don't mind I use your initials!); 
as you easily guess, the former produces a tex file, while the latter produces the pdf output.
</p>
    <p>Of course this code has to be evaluated by emacs (either at its start if
it is written in the .emacs file, or after that using usual elisp
methods).
</p>
    <p>You may see here that this code defines a muse "style" directive, to
be used if you want to use another taspresent style than blueframe. To
do that, just write at the top of the muse file, after the title and
author directives, eg:
</p>
    <p><code>#style blackblue</code>
</p>
    <p>Of course you can modify various things, especially in the header; as for me I
add <code>\\usemodule[french]</code> in the first defvar, so the french module is loaded.
</p>
    <p>The only small problem I have is that if I want to use the <code>\PicHoriz</code> or 
<code>\PicVert</code> macros I have to manipulate tex code to change the background
(<code>\picback</code> is needed there to replace <code>\lecback</code>); which can de done 
in the muse file with the literal tag, or by editing the tex file.
</p>
    <p>But this is only a minor inconvenient compared to the advantages of preparing a presentation so easily!
</p>
    <h2>
     <span id="For_those_who_won't_use_emacs_:-(">
     </span>
     <span class="mw-headline" id="For_those_who_won.27t_use_emacs_:-.28">
      For those who won't use emacs&nbsp;:-(
     </span>
    </h2>
    <p>It is quite possible to use another editor to edit muse files, if
you're not a friend of emacs; you can when a file has been edited with
vim/kedit/scite, etc. issue a command asking emacs to publish the file
in batch mode, and you can use a script for that (or a makefile);
examples are given in the muse distribution.
</p>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-15
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Input_and_compilation/Text_editors/Emacs_Muse">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
