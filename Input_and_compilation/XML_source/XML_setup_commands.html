<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../../style.css" rel="stylesheet">
  <link href="../../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Input and compilation/XML source/XML setup commands&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Input_and_compilation/XML_source/XML_setup_commands" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Input and compilation/XML source/XML setup commands
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=6972&diff=39565">2025-01-12</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <table style="background-color:#ddddee;color:#000000;border:1px solid #606060;margin:1em 5% 1em 5%;">
     <tbody>
      <tr>
       <td style="padding:0.5em 0.5em;"><ul class="demo"><li class="rendering"><img height="48" src="../../wikiteximage/d8db8740e408c0191e8d08a98e7da5fa.webp" width="31"></li></ul><br>
</td>
       <td style="padding:0.5em 0.5em;"><b>TODO:</b> this page is WIP
<p>before being finished it will be a mess <i>(See: <a href="../../Category:ToDo.html" title="Category:ToDo">To-Do List</a>)</i>
</p>
</td>
      </tr>
     </tbody>
    </table>
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h3>
       Contents
      </h3>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#Introduction">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         Introduction
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-2">
       <a href="#Flushing_Text_and_Elements">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         Flushing Text and Elements
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-3">
         <a href="#.5Cxmlflush">
          <span class="tocnumber">
           2.1
          </span>
          <span class="toctext">
           \xmlflush
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-4">
         <a href="#.5Cxmlflushcontext">
          <span class="tocnumber">
           2.2
          </span>
          <span class="toctext">
           \xmlflushcontext
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-5">
         <a href="#.5Cxmlflushtext">
          <span class="tocnumber">
           2.3
          </span>
          <span class="toctext">
           \xmlflushtext
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-6">
         <a href="#.5Cxmlpure">
          <span class="tocnumber">
           2.4
          </span>
          <span class="toctext">
           \xmlpure
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-7">
       <a href="#Attributes">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         Attributes
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-8">
         <a href="#.5Cxmlatt">
          <span class="tocnumber">
           3.1
          </span>
          <span class="toctext">
           \xmlatt
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-9">
         <a href="#.5Cxmlrefatt">
          <span class="tocnumber">
           3.2
          </span>
          <span class="toctext">
           \xmlrefatt
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-10">
         <a href="#.5Cxmlattdef">
          <span class="tocnumber">
           3.3
          </span>
          <span class="toctext">
           \xmlattdef
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-11">
       <a href="#Verbatim_Text">
        <span class="tocnumber">
         4
        </span>
        <span class="toctext">
         Verbatim Text
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-12">
       <a href="#Conditionals">
        <span class="tocnumber">
         5
        </span>
        <span class="toctext">
         Conditionals
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-13">
         <a href="#.5Cxmldoif">
          <span class="tocnumber">
           5.1
          </span>
          <span class="toctext">
           \xmldoif
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-14">
         <a href="#.5Cxmldoiftext">
          <span class="tocnumber">
           5.2
          </span>
          <span class="toctext">
           \xmldoiftext
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-15">
         <a href="#.5Cxmldoifempty">
          <span class="tocnumber">
           5.3
          </span>
          <span class="toctext">
           \xmldoifempty
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-16">
           <a href="#.5Cxmldoifselfempty">
            <span class="tocnumber">
             5.3.1
            </span>
            <span class="toctext">
             \xmldoifselfempty
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2 tocsection-17">
         <a href="#.5Cxmldoifatt">
          <span class="tocnumber">
           5.4
          </span>
          <span class="toctext">
           \xmldoifatt
          </span>
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="Introduction">
      Introduction
     </span>
    </h2>
    <p>From the introductory explanation to <a href="../XML_source#Format.html" title="Input and compilation/XML source">XML formatting</a>, a more detailed description of the setup commands is required.
</p>
    <p>The setup commands help formatting as far as they provide the XML selections to be formatted with standard ConTeXt commands.
</p>
    <p>A very basic setup configuration would be:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:emphasis
  <span class="cs">\bgroup</span><span class="cs"><span class="documentcs">\em</span></span><span class="cs"><span class="stylecs">\xmltext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>.<span class="br">}</span><span class="cs">\egroup</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>The only XML setup command above is <tt><a class="new" href="../../index.php?title=Command/xmltext&action=edit&redlink=1.html" title="Command/xmltext (page does not exist)">\xmltext</a></tt>. Both <code>\em</code> and <code>\bgroup &hellip; \egroup</code> are standard ConTeXt commands.
</p>
    <p>This page describes only setup commands for XML in ConTeXt.
</p>
    <h2>
     <span class="mw-headline" id="Flushing_Text_and_Elements">
      Flushing Text and Elements
     </span>
    </h2>
    <h3>
     <span id="\xmlflush">
     </span>
     <span class="mw-headline" id=".5Cxmlflush">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmlflush&action=edit&redlink=1.html" title="Command/xmlflush (page does not exist)">
        \xmlflush
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a class="new" href="../../index.php?title=Command/xmlflush&action=edit&redlink=1.html" title="Command/xmlflush (page does not exist)">\xmlflush</a></tt> is the most basic setup command, since it includes all XML from the current node (text and children elements with their attributes).
</p>
    <p>Imagine the following XML sample:
</p>
    <pre class="xml"><span class="br">&lt;</span><span class="name">text</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">paragraph class="first"</span><span class="br">&gt;</span>
    <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span>This is the first sentence.<span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
    <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span>This is the second sentence.<span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">/paragraph</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">paragraph class="second"</span><span class="br">&gt;</span>
    <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span>This is the third sentence.<span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
    <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span>This is the fourth sentence.<span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">/paragraph</span><span class="br">&gt;</span>
<span class="br">&lt;</span><span class="name">/text</span><span class="br">&gt;</span>
</pre>
    <p>Given the following environment:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:sample
  <span class="cs"><span class="stylecs">\xmlsetsetup</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>*<span class="br">}</span><span class="br">{</span>xml:*<span class="br">}</span>
  <span class="cs"><span class="stylecs">\xmlsetsetup</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span>
    <span class="br">{</span>paragraph<span class="brx">[</span>@class<span class="brx">=</span>'second'<span class="brx">]</span><span class="br">}</span>
    <span class="br">{</span>xml:second:paragraph<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>

<span class="cs">\xmlregistersetup</span><span class="br">{</span>xml:sample<span class="br">}</span>

<span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:text
  <span class="cs"><span class="stylecs">\xmlflush</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>

<span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:paragraph
  <span class="cs"><span class="stylecs">\xmlflush</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>

<span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:sentence
  <span class="cs"><span class="stylecs">\xmlflush</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>

<span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:second:paragraph
   <span class="comment">% this is empty (no flush for children)</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>The result would be:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="142" src="../../wikiteximage/4ad52e7d1c44824d031294de4f6d8a9f.webp" width="652">
     </li>
    </ul>
    <p>You might wonder Why the third and fourth sentences are missing.
</p>
    <p>They are not typeset because the path for the second paragraph is missing a flushing that would reach the <code>&lt;sentence&gt;</code> elements that element contains.
</p>
    <p>Replacing the comment with <tt><a class="new" href="../../index.php?title=Command/xmlflush&action=edit&redlink=1.html" title="Command/xmlflush (page does not exist)">\xmlflush</a>{#1</tt>} would typeset the second paragraph.
</p>
    <h3>
     <span id="\xmlflushcontext">
     </span>
     <span class="mw-headline" id=".5Cxmlflushcontext">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmlflushcontext&action=edit&redlink=1.html" title="Command/xmlflushcontext (page does not exist)">
        \xmlflushcontext
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a class="new" href="../../index.php?title=Command/xmlflushcontext&action=edit&redlink=1.html" title="Command/xmlflushcontext (page does not exist)">\xmlflushcontext</a></tt> also flushes text and children elements, but it also interprets ConTeXt commands.
</p>
    <p>Sample code:
</p>
    <pre class="xml"><span class="br">&lt;</span><span class="name">text</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">paragraph</span><span class="br">&gt;</span>\ConTeXt\ is awesome.<span class="br">&lt;</span><span class="name">/paragraph</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">paragraph class="second"</span><span class="br">&gt;</span>\ConTeXt\ is also a command.<span class="br">&lt;</span><span class="name">/paragraph</span><span class="br">&gt;</span>
<span class="br">&lt;</span><span class="name">/text</span><span class="br">&gt;</span>
</pre>
    <p>Sample environment that shows the difference:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:text
  <span class="cs"><span class="stylecs">\xmlflush</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>

<span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:paragraph
  <span class="cs"><span class="documentcs">\startparagraph</span></span>
    <span class="cs"><span class="stylecs">\xmlflush</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span>
  <span class="cs"><span class="documentcs">\stopparagraph</span></span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>

<span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:second:paragraph
  <span class="cs"><span class="documentcs">\startparagraph</span></span>
    <span class="cs"><span class="stylecs">\xmlflushcontext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span>
  <span class="cs"><span class="documentcs">\stopparagraph</span></span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>Only the second paragraph has ConTeXt typeset following the command:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="155" src="../../wikiteximage/d80cbfbf75dd2795f09b84aa1ab1eb6d.webp" width="677">
     </li>
    </ul>
    <h3>
     <span id="\xmlflushtext">
     </span>
     <span class="mw-headline" id=".5Cxmlflushtext">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmlflushtext&action=edit&redlink=1.html" title="Command/xmlflushtext (page does not exist)">
        \xmlflushtext
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a class="new" href="../../index.php?title=Command/xmlflushtext&action=edit&redlink=1.html" title="Command/xmlflushtext (page does not exist)">\xmlflushtext</a></tt> flushes all text from the current node.
</p>
    <p>This includes 
</p>
    <p>Taking the sample code above and only replacing the <code>xml:text</code> setup command such as in:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:text
  <span class="cs"><span class="stylecs">\xmlflushtext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>This is the output:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="35" src="../../wikiteximage/40a495ee3ea61dce5670bc8f2d221719.webp" width="425">
     </li>
    </ul>
    <p>No ConTeXt command interpretation, as expected.
</p>
    <p>Also no paragraph, since <tt><a class="new" href="../../index.php?title=Command/xmlflushtext&action=edit&redlink=1.html" title="Command/xmlflushtext (page does not exist)">\xmlflushtext</a></tt> includes text from all children elements, but not the children themselves.
</p>
    <p>In that way, the setup commands <code>xml:paragraph</code> and <code>xml:second:paragraph</code> in the sample have nothing to deal with.
</p>
    <h3>
     <span id="\xmlpure">
     </span>
     <span class="mw-headline" id=".5Cxmlpure">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmlpure&action=edit&redlink=1.html" title="Command/xmlpure (page does not exist)">
        \xmlpure
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a class="new" href="../../index.php?title=Command/xmlpure&action=edit&redlink=1.html" title="Command/xmlpure (page does not exist)">\xmlpure</a></tt> is needed to pass pure text (without extra codes) to PDF comments or similar.
</p>
    <p>Here is the XML sample:
</p>
    <pre class="xml"><span class="br">&lt;</span><span class="name">text</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span>Code may be tricky.<span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">code</span><span class="br">&gt;</span>\ConTeXt\ code.<span class="br">&lt;</span><span class="name">/code</span><span class="br">&gt;</span>
<span class="br">&lt;</span><span class="name">/text</span><span class="br">&gt;</span>
</pre>
    <p>The relevant setup command that shows the difference:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:code
<span class="cs"><span class="stylecs">\xmlflushcontext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="cs">\par</span>
standard flushing<span class="cs"><span class="documentcs">\comment</span></span><span class="br">{</span><span class="cs"><span class="stylecs">\xmlflush</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">}</span><span class="cs">\\</span>
pure flushing<span class="cs"><span class="documentcs">\comment</span></span><span class="br">{</span><span class="cs"><span class="stylecs">\xmlpure</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>Being a PDF interactive feature, the result cannot be displayed on the wiki:<sup class="reference" id="cite_ref-1"><a href="#cite_note-1">[1]</a></sup>
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="279" src="../../wikiteximage/7801298a9267618aee5f6763162d0764.webp" width="488">
     </li>
    </ul>
    <p>Standard flushing (with <tt><a class="new" href="../../index.php?title=Command/xmlflush&action=edit&redlink=1.html" title="Command/xmlflush (page does not exist)">\xmlflush</a></tt>) gives the text from the PDF comment: <code>\Ux {5C}ConTeXt\Ux {5C} code.</code>
</p>
    <p>Pure flushing (with <tt><a class="new" href="../../index.php?title=Command/xmlpure&action=edit&redlink=1.html" title="Command/xmlpure (page does not exist)">\xmlpure</a></tt>) gives the text from that comment: <code>\ConTeXt\ code.</code>
</p>
    <p><tt><a class="new" href="../../index.php?title=Command/xmlpure&action=edit&redlink=1.html" title="Command/xmlpure (page does not exist)">\xmlpure</a></tt> accepts a path as an optional second argument.
</p>
    <p>This would make <tt><a class="new" href="../../index.php?title=Command/xmlpure&action=edit&redlink=1.html" title="Command/xmlpure (page does not exist)">\xmlpure</a>{#1</tt>} and <tt><a class="new" href="../../index.php?title=Command/xmlpure&action=edit&redlink=1.html" title="Command/xmlpure (page does not exist)">\xmlpure</a>{#1}{.</tt>} (or even <tt><a class="new" href="../../index.php?title=Command/xmlpure&action=edit&redlink=1.html" title="Command/xmlpure (page does not exist)">\xmlpure</a>{#1}{../code</tt>} in that sample) synonymous commands.
</p>
    <h2>
     <span class="mw-headline" id="Attributes">
      Attributes
     </span>
    </h2>
    <h3>
     <span id="\xmlatt">
     </span>
     <span class="mw-headline" id=".5Cxmlatt">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmlatt&action=edit&redlink=1.html" title="Command/xmlatt (page does not exist)">
        \xmlatt
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a class="new" href="../../index.php?title=Command/xmlatt&action=edit&redlink=1.html" title="Command/xmlatt (page does not exist)">\xmlatt</a></tt> gives the value of a given attribute.
</p>
    <p>A minimal sample:
</p>
    <pre class="xml"><span class="br">&lt;</span><span class="name">text</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">element class="single"</span><span class="br">&gt;</span>text<span class="br">&lt;</span><span class="name">/element</span><span class="br">&gt;</span>
<span class="br">&lt;</span><span class="name">/text</span><span class="br">&gt;</span>
</pre>
    <p>The setup to output the attribute value would read:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:element
  <span class="cs"><span class="stylecs">\xmlatt</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>class<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>So the output would read:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="89" src="../../wikiteximage/427e95b00ca02ad90e929f6975560d18.webp" width="204">
     </li>
    </ul>
    <h3>
     <span id="\xmlrefatt">
     </span>
     <span class="mw-headline" id=".5Cxmlrefatt">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmlrefatt&action=edit&redlink=1.html" title="Command/xmlrefatt (page does not exist)">
        \xmlrefatt
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a class="new" href="../../index.php?title=Command/xmlrefatt&action=edit&redlink=1.html" title="Command/xmlrefatt (page does not exist)">\xmlrefatt</a></tt> gives the value of an attribute, but it removes leading <code>#</code> from its value.
</p>
    <p>A minimal sample with destination:
</p>
    <pre class="xml"><span class="br">&lt;</span><span class="name">text</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">section id="section-1"</span><span class="br">&gt;</span>Section 1
    <span class="br">&lt;</span><span class="name">p</span><span class="br">&gt;</span>Irrelevant text.<span class="br">&lt;</span><span class="name">/p</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">/section</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">section id="section-2"</span><span class="br">&gt;</span>Section 2
    <span class="br">&lt;</span><span class="name">p</span><span class="br">&gt;</span>As said in <span class="br">&lt;</span><span class="name">a href="#section-1"</span><span class="br">&gt;</span>previous section<span class="br">&lt;</span><span class="name">/a</span><span class="br">&gt;</span>&hellip;<span class="br">&lt;</span><span class="name">/p</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">/section</span><span class="br">&gt;</span>
<span class="br">&lt;</span><span class="name">/text</span><span class="br">&gt;</span>
</pre>
    <p>The setup to read the output as a destination for a ConTeXt reference:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:a
  <span class="cs"><span class="documentcs">\in</span></span><span class="br">{</span>section<span class="br">}</span><span class="brx">[</span><span class="cs"><span class="stylecs">\xmlrefatt</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>href<span class="br">}</span><span class="brx">]</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>So the output would read (link interaction enabled to see the difference):
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="196" src="../../wikiteximage/5554fba5ff67c13ae7c37dd21f0468d2.webp" width="624">
     </li>
    </ul>
    <h3>
     <span id="\xmlattdef">
     </span>
     <span class="mw-headline" id=".5Cxmlattdef">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmlattdef&action=edit&redlink=1.html" title="Command/xmlattdef (page does not exist)">
        \xmlattdef
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a class="new" href="../../index.php?title=Command/xmlattdef&action=edit&redlink=1.html" title="Command/xmlattdef (page does not exist)">\xmlattdef</a></tt> gives the value of a given attribute or a text if the attribute doesn&rsquo;t exist.
</p>
    <p>Taking the first XML sample from <a href="#Attributes">Attributes</a>, the following setup will warn about the not available attribute:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:element
  <span class="cs"><span class="stylecs">\xmlattdef</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>id<span class="br">}</span><span class="br">{</span>no defined id attribute<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>This setup would output:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="82" src="../../wikiteximage/b664bad2f7b836cabe317b81878fb6b6.webp" width="540">
     </li>
    </ul>
    <p>There is no way to format the warning string (<code>no defined id attribute</code> in this case). <a href="#Conditionals">Conditionals</a> would be needed for that.
</p>
    <h2>
     <span class="mw-headline" id="Verbatim_Text">
      Verbatim Text
     </span>
    </h2>
    <p>There are four basic commands to get verbatim text: <tt><a class="new" href="../../index.php?title=Command/xmlverbatim&action=edit&redlink=1.html" title="Command/xmlverbatim (page does not exist)">\xmlverbatim</a></tt>, <tt><a class="new" href="../../index.php?title=Command/inlinexmlverbatim&action=edit&redlink=1.html" title="Command/inlinexmlverbatim (page does not exist)">\inlinexmlverbatim</a></tt>, <tt><a class="new" href="../../index.php?title=Command/xmlprettyprint&action=edit&redlink=1.html" title="Command/xmlprettyprint (page does not exist)">\xmlprettyprint</a></tt> and <tt><a class="new" href="../../index.php?title=Command/xmlinlineprettyprint&action=edit&redlink=1.html" title="Command/xmlinlineprettyprint (page does not exist)">\xmlinlineprettyprint</a></tt>.
</p>
    <p>The <code>inline</code> versions display inline code and the <code>pretty</code> versions highlight the displayed code.
</p>
    <p>All verbatim cannot specify paths (they are limited to the contents of the current element).
</p>
    <p>Let&rsquo;s take XML and enviroment samples from <a href="#.5Cxmlflush"><code>\xmlflush</code></a>.
</p>
    <p>Only the setup for <code>xml:text</code> is replaced with:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:text
  block: <span class="cs"><span class="stylecs">\xmlverbatim</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="cs"><span class="documentcs">\blank</span></span>
  inline: <span class="cs"><span class="stylecs">\xmlinlineverbatim</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="cs"><span class="documentcs">\blank</span></span>
  block: <span class="cs"><span class="stylecs">\xmlprettyprint</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>xml<span class="br">}</span><span class="cs"><span class="documentcs">\blank</span></span>
  inline: <span class="cs"><span class="stylecs">\xmlinlineprettyprint</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>xml<span class="br">}</span><span class="cs"><span class="documentcs">\blank</span></span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>The output would be:<sup class="reference" id="cite_ref-2"><a href="#cite_note-2">[2]</a></sup>
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="709" src="../../wikiteximage/007634e1037633b6f86b48f8636dd7a2.webp" width="689">
     </li>
    </ul>
    <p>Setups for <code>xml:paragraph</code> and <code>xml:sentence</code> haven&rsquo;t been removed.
</p>
    <p>But they don&rsquo;t have anything to deal with, as none of the verbatim commands flushes elements.
</p>
    <h2>
     <span class="mw-headline" id="Conditionals">
      Conditionals
     </span>
    </h2>
    <p>There are four basic XML conditional commands:
</p>
    <ol>
     <li>
      <tt>
       <a href="../../Command/xmldoif.html" title="Command/xmldoif">
        \xmldoif
       </a>
      </tt>
     </li>
     <li>
      <tt>
       <a class="new" href="../../index.php?title=Command/xmldoiftext&action=edit&redlink=1.html" title="Command/xmldoiftext (page does not exist)">
        \xmldoiftext
       </a>
      </tt>
     </li>
     <li>
      <tt>
       <a class="new" href="../../index.php?title=Command/xmldoifempty&action=edit&redlink=1.html" title="Command/xmldoifempty (page does not exist)">
        \xmldoifempty
       </a>
      </tt>
     </li>
     <li>
      <tt>
       <a href="../../Command/xmldoifatt.html" title="Command/xmldoifatt">
        \xmldoifatt
       </a>
      </tt>
     </li>
    </ol>
    <p>All four have the <code>ifnot</code> and <code>ifelse</code> variants. Only the main <code>if</code> commands are explained (and variants shown in results). 
</p>
    <h3>
     <span id="\xmldoif">
     </span>
     <span class="mw-headline" id=".5Cxmldoif">
      <tt>
       <a href="../../Command/xmldoif.html" title="Command/xmldoif">
        \xmldoif
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a href="../../Command/xmldoif.html" title="Command/xmldoif">\xmldoif</a></tt> checks if a given element exists (as defined by a path). It only requires that a path that can be selected.
</p>
    <p>Taking the XML sample from <a href="#.5Cxmlflush"><code>\xmlflush</code></a> and replacing the <code>xml:element</code> setup configuration with:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:text
  paragraph: <span class="cs"><span class="stylecs">\xmldoif</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>paragraph<span class="br">}</span><span class="br">{</span>exists<span class="br">}</span><span class="cs">\\</span>
  sentence: <span class="cs"><span class="stylecs">\xmldoifelse</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>paragraph/sentence<span class="br">}</span><span class="br">{</span>exists<span class="br">}</span><span class="br">{</span>not available<span class="br">}</span><span class="cs">\\</span>
  sentence: <span class="cs"><span class="stylecs">\xmldoifnot</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>/sentence<span class="br">}</span><span class="br">{</span>not available<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>This is the result from that configuration setup:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="202" src="../../wikiteximage/77cd128a08712ce1eb73bec2a7223a30.webp" width="541">
     </li>
    </ul>
    <p>Please, keep in mind the following considerations from this sample:
</p>
    <ol>
     <li>
      There is no flushing at all, only a requirement checking and consequent code when any defined criterion is met.
     </li>
     <li>
      <code>&lt;paragraph&gt;</code>
      is child (or direct descendant) from
      <code>&lt;text&gt;</code>
      , but
      <code>&lt;sentence&gt;</code>
      is only indirect descendant.
     </li>
     <li>
      The path selection
      <code>/sentence</code>
      was written as a child purposefully to get a negative conditional.
     </li>
     <li>
      It would be pointless to set
      <code>.</code>
      (the current node) as path. If the node has already been reached, the condition will always be true.
     </li>
    </ol>
    <h3>
     <span id="\xmldoiftext">
     </span>
     <span class="mw-headline" id=".5Cxmldoiftext">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmldoiftext&action=edit&redlink=1.html" title="Command/xmldoiftext (page does not exist)">
        \xmldoiftext
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a class="new" href="../../index.php?title=Command/xmldoiftext&action=edit&redlink=1.html" title="Command/xmldoiftext (page does not exist)">\xmldoiftext</a></tt> checks if a given element (as selected by a path) contains text.
</p>
    <p>Text is understood here as text content in XML element and not what gives width (such as in ConTeXt command <code>\doiftextelse{\hskip0pt}{text}{no text}</code>).
</p>
    <p>A very basic XML sample:
</p>
    <pre class="xml"><span class="br">&lt;</span><span class="name">text</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">paragraph</span><span class="br">&gt;</span>
    <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span>Just a sentence.<span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
    <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span> <span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
    <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span>#113826;<span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
    <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span><span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">/paragraph</span><span class="br">&gt;</span>
<span class="br">&lt;</span><span class="name">/text</span><span class="br">&gt;</span>
</pre>
    <p>These are the conditionals for the setup of <code>xml:text</code>:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:text
  paragraph: <span class="cs"><span class="stylecs">\xmldoiftext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>paragraph<span class="br">}</span><span class="br">{</span>text given<span class="br">}</span><span class="cs">\\</span>
  sentence: <span class="cs"><span class="stylecs">\xmldoifelsetext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="br">}</span><span class="br">{</span>text given<span class="br">}</span><span class="br">{</span>no text<span class="br">}</span><span class="cs">\\</span>
  first sentence: <span class="cs"><span class="stylecs">\xmldoifelsetext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="brx">[</span>position<span class="brx">(</span><span class="brx">)</span><span class="brx">=</span><span class="brx">=</span>1<span class="brx">]</span><span class="br">}</span><span class="br">{</span>text given<span class="br">}</span><span class="br">{</span>no text<span class="br">}</span><span class="cs">\\</span>
  sentence 2: <span class="cs"><span class="stylecs">\xmldoifelsetext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="brx">[</span>position<span class="brx">(</span><span class="brx">)</span><span class="brx">=</span><span class="brx">=</span>2<span class="brx">]</span><span class="br">}</span><span class="br">{</span>text given<span class="br">}</span><span class="br">{</span>no text<span class="br">}</span><span class="cs">\\</span>
  sentence 3: <span class="cs"><span class="stylecs">\xmldoifelsetext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="brx">[</span>position<span class="brx">(</span><span class="brx">)</span><span class="brx">=</span><span class="brx">=</span>3<span class="brx">]</span><span class="br">}</span><span class="br">{</span>text given<span class="br">}</span><span class="br">{</span>no text<span class="br">}</span><span class="cs">\\</span>
  last sentence: <span class="cs"><span class="stylecs">\xmldoifelsetext</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="brx">[</span>position<span class="brx">(</span><span class="brx">)</span><span class="brx">=</span><span class="brx">=</span>last<span class="brx">(</span><span class="brx">)</span><span class="brx">]</span><span class="br">}</span><span class="br">{</span>text given<span class="br">}</span><span class="br">{</span>no text<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>The results would be:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="382" src="../../wikiteximage/9776ed38a0a948a72e7334ffcf647e1c.webp" width="584">
     </li>
    </ul>
    <p>You have to keep in mind:
</p>
    <ol>
     <li>
      Spaces count as text for conditionals (no matter its width [
      <code>&amp;#113826;</code>
      is zero&ndash;width space]).
     </li>
     <li>
      If not specified, conditional is performed with the first match.
     </li>
     <li>
      Elements have text when their descendants have it.
     </li>
    </ol>
    <h3>
     <span id="\xmldoifempty">
     </span>
     <span class="mw-headline" id=".5Cxmldoifempty">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmldoifempty&action=edit&redlink=1.html" title="Command/xmldoifempty (page does not exist)">
        \xmldoifempty
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a class="new" href="../../index.php?title=Command/xmldoifempty&action=edit&redlink=1.html" title="Command/xmldoifempty (page does not exist)">\xmldoifempty</a></tt> gives the opposite results from <tt><a class="new" href="../../index.php?title=Command/xmldoiftext&action=edit&redlink=1.html" title="Command/xmldoiftext (page does not exist)">\xmldoiftext</a></tt>. 
</p>
    <p>Having the previous XML sample and replacing the setup for <code>xml:text</code> with:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\startxmlsetups</span></span> xml:text
  paragraph: <span class="cs"><span class="stylecs">\xmldoifelseempty</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>paragraph<span class="br">}</span><span class="br">{</span>empty<span class="br">}</span><span class="br">{</span>full<span class="br">}</span><span class="cs">\\</span>
  sentence: <span class="cs"><span class="stylecs">\xmldoifelseempty</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="br">}</span><span class="br">{</span>empty<span class="br">}</span><span class="br">{</span>full<span class="br">}</span><span class="cs">\\</span>
  first sentence: <span class="cs"><span class="stylecs">\xmldoifelseempty</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="brx">[</span>position<span class="brx">(</span><span class="brx">)</span><span class="brx">=</span><span class="brx">=</span>1<span class="brx">]</span><span class="br">}</span><span class="br">{</span>empty<span class="br">}</span><span class="br">{</span>full<span class="br">}</span><span class="cs">\\</span>
  sentence 2: <span class="cs"><span class="stylecs">\xmldoifelseempty</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="brx">[</span>position<span class="brx">(</span><span class="brx">)</span><span class="brx">=</span><span class="brx">=</span>2<span class="brx">]</span><span class="br">}</span><span class="br">{</span>empty<span class="br">}</span><span class="br">{</span>full<span class="br">}</span><span class="cs">\\</span>
  sentence 3: <span class="cs"><span class="stylecs">\xmldoifelseempty</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="brx">[</span>position<span class="brx">(</span><span class="brx">)</span><span class="brx">=</span><span class="brx">=</span>3<span class="brx">]</span><span class="br">}</span><span class="br">{</span>empty<span class="br">}</span><span class="br">{</span>full<span class="br">}</span><span class="cs">\\</span>
  last sentence: <span class="cs"><span class="stylecs">\xmldoifelseempty</span></span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="br">{</span>sentence<span class="brx">[</span>position<span class="brx">(</span><span class="brx">)</span><span class="brx">=</span><span class="brx">=</span>last<span class="brx">(</span><span class="brx">)</span><span class="brx">]</span><span class="br">}</span><span class="br">{</span>empty<span class="br">}</span><span class="br">{</span>full<span class="br">}</span>
<span class="cs"><span class="stylecs">\stopxmlsetups</span></span>
</pre>
    <p>Results are:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="394" src="../../wikiteximage/991d0a9b56d6e47a1faea2f48ab6d379.webp" width="494">
     </li>
    </ul>
    <h4>
     <span id="\xmldoifselfempty">
     </span>
     <span class="mw-headline" id=".5Cxmldoifselfempty">
      <tt>
       <a class="new" href="../../index.php?title=Command/xmldoifselfempty&action=edit&redlink=1.html" title="Command/xmldoifselfempty (page does not exist)">
        \xmldoifselfempty
       </a>
      </tt>
     </span>
    </h4>
    <p>There is a <code>self</code> version of <tt><a class="new" href="../../index.php?title=Command/xmldoifempty&action=edit&redlink=1.html" title="Command/xmldoifempty (page does not exist)">\xmldoifempty</a></tt>, named <tt><a class="new" href="../../index.php?title=Command/xmldoifselfempty&action=edit&redlink=1.html" title="Command/xmldoifselfempty (page does not exist)">\xmldoifselfempty</a></tt> (provided with <code>ifnot</code> and <code>ifelse</code> variants, as well).
</p>
    <p>It checks from emptiness in current node (no path selection). <tt><a class="new" href="../../index.php?title=Command/xmldoifselfempty&action=edit&redlink=1.html" title="Command/xmldoifselfempty (page does not exist)">\xmldoifselfempty</a>{#1}{empty</tt>} is the same as <tt><a class="new" href="../../index.php?title=Command/xmldoifempty&action=edit&redlink=1.html" title="Command/xmldoifempty (page does not exist)">\xmldoifempty</a>{#1}{.}{empty</tt>}.
</p>
    <p>It may be just me, but code readability is problematic <tt><a class="new" href="../../index.php?title=Command/xmldoifselfelseempty&action=edit&redlink=1.html" title="Command/xmldoifselfelseempty (page does not exist)">\xmldoifselfelseempty</a></tt> (instead of just <tt><a class="new" href="../../index.php?title=Command/xmldoifelseempty&action=edit&redlink=1.html" title="Command/xmldoifelseempty (page does not exist)">\xmldoifelseempty</a></tt>).
</p>
    <h3>
     <span id="\xmldoifatt">
     </span>
     <span class="mw-headline" id=".5Cxmldoifatt">
      <tt>
       <a href="../../Command/xmldoifatt.html" title="Command/xmldoifatt">
        \xmldoifatt
       </a>
      </tt>
     </span>
    </h3>
    <p><tt><a href="../../Command/xmldoifatt.html" title="Command/xmldoifatt">\xmldoifatt</a></tt>
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="202" src="../../wikiteximage/14738aeb6ba6b4b9c011491a54dc4e64.webp" width="681">
     </li>
    </ul>
    <div class="mw-references-wrap">
     <ol class="references">
      <li id="cite_note-1">
       <span class="mw-cite-backlink">
        <a href="#cite_ref-1">
         &uarr;
        </a>
       </span>
       <span class="reference-text">
        You need to compile the sources and inspect the PDF output.
The wiki only displays images taken from the PDF output.
        <pre class="xml">\setupinteraction[state=start]
\startbuffer[demo]
<span class="br">&lt;</span><span class="name">text</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">sentence</span><span class="br">&gt;</span>Code may be tricky.<span class="br">&lt;</span><span class="name">/sentence</span><span class="br">&gt;</span>
  <span class="br">&lt;</span><span class="name">code</span><span class="br">&gt;</span>\ConTeXt\ code.<span class="br">&lt;</span><span class="name">/code</span><span class="br">&gt;</span>
<span class="br">&lt;</span><span class="name">/text</span><span class="br">&gt;</span>
\stopbuffer

\startxmlsetups xml:sample
  \xmlsetsetup{#1}{*}{xml:*}
\stopxmlsetups

\xmlregistersetup{xml:sample}

\startxmlsetups xml:text
  \xmlflush{#1}
\stopxmlsetups

\startxmlsetups xml:sentence
  \startparagraph
    \xmlflush{#1}
  \stopparagraph
\stopxmlsetups

\startxmlsetups xml:code
\xmlflushcontext{#1}\par
standard flushing\comment{\xmlflush{#1}}\\
pure flushing\comment{\xmlpure{#1}}
\stopxmlsetups

\setupbodyfont[24pt]

\startTEXpage[offset=1ex]
\xmlprocessbuffer{main}{demo}{}
\stopTEXpage
</pre>
       </span>
      </li>
      <li id="cite_note-2">
       <span class="mw-cite-backlink">
        <a href="#cite_ref-2">
         &uarr;
        </a>
       </span>
       <span class="reference-text">
        <tt>
         <a class="new" href="../../index.php?title=Command/xmlinlineverbatim&action=edit&redlink=1.html" title="Command/xmlinlineverbatim (page does not exist)">
          \xmlinlineverbatim
         </a>
        </tt>
        seems to have a bug (in both the wiki and latest from 2024.06.14 09:18).
        <br>
        <tt>
         <a class="new" href="../../index.php?title=Command/xmlinlineprettyprint&action=edit&redlink=1.html" title="Command/xmlinlineprettyprint (page does not exist)">
          \xmlinlineprettyprint
         </a>
         {#1}{none
        </tt>
        } achieves the same result (no code highlighting).
       </span>
      </li>
     </ol>
    </div>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-14
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Input_and_compilation/XML_source/XML_setup_commands">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
