<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../style.css" rel="stylesheet">
  <link href="../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Mathematics/Stackers&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Mathematics/Stackers" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Mathematics/Stackers
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=5072&diff=39772">2025-01-12</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h3>
       Contents
      </h3>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#.5Cmathover.2C_.5Cmathunder_and_.5Cdefinemathstackers">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         \mathover, \mathunder and \definemathstackers
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-2">
       <a href="#Overbraces_and_underbraces">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         Overbraces and underbraces
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-3">
         <a href="#Adjusting_stackers">
          <span class="tocnumber">
           2.1
          </span>
          <span class="toctext">
           Adjusting stackers
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-4">
         <a href="#Interleaved_braces">
          <span class="tocnumber">
           2.2
          </span>
          <span class="toctext">
           Interleaved braces
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-5">
       <a href="#See_also">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         See also
        </span>
       </a>
      </li>
     </ul>
    </div>
    <h2>
     <span id="\mathover,_\mathunder_and_\definemathstackers">
     </span>
     <span class="mw-headline" id=".5Cmathover.2C_.5Cmathunder_and_.5Cdefinemathstackers">
      <tt>
       <a class="new" href="../index.php?title=Command/mathover&action=edit&redlink=1.html" title="Command/mathover (page does not exist)">
        \mathover
       </a>
      </tt>
      ,
      <tt>
       <a class="new" href="../index.php?title=Command/mathunder&action=edit&redlink=1.html" title="Command/mathunder (page does not exist)">
        \mathunder
       </a>
      </tt>
      and
      <tt>
       <a class="new" href="../index.php?title=Command/definemathstackers&action=edit&redlink=1.html" title="Command/definemathstackers (page does not exist)">
        \definemathstackers
       </a>
      </tt>
     </span>
    </h2>
    <p>ConTeXt has a nice structure called <code>mathstackers</code> in order to define new math commands in which some characters 
are stacked over another one. For more information refer to <a class="external text" href="https://source.contextgarden.net/tex/context/base/mkiv/math-stc.mkiv" rel="nofollow">math-stc.mkiv</a>.
</p>
    <p>The two command <code>\mathover[symbol]{}{</code>} and <code>\mathunder[symbol]{}{</code>} are built and can be used directly. 
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>frame<span class="brx">=</span>off<span class="brx">]</span><span class="br">{</span><span class="comment">%</span>
$<span class="cs"><span class="documentcs">\mathover</span></span><span class="brx">[</span>symbol<span class="brx">]</span><span class="br">{</span>"2217<span class="br">}</span><span class="br">{</span>A<span class="br">}</span>$,   <span class="comment">% 2217 is unicode for asterisk</span>
$<span class="cs"><span class="documentcs">\mathover</span></span><span class="brx">[</span>symbol<span class="brx">]</span><span class="br">{</span>"2218<span class="br">}</span><span class="br">{</span>A<span class="br">}</span>$,   <span class="comment">% 2218 is unicode for circle</span>
$<span class="cs"><span class="documentcs">\mathover</span></span><span class="brx">[</span>symbol<span class="brx">]</span><span class="br">{</span>"2219<span class="br">}</span><span class="br">{</span>A<span class="br">}</span>$,   <span class="comment">% 2219 is unicode for bullet</span>
$<span class="cs"><span class="documentcs">\mathunder</span></span><span class="brx">[</span>symbol<span class="brx">]</span><span class="br">{</span>"2217<span class="br">}</span><span class="br">{</span>A<span class="br">}</span>$,
$<span class="cs"><span class="documentcs">\mathunder</span></span><span class="brx">[</span>symbol<span class="brx">]</span><span class="br">{</span>"2218<span class="br">}</span><span class="br">{</span>A<span class="br">}</span>$,
$<span class="cs"><span class="documentcs">\mathunder</span></span><span class="brx">[</span>symbol<span class="brx">]</span><span class="br">{</span>"2219<span class="br">}</span><span class="br">{</span>A<span class="br">}</span>$.<span class="br">}</span>
</pre>
     </li>
     <li class="rendering">
      <img height="38" src="../wikiteximage/0444644991a6ca49fa2a27b73972a362.webp" width="137">
     </li>
    </ul>
    <p>However one may define one's own commands. A typical example is when you want to put a small circle on top of a letter (as one would when defining the topological interior of a set&hellip;). 
</p>
    <p>To do so, with <tt><a class="new" href="../index.php?title=Command/definemathstackers&action=edit&redlink=1.html" title="Command/definemathstackers (page does not exist)">\definemathstackers</a></tt> we define first a new stacker named here <code>MySymbol</code>.
</p>
    <p>Then, invoking that with <tt><a class="new" href="../index.php?title=Command/definemathover&action=edit&redlink=1.html" title="Command/definemathover (page does not exist)">\definemathover</a></tt> we define two new commands which can be used in math mode
</p>
    <ul>
     <li>
      <code>\interior</code>
     </li>
     <li>
      <code>\mystarred</code>
     </li>
    </ul>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A7,landscape<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definemathstackers</span></span><span class="brx">[</span>MySymbol<span class="brx">]</span>
  <span class="brx">[</span>voffset<span class="brx">=</span>-.3<span class="cs">\mathexheight</span>,
   hoffset<span class="brx">=</span><span class="cs">\zeropoint</span>,
   mathclass<span class="brx">=</span>ord,
   topoffset<span class="brx">=</span>.4<span class="cs">\mathemwidth</span>,      <span class="comment">% poor man's italic correction</span>
   middlecommand<span class="brx">=</span><span class="cs"><span class="documentcs">\mathematics</span></span><span class="brx">]</span>

<span class="cs"><span class="stylecs">\definemathover</span></span> <span class="brx">[</span>MySymbol<span class="brx">]</span> <span class="brx">[</span>interior<span class="brx">]</span>  <span class="brx">[</span>"2218<span class="brx">]</span> <span class="comment">% this a small circle</span>
<span class="cs"><span class="stylecs">\definemathover</span></span> <span class="brx">[</span>MySymbol<span class="brx">]</span> <span class="brx">[</span>mystarred<span class="brx">]</span> <span class="brx">[</span>"2217<span class="brx">]</span> <span class="comment">% this is an asterisk</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
Here is the new command <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs">\interior</span><span class="br">{</span>K<span class="br">}</span><span class="br">}</span>: $<span class="cs">\interior</span><span class="br">{</span>K<span class="br">}</span>$.

Compare this to <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs">\mathring</span><span class="br">{</span>K<span class="br">}</span><span class="br">}</span>: $<span class="cs">\mathring</span><span class="br">{</span>K<span class="br">}</span>$.

Here is the new command <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs">\mystarred</span><span class="br">{</span>K<span class="br">}</span><span class="br">}</span>: $<span class="cs">\mystarred</span><span class="br">{</span>K<span class="br">}</span>$.
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="438" src="../wikiteximage/eedee52ca0bf67ffb78cd967a6975969.webp" width="620">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Overbraces_and_underbraces">
      Overbraces and underbraces
     </span>
    </h2>
    <p>In math mode, you can put a brace over or under an expression this way:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\startformula</span></span>
a + <span class="cs"><span class="documentcs">\overbrace</span></span><span class="br">{</span>b + c<span class="br">}</span> + <span class="cs"><span class="documentcs">\underbrace</span></span><span class="br">{</span>d + e<span class="br">}</span> + <span class="cs"><span class="documentcs">\doublebrace</span></span><span class="br">{</span>f + g<span class="br">}</span> + h
<span class="cs"><span class="documentcs">\stopformula</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="49" src="../wikiteximage/ca10089ec18ffe01726ed3f4512605d9.webp" width="212">
     </li>
    </ul>
    <p>The same goes for brackets (or other stackers):
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\startformula</span></span>
a + <span class="cs"><span class="documentcs">\overbracket</span></span><span class="br">{</span>b + c<span class="br">}</span> + <span class="cs"><span class="documentcs">\underbracket</span></span><span class="br">{</span>d + e<span class="br">}</span> + <span class="cs"><span class="documentcs">\doublebracket</span></span><span class="br">{</span>f + g<span class="br">}</span> + h
<span class="cs"><span class="documentcs">\stopformula</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="47" src="../wikiteximage/c81add0371bbfab1a427312028061cf1.webp" width="212">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Adjusting_stackers">
      Adjusting stackers
     </span>
    </h3>
    <p>You can adjust where the stackers start and end with the <code>lt</code> (left-top), <code>rt</code> (right-top), <code>lb</code> (left-bottom) and <code>rb</code> (right-bottom) parameters.
This feature was introduced in beta 2019-10-28.
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex">$a + <span class="cs"><span class="documentcs">\overbrace</span></span>  <span class="brx">[</span>lt<span class="brx">=</span>1em<span class="brx">]</span>         <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
$a + <span class="cs"><span class="documentcs">\underbrace</span></span> <span class="brx">[</span>lt<span class="brx">=</span>1em<span class="brx">]</span>         <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
$a + <span class="cs"><span class="documentcs">\overbrace</span></span>  <span class="brx">[</span>rb<span class="brx">=</span>1em<span class="brx">]</span>         <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
$a + <span class="cs"><span class="documentcs">\underbrace</span></span> <span class="brx">[</span>rb<span class="brx">=</span>1em<span class="brx">]</span>         <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
$a + <span class="cs"><span class="documentcs">\overbrace</span></span>  <span class="brx">[</span>lt<span class="brx">=</span>1em,rb<span class="brx">=</span>1em<span class="brx">]</span>  <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
$a + <span class="cs"><span class="documentcs">\underbrace</span></span> <span class="brx">[</span>lt<span class="brx">=</span>1em,rb<span class="brx">=</span>1em<span class="brx">]</span>  <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="247" src="../wikiteximage/9c8a6c988aab3f3ea32a34125f2ab860.webp" width="124">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Interleaved_braces">
      Interleaved braces
     </span>
    </h3>
    <p>Some terms of an expressions can be shared by both braces, tuning the <code>lt</code>, <code>rt</code>, <code>lb</code> and <code>rb</code> parameters:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex">$a + <span class="cs"><span class="documentcs">\doublebrace</span></span><span class="brx">[</span>lt<span class="brx">=</span>1.4em,rt<span class="brx">=</span>-.3em<span class="brx">]</span>                   <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
$a + <span class="cs"><span class="documentcs">\doublebrace</span></span><span class="brx">[</span>rb<span class="brx">=</span>1em<span class="brx">]</span>                              <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
$a + <span class="cs"><span class="documentcs">\doublebrace</span></span><span class="brx">[</span>lt<span class="brx">=</span>1.4em,rt<span class="brx">=</span>-.3em,lb<span class="brx">=</span>-.3em,rb<span class="brx">=</span>1.5em<span class="brx">]</span> <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
$a + <span class="cs"><span class="documentcs">\doublebrace</span></span><span class="brx">[</span>lt<span class="brx">=</span>-1.6em,rb<span class="brx">=</span>-1.4em<span class="brx">]</span>                 <span class="br">{</span>b+c+d<span class="br">}</span> + e$<span class="cs"><span class="documentcs">\blank</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="189" src="../wikiteximage/2e5d720d22a803380f22e5a5fa2d9310.webp" width="124">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="See_also">
      See also
     </span>
    </h2>
    <ul>
     <li>
      Chapter "1. Math stackers" in the
      <a class="extiw" href="http://www.pragma-ade.nl/general/manuals/about.pdf" title="manual:about.pdf">
       About manual
      </a>
      .
     </li>
     <li>
      Section "1.8 Accents" in the
      <a class="extiw" href="http://www.pragma-ade.nl/general/manuals/still.pdf" title="manual:still.pdf">
       Still manual
      </a>
      .
     </li>
     <li>
      Section "10.6 Fancy fences" in the
      <a class="extiw" href="http://www.pragma-ade.nl/general/manuals/math-mkiv.pdf" title="manual:math-mkiv.pdf">
       Math-MkIV manual
      </a>
      .
     </li>
    </ul>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-10
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Mathematics/Stackers">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
