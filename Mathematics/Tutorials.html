<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../style.css" rel="stylesheet">
  <link href="../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Mathematics/Tutorials&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Mathematics/Tutorials" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Mathematics/Tutorials
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=741&diff=41709">2025-02-10</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h3>
       Contents
      </h3>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#Math_modes">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         Math modes
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-2">
         <a href="#Display_math_mode">
          <span class="tocnumber">
           1.1
          </span>
          <span class="toctext">
           Display math mode
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-3">
         <a href="#Inline_math_mode">
          <span class="tocnumber">
           1.2
          </span>
          <span class="toctext">
           Inline math mode
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-4">
       <a href="#Numbering_Formulae_.5Cstartformula">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         Numbering Formulae \startformula
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-5">
       <a href="#Referencing_formulae_.5Cin_and_.5Cat">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         Referencing formulae \in and \at
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-6">
       <a href="#Sub-Formulae_with_.5Cstartsubformulas_and_.5Cstartalign">
        <span class="tocnumber">
         4
        </span>
        <span class="toctext">
         Sub-Formulae with \startsubformulas and \startalign
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-7">
       <a href="#Combination_of_formulae_with_.5Cstartformulas">
        <span class="tocnumber">
         5
        </span>
        <span class="toctext">
         Combination of formulae with \startformulas
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-8">
       <a href="#List_of_Formulae_with_.5Cplacelist">
        <span class="tocnumber">
         6
        </span>
        <span class="toctext">
         List of Formulae with \placelist
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-9">
       <a href="#Formating_with_.5Csetupformulas">
        <span class="tocnumber">
         7
        </span>
        <span class="toctext">
         Formating with \setupformulas
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-10">
         <a href="#Format_of_numbers">
          <span class="tocnumber">
           7.1
          </span>
          <span class="toctext">
           Format of numbers
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-11">
         <a href="#Formula_alignment">
          <span class="tocnumber">
           7.2
          </span>
          <span class="toctext">
           Formula alignment
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-12">
         <a href="#Shaded_background_for_part_of_a_displayed_equation">
          <span class="tocnumber">
           7.3
          </span>
          <span class="toctext">
           Shaded background for part of a displayed equation
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-13">
       <a href="#Formatting_numbers_and_units">
        <span class="tocnumber">
         8
        </span>
        <span class="toctext">
         Formatting numbers and units
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-14">
       <a href="#Notes">
        <span class="tocnumber">
         9
        </span>
        <span class="toctext">
         Notes
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-15">
         <a href="#Evaluating_expressions_in_ConTeXt">
          <span class="tocnumber">
           9.1
          </span>
          <span class="toctext">
           Evaluating expressions in ConTeXt
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-16">
         <a href="#Note_to_Plain_TeX_Users">
          <span class="tocnumber">
           9.2
          </span>
          <span class="toctext">
           Note to Plain TeX Users
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-17">
         <a href="#Note_to_AMSTeX.2FLaTeX_Users">
          <span class="tocnumber">
           9.3
          </span>
          <span class="toctext">
           Note to AMSTeX/LaTeX Users
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-18">
         <a href="#Other_Methods">
          <span class="tocnumber">
           9.4
          </span>
          <span class="toctext">
           Other Methods
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-19">
         <a href="#To_do">
          <span class="tocnumber">
           9.5
          </span>
          <span class="toctext">
           To do
          </span>
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="Math_modes">
      Math modes
     </span>
    </h2>
    <p>TeX was designed for ease of typesetting books that contained mathematics. As ConTeXt is built on top of TeX, it inherits all those features. In addition to these, ConTeXt adds lot of macros to make the typesetting of mathematics easier.
</p>
    <p>There are <b>two</b> kinds of <b>math modes</b> --- <b>inline math and display math</b>. Mathematical expressions that are written with the running text are called inline math; while mathematical expressions that break the flow of the text (such as formulas or equations) are called display math. TeX takes care of proper spacing around expressions and provides macros to typeset most mathematical constructs.
Complicated expressions can be built by working in steps---break down the expression into sub-expressions, build the sub-expressions and then combine them to get the complicated expression.
</p>
    <p>The basics of typesetting math in ConTeXt is explained here.
</p>
    <h3>
     <span class="mw-headline" id="Display_math_mode">
      Display math mode
     </span>
    </h3>
    <p>Type <tt><a href="../Command/startformula.html" title="Command/startformula">\startformula</a></tt> to get display math mode, or <tt><a class="new" href="../index.php?title=Command/dm&action=edit&redlink=1.html" title="Command/dm (page does not exist)">\dm</a></tt> to get a inline typesetting but keeping display sizing and rules.
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex">Let's start with an interesting infinite series:
<span class="cs"><span class="documentcs">\startformula</span></span>
<span class="cs">\sum_</span><span class="br">{</span>n<span class="brx">=</span>1<span class="br">}</span>^<span class="br">{</span><span class="cs">\infty</span><span class="br">}</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span>1<span class="br">}</span><span class="br">{</span>n^2<span class="br">}</span> <span class="brx">=</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span><span class="cs">\pi</span>^2<span class="br">}</span><span class="br">{</span>6<span class="br">}</span>
<span class="cs"><span class="documentcs">\stopformula</span></span>

The same series shown in display style inline
<span class="cs">\dm</span><span class="br">{</span><span class="cs">\sum_</span><span class="br">{</span>n<span class="brx">=</span>1<span class="br">}</span>^<span class="br">{</span><span class="cs">\infty</span><span class="br">}</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span>1<span class="br">}</span><span class="br">{</span>n^2<span class="br">}</span> <span class="brx">=</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span><span class="cs">\pi</span>^2<span class="br">}</span><span class="br">{</span>6<span class="br">}</span><span class="br">}</span>
</pre>
     </li>
     <li class="rendering">
      <img height="139" src="../wikiteximage/d21e3e6e240a1afb5d5b5ef388f7c20e.webp" width="416">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Inline_math_mode">
      Inline math mode
     </span>
    </h3>
    <p>There are four equivalent commands to get inline math mode: <tt><a class="new" href="../index.php?title=Command/$&action=edit&redlink=1.html" title="Command/$ (page does not exist)">\$</a></tt>, <tt><a href="../Command/m.html" title="Command/m">\m</a></tt>, <tt><a href="../Command/math.html" title="Command/math">\math</a></tt>, <tt><a href="../Command/mathematics.html" title="Command/mathematics">\mathematics</a></tt> to get display inline math mode.
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\startlines</span></span>
The result is $<span class="cs">\sum_</span><span class="br">{</span>n<span class="brx">=</span>1<span class="br">}</span>^<span class="br">{</span><span class="cs">\infty</span><span class="br">}</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span>1<span class="br">}</span><span class="br">{</span>n^2<span class="br">}</span> <span class="brx">=</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span><span class="cs">\pi</span>^2<span class="br">}</span><span class="br">{</span>6<span class="br">}</span>$.
The result is <span class="cs"><span class="documentcs">\m</span></span><span class="br">{</span><span class="cs">\sum_</span><span class="br">{</span>n<span class="brx">=</span>1<span class="br">}</span>^<span class="br">{</span><span class="cs">\infty</span><span class="br">}</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span>1<span class="br">}</span><span class="br">{</span>n^2<span class="br">}</span> <span class="brx">=</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span><span class="cs">\pi</span>^2<span class="br">}</span><span class="br">{</span>6<span class="br">}</span><span class="br">}</span>.            
The result is <span class="cs"><span class="documentcs">\math</span></span><span class="br">{</span><span class="cs">\sum_</span><span class="br">{</span>n<span class="brx">=</span>1<span class="br">}</span>^<span class="br">{</span><span class="cs">\infty</span><span class="br">}</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span>1<span class="br">}</span><span class="br">{</span>n^2<span class="br">}</span> <span class="brx">=</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span><span class="cs">\pi</span>^2<span class="br">}</span><span class="br">{</span>6<span class="br">}</span><span class="br">}</span>.         
The result is <span class="cs"><span class="documentcs">\mathematics</span></span><span class="br">{</span><span class="cs">\sum_</span><span class="br">{</span>n<span class="brx">=</span>1<span class="br">}</span>^<span class="br">{</span><span class="cs">\infty</span><span class="br">}</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span>1<span class="br">}</span><span class="br">{</span>n^2<span class="br">}</span> <span class="brx">=</span> <span class="cs"><span class="documentcs">\frac</span></span><span class="br">{</span><span class="cs">\pi</span>^2<span class="br">}</span><span class="br">{</span>6<span class="br">}</span><span class="br">}</span>.
<span class="cs"><span class="documentcs">\stoplines</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="130" src="../wikiteximage/0edda73f4d9910ef94f14e3ceadc39c3.webp" width="200">
     </li>
    </ul>
    <p>
For examples <code>$x$</code> gives </p>
    <ul class="demo">
     <li class="rendering">
      <img height="10" src="../wikiteximage/4c109eeba05b8de21abcb5d9875fd81b.webp" width="12">
     </li>
    </ul>
    <p>
while <code>$2$</code> gives </p>
    <ul class="demo">
     <li class="rendering">
      <img height="14" src="../wikiteximage/9018b6f4ee7af2d184b96bab47184ebf.webp" width="10">
     </li>
    </ul>
    <p>Notice that the <i>x</i> is in italic while the <i>2</i> is upright. This is the usual mathematic convention.
</p>
    <h2>
     <span id="Numbering_Formulae_\startformula">
     </span>
     <span class="mw-headline" id="Numbering_Formulae_.5Cstartformula">
      Numbering Formulae
      <tt>
       <a href="../Command/startformula.html" title="Command/startformula">
        \startformula
       </a>
      </tt>
     </span>
    </h2>
    <p>ConTeXt provides an easy way to number the display maths equations. Simply, insert the <tt><a href="../Command/startformula.html" title="Command/startformula">\startformula</a></tt> in the <tt><a href="../Command/startplaceformula.html" title="Command/startplaceformula">\startplaceformula</a></tt> environment, and you will get numbered equations. 
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex">The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span> 
c^2 <span class="brx">=</span> a^2 + b^2 
<span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="70" src="../wikiteximage/9514eb8bb957693d0c857dbe6085b879.webp" width="309">
     </li>
    </ul>
    <p>The <tt><a href="../Command/startplaceformula.html" title="Command/startplaceformula">\startplaceformula</a></tt> command is optional, and produces the equation number; leaving it off produces an unnumbered equation.
</p>
    <h2>
     <span id="Referencing_formulae_\in_and_\at">
     </span>
     <span class="mw-headline" id="Referencing_formulae_.5Cin_and_.5Cat">
      Referencing formulae
      <tt>
       <a href="../Command/in.html" title="Command/in">
        \in
       </a>
      </tt>
      and
      <tt>
       <a href="../Command/at.html" title="Command/at">
        \at
       </a>
      </tt>
     </span>
    </h2>
    <p>Equations can be referred to by simply adding a label to <tt><a href="../Command/startplaceformula.html" title="Command/startplaceformula">\startplaceformula</a></tt> and using command for referencing&nbsp;:
</p>
    <ul>
     <li>
      <tt>
       <a href="../Command/ref.html" title="Command/ref">
        \ref
       </a>
      </tt>
      (note that it expects two arguments, therefore you need the brackets twice),
     </li>
     <li>
      <tt>
       <a href="../Command/in.html" title="Command/in">
        \in
       </a>
      </tt>
      (a kind of
      <tt>
       \ref[number][TheRef]
      </tt>
      ,
     </li>
     <li>
      <tt>
       <a href="../Command/at.html" title="Command/at">
        \at
       </a>
      </tt>
      (a kind of
      <tt>
       \ref[page][TheRef]
      </tt>
      .
     </li>
    </ul>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setupinteraction</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>
The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by

<span class="cs"><span class="documentcs">\startplaceformula</span></span><span class="brx">[</span>eq:myref<span class="brx">]</span>                  <span class="comment">%   &lt;===== here</span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

And now we can refer to its number by several ways,
<span class="cs"><span class="documentcs">\startitemize</span></span>
<span class="cs"><span class="documentcs">\item</span></span> with <span class="cs"><span class="documentcs">\tex</span></span><span class="br">{</span>in<span class="br">}</span>&nbsp;: formula <span class="cs"><span class="documentcs">\in</span></span><span class="brx">[</span>eq:myref<span class="brx">]</span> or <span class="cs"><span class="documentcs">\in</span></span><span class="br">{</span>formula<span class="br">}</span><span class="br">{</span><span class="br">}</span><span class="brx">[</span>eq:myref<span class="brx">]</span> 
<span class="cs"><span class="documentcs">\item</span></span> with <span class="cs"><span class="documentcs">\tex</span></span><span class="br">{</span>at<span class="br">}</span>&nbsp;: formula <span class="cs"><span class="documentcs">\in</span></span><span class="brx">[</span>eq:myref<span class="brx">]</span> <span class="cs"><span class="documentcs">\at</span></span><span class="br">{</span>page<span class="br">}</span><span class="brx">[</span>eq:myref<span class="brx">]</span>
<span class="cs"><span class="documentcs">\item</span></span> with <span class="cs"><span class="documentcs">\tex</span></span><span class="br">{</span>ref<span class="br">}</span>&nbsp;: formula <span class="cs"><span class="documentcs">\ref</span></span><span class="brx">[</span>number<span class="brx">]</span> <span class="brx">[</span>eq:myref<span class="brx">]</span> page <span class="cs"><span class="documentcs">\ref</span></span><span class="brx">[</span>number<span class="brx">]</span> <span class="brx">[</span>eq:myref<span class="brx">]</span>
<span class="cs"><span class="documentcs">\stopitemize</span></span>
</pre>
      <p>This, when typeset, produces the following:
</p>
     </li>
     <li class="rendering">
      <img height="211" src="../wikiteximage/10a2b8739799e952cbb6c23391305009.webp" width="388">
     </li>
    </ul>
    <p>By default, only the formula number appears as a reference. This can be changed by using <tt><a href="../Command/definereferenceformat.html" title="Command/definereferenceformat">\definereferenceformat</a></tt>. For example, to create a command <code>\eqref</code> which shows the formula number in brackets, use
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setupinteraction</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definereferenceformat</span></span><span class="brx">[</span>eqref<span class="brx">]</span><span class="brx">[</span>left<span class="brx">=</span><span class="brx">(</span>,right<span class="brx">=</span><span class="brx">)</span><span class="brx">]</span>

The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by
<span class="cs"><span class="documentcs">\startplaceformula</span></span><span class="brx">[</span>eq:myref<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

And now we can refer to its number by several ways,
<span class="cs"><span class="documentcs">\startitemize</span></span>
<span class="cs"><span class="documentcs">\item</span></span> with <span class="cs"><span class="documentcs">\tex</span></span><span class="br">{</span>in<span class="br">}</span>&nbsp;: formula <span class="cs"><span class="documentcs">\in</span></span><span class="brx">[</span>eq:myref<span class="brx">]</span> or <span class="cs"><span class="documentcs">\in</span></span><span class="br">{</span>formula<span class="br">}</span><span class="br">{</span><span class="br">}</span><span class="brx">[</span>eq:myref<span class="brx">]</span>,
<span class="cs"><span class="documentcs">\item</span></span> with <span class="cs"><span class="documentcs">\tex</span></span><span class="br">{</span>at<span class="br">}</span>&nbsp;: formula <span class="cs"><span class="documentcs">\in</span></span><span class="brx">[</span>eq:myref<span class="brx">]</span> <span class="cs"><span class="documentcs">\at</span></span><span class="br">{</span>page<span class="br">}</span><span class="brx">[</span>eq:myref<span class="brx">]</span>,
<span class="cs"><span class="documentcs">\item</span></span> with <span class="cs"><span class="documentcs">\tex</span></span><span class="br">{</span>ref<span class="br">}</span>&nbsp;: formula <span class="cs"><span class="documentcs">\ref</span></span><span class="brx">[</span>number<span class="brx">]</span> <span class="brx">[</span>eq:myref<span class="brx">]</span> page <span class="cs"><span class="documentcs">\ref</span></span><span class="brx">[</span>number<span class="brx">]</span> <span class="brx">[</span>eq:myref<span class="brx">]</span>,
<span class="cs"><span class="documentcs">\item</span></span> with <span class="cs"><span class="documentcs">\tex</span></span><span class="br">{</span>eqref<span class="br">}</span>&nbsp;: formula <span class="cs">\eqref</span><span class="brx">[</span>eq:myref<span class="brx">]</span>.
<span class="cs"><span class="documentcs">\stopitemize</span></span>
</pre>
      <p>This, when typeset, produces the following:
</p>
     </li>
     <li class="rendering">
      <img height="247" src="../wikiteximage/57cf98d33dfdc999fafdb1220eb6664b.webp" width="388">
     </li>
    </ul>
    <h2>
     <span id="Sub-Formulae_with_\startsubformulas_and_\startalign">
     </span>
     <span class="mw-headline" id="Sub-Formulae_with_.5Cstartsubformulas_and_.5Cstartalign">
      Sub-Formulae with
      <tt>
       <a href="../Command/startsubformulas.html" title="Command/startsubformulas">
        \startsubformulas
       </a>
      </tt>
      and
      <tt>
       <a class="mw-redirect" href="../Command/_startmathalignment.html" title="Command/startalign">
        \startalign
       </a>
      </tt>
     </span>
    </h2>
    <p>To use subformula numbering, you have to use <tt><a href="../Command/startsubformulas.html" title="Command/startsubformulas">\startsubformulas</a></tt>/<tt><a class="new" href="../index.php?title=Command/stopsubformulas&action=edit&redlink=1.html" title="Command/stopsubformulas (page does not exist)">\stopsubformulas</a></tt> and <tt><a class="mw-redirect" href="../Command/_startmathalignment.html" title="Command/startalign">\startalign</a></tt>. For example
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex">The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by

Examples:
<span class="cs"><span class="stylecs">\definereferenceformat</span></span><span class="brx">[</span>eqref<span class="brx">]</span><span class="brx">[</span>left<span class="brx">=</span><span class="brx">(</span>,right<span class="brx">=</span><span class="brx">)</span><span class="brx">]</span>

<span class="cs"><span class="documentcs">\startsubformulas</span></span><span class="brx">[</span>eq:total<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span>
<span class="cs"><span class="documentcs">\startalign</span></span>
<span class="cs">\NC</span> a^2 + b^2 <span class="cs">\NC</span> <span class="brx">=</span> c^2 <span class="cs">\NR</span><span class="brx">[</span>eq:first<span class="brx">]</span>
<span class="cs">\NC</span> a^2 + b^2 <span class="cs">\NC</span> <span class="brx">=</span> c^2 <span class="cs">\NR</span><span class="brx">[</span>eq:second<span class="brx">]</span>
<span class="cs"><span class="documentcs">\stopalign</span></span>
<span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopsubformulas</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

Formula <span class="cs">\eqref</span><span class="brx">[</span>eq:total<span class="brx">]</span> states the Pythagora's Theorem twice,
once in <span class="cs">\eqref</span><span class="brx">[</span>eq:first<span class="brx">]</span> and again in <span class="cs">\eqref</span><span class="brx">[</span>eq:second<span class="brx">]</span>.

You can compare without <span class="cs"><span class="documentcs">\tex</span></span><span class="br">{</span>startsubformulas<span class="br">}</span>:
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span>
<span class="cs"><span class="documentcs">\startalign</span></span>
<span class="cs">\NC</span> a^2 + b^2 <span class="cs">\NC</span> <span class="brx">=</span> c^2 <span class="cs">\NR</span><span class="brx">[</span>eq2:first<span class="brx">]</span>
<span class="cs">\NC</span> a^2 + b^2 <span class="cs">\NC</span> <span class="brx">=</span> c^2 <span class="cs">\NR</span><span class="brx">[</span>eq2:second<span class="brx">]</span>
<span class="cs"><span class="documentcs">\stopalign</span></span>
<span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

We now have references for <span class="cs">\eqref</span><span class="brx">[</span>eq2:first<span class="brx">]</span> and <span class="cs">\eqref</span><span class="brx">[</span>eq2:second<span class="brx">]</span>.
</pre>
      <p>This, when typeset, produces the following:
</p>
     </li>
     <li class="rendering">
      <img height="256" src="../wikiteximage/6676640c021deb1d6dea405823dee96f.webp" width="624">
     </li>
    </ul>
    <h2>
     <span id="Combination_of_formulae_with_\startformulas">
     </span>
     <span class="mw-headline" id="Combination_of_formulae_with_.5Cstartformulas">
      Combination of formulae with
      <tt>
       <a class="new" href="../index.php?title=Command/startformulas&action=edit&redlink=1.html" title="Command/startformulas (page does not exist)">
        \startformulas
       </a>
      </tt>
     </span>
    </h2>
    <p>To use subformula numbering, you have to use <tt><a href="../Command/startsubformulas.html" title="Command/startsubformulas">\startsubformulas</a></tt>/<tt><a class="new" href="../index.php?title=Command/stopsubformulas&action=edit&redlink=1.html" title="Command/stopsubformulas (page does not exist)">\stopsubformulas</a></tt> and <tt><a class="mw-redirect" href="../Command/_startmathalignment.html" title="Command/startalign">\startalign</a></tt>. For example
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\definereferenceformat</span></span><span class="brx">[</span>eqref<span class="brx">]</span><span class="brx">[</span>left<span class="brx">=</span><span class="brx">(</span>,right<span class="brx">=</span><span class="brx">)</span><span class="brx">]</span>

The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by
<span class="cs"><span class="documentcs">\startsubformulas</span></span><span class="brx">[</span>eq:total<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformulas</span></span>

<span class="cs"><span class="documentcs">\startformula</span></span>
<span class="cs"><span class="documentcs">\startalign</span></span>
<span class="cs">\NC</span> a^2 + b^2 <span class="cs">\NC</span> <span class="brx">=</span> c^2 <span class="cs">\NR</span><span class="brx">[</span>eq:first<span class="brx">]</span>
<span class="cs">\NC</span> a^2 + b^2 <span class="cs">\NC</span> <span class="brx">=</span> c^2 <span class="cs">\NR</span><span class="brx">[</span>eq:second<span class="brx">]</span>
<span class="cs"><span class="documentcs">\stopalign</span></span>
<span class="cs"><span class="documentcs">\stopformula</span></span>


<span class="cs"><span class="documentcs">\startformula</span></span>
<span class="cs"><span class="documentcs">\startalign</span></span>
<span class="cs">\NC</span> a^2 + b^2 <span class="cs">\NC</span> <span class="brx">=</span> c^2 <span class="cs">\NR</span><span class="brx">[</span>eq:third<span class="brx">]</span>
<span class="cs">\NC</span> a^2 + b^2 <span class="cs">\NC</span> <span class="brx">=</span> c^2 <span class="cs">\NR</span><span class="brx">[</span>eq:forth<span class="brx">]</span>
<span class="cs"><span class="documentcs">\stopalign</span></span>
<span class="cs"><span class="documentcs">\stopformula</span></span>

<span class="cs"><span class="documentcs">\stopformulas</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\stopsubformulas</span></span>

We now have references for <span class="cs">\eqref</span><span class="brx">[</span>eq:forth<span class="brx">]</span> for example.
</pre>
      <p>This, when typeset, produces the following:
</p>
     </li>
     <li class="rendering">
      <img height="147" src="../wikiteximage/a356ad8c784efe73ab7509b5a71a91f0.webp" width="624">
     </li>
    </ul>
    <h2>
     <span id="List_of_Formulae_with_\placelist">
     </span>
     <span class="mw-headline" id="List_of_Formulae_with_.5Cplacelist">
      List of Formulae with
      <tt>
       <a href="../Command/placelist.html" title="Command/placelist">
        \placelist
       </a>
      </tt>
     </span>
    </h2>
    <p>Since MKIV there are two types of formulas: numbered and named. Numbered formulas have the number as a reference and caption next to the formula and are listed only with the number and pagenumber in the list of formulas. Named formulas use the name as the caption instead of a number and are referenced with the name and pagenumber in the list of formulas.
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex">2 examples:

<span class="comment">% no reference        ==&gt; no entry in the list of formulas</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span> e<span class="brx">=</span>mc^2 <span class="cs"><span class="documentcs">\stopformula</span></span> 
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

<span class="comment">% a reference         ==&gt; entry in the list of formulas</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
  <span class="brx">[</span>reference<span class="brx">=</span>formula:mass1<span class="brx">]</span>              <span class="comment">%   &lt;====== here</span>
<span class="cs"><span class="documentcs">\startformula</span></span> e<span class="brx">=</span>mc^2 <span class="cs"><span class="documentcs">\stopformula</span></span> 
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

This is the list:

<span class="cs"><span class="documentcs">\placelist</span></span><span class="brx">[</span>formula<span class="brx">]</span><span class="brx">[</span>criterium<span class="brx">=</span>all,alternative<span class="brx">=</span>c<span class="brx">]</span>
</pre>
     </li>
     <li class="rendering">
      <img height="145" src="../wikiteximage/25b790840325d42b41c7ee486f3b1dcc.webp" width="624">
     </li>
    </ul>
    <p><tt><a href="../Command/startplaceformula.html" title="Command/startplaceformula">\startplaceformula</a></tt> comes with the following key options: bookmark, list, reference, suffix, title. The title option changes the formula to a named formula (no number).
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex">3 examples:

<span class="comment">% a reference + list  ==&gt; entry with number + additional text in the list</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
  <span class="brx">[</span>reference<span class="brx">=</span>formula:mass2,
   list<span class="brx">=</span><span class="br">{</span>Mass-energy equivalence from list option<span class="br">}</span><span class="brx">]</span>
<span class="cs"><span class="documentcs">\startformula</span></span> e<span class="brx">=</span>mc^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

<span class="comment">% a reference + title  ==&gt; entry with title text, no number</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
  <span class="brx">[</span>title<span class="brx">=</span><span class="br">{</span>Mass-energy equivalence<span class="br">}</span>,     <span class="comment">%   &lt;====== here</span>
   reference<span class="brx">=</span>formula:mass3<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startformula</span></span> e<span class="brx">=</span>mc^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

<span class="comment">% a reference + title + list ==&gt; entry with list text, no number</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
  <span class="brx">[</span>title<span class="brx">=</span><span class="br">{</span>Mass-energy equivalence<span class="br">}</span>,     <span class="comment">%   &lt;====== here</span>
   reference<span class="brx">=</span>formula:mass4,
   list<span class="brx">=</span><span class="br">{</span>Mass-energy equivalence from list option<span class="br">}</span><span class="brx">]</span>
<span class="cs"><span class="documentcs">\startformula</span></span> e<span class="brx">=</span>mc^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

This is the list:

<span class="cs"><span class="documentcs">\placelist</span></span><span class="brx">[</span>formula<span class="brx">]</span><span class="brx">[</span>criterium<span class="brx">=</span>all,alternative<span class="brx">=</span>c<span class="brx">]</span>
</pre>
     </li>
     <li class="rendering">
      <img height="220" src="../wikiteximage/1308500032cd5695ef5f22e59abfd282.webp" width="624">
     </li>
    </ul>
    <h2>
     <span id="Formating_with_\setupformulas">
     </span>
     <span class="mw-headline" id="Formating_with_.5Csetupformulas">
      Formating with
      <tt>
       <a class="mw-redirect" href="../Command/setupformulae.html" title="Command/setupformulas">
        \setupformulas
       </a>
      </tt>
     </span>
    </h2>
    <h3>
     <span class="mw-headline" id="Format_of_numbers">
      Format of numbers
     </span>
    </h3>
    <p>You can use <tt><a class="mw-redirect" href="../Command/setupformulae.html" title="Command/setupformulas">\setupformulas</a></tt> to change the format of numbers. For example to get bold numbers inside square brackets use
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex">The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by
<span class="cs"><span class="stylecs">\setupformulas</span></span>
  <span class="brx">[</span>left<span class="brx">=</span><span class="br">{</span><span class="brx">[</span><span class="br">}</span>,
   right<span class="brx">=</span><span class="br">{</span><span class="brx">]</span><span class="br">}</span>,
   numberstyle<span class="brx">=</span>bold<span class="brx">]</span>

<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
</pre>
      <p>This, when typeset, produces the following:
</p>
     </li>
     <li class="rendering">
      <img height="70" src="../wikiteximage/d9110c07df4d455a70260ebdf8fc2772.webp" width="309">
     </li>
    </ul>
    <p>To get equations also numbered by section, 
use the command <tt><a href="../Command/setupnumbering.html" title="Command/setupnumbering">\setupnumbering</a></tt> <code>\setupnumbering[way=bysection]</code> in the preamble of your document.
This means that the section number preceeds the formula number.
Add also <tt><a class="new" href="../index.php?title=Command/setupnumber&action=edit&redlink=1.html" title="Command/setupnumber (page does not exist)">\setupnumber</a></tt> <code>\setupnumber[formula][way=bysection]</code> to reset with each new section.
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex">The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by
<span class="cs"><span class="stylecs">\setupformulas</span></span>
  <span class="brx">[</span>left<span class="brx">=</span><span class="br">{</span><span class="brx">[</span><span class="br">}</span>,
   right<span class="brx">=</span><span class="br">{</span><span class="brx">]</span><span class="br">}</span>,
   numberstyle<span class="brx">=</span>bold<span class="brx">]</span>

<span class="cs">\setupnumbering</span>        <span class="brx">[</span>way<span class="brx">=</span>bysection<span class="brx">]</span> <span class="comment">% to add the section number to the formula number</span>
<span class="cs">\setupnumber</span> <span class="brx">[</span>formula<span class="brx">]</span> <span class="brx">[</span>way<span class="brx">=</span>bysection<span class="brx">]</span> <span class="comment">% to reset with each new section</span>

<span class="cs"><span class="documentcs">\startsection</span></span><span class="brx">[</span>title<span class="brx">=</span>First title<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\stopsection</span></span>

<span class="cs"><span class="documentcs">\startsection</span></span><span class="brx">[</span>title<span class="brx">=</span>Second title<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\stopsection</span></span>
</pre>
      <p>This, when typeset, produces the following:
</p>
     </li>
     <li class="rendering">
      <img height="216" src="../wikiteximage/8afab12d2c06561823a4d1008e85e71c.webp" width="624">
     </li>
    </ul>
    <p>To get alphabets instead of numbers, use again <tt><a class="mw-redirect" href="../Command/setupformulae.html" title="Command/setupformulas">\setupformulas</a></tt>
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex">The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by
<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>numberconversion<span class="brx">=</span>Character<span class="brx">]</span>

<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>

<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>numberconversion<span class="brx">=</span>character<span class="brx">]</span>

<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
</pre>
      <p>This, when typeset, produces the following:
</p>
     </li>
     <li class="rendering">
      <img height="107" src="../wikiteximage/5d6a9b97e46c1b4e8f9edb075970fda2.webp" width="309">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Formula_alignment">
      Formula alignment
     </span>
    </h3>
    <p>Normally a formula is centered, but in case you want to align it left or right, you can set up formulas to behave
that way. Normally a formula will adapt its left indentation to the environment:
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
This is a bit of text for purpose of example.
<span class="cs"><span class="documentcs">\startitemize</span></span>
<span class="cs"><span class="documentcs">\item</span></span> This is some other example text.
      <span class="cs"><span class="documentcs">\startplaceformula</span></span> <span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span> <span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\item</span></span> This is yet other example text.
<span class="cs"><span class="documentcs">\stopitemize</span></span>
This is a bit more text for other purpose of example.
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/e527b45e4dc6b99d0766e10c6802b906.webp" width="438">
     </li>
    </ul>
    <p><br>
In the next examples we explicitly align formulas with <tt><a class="mw-redirect" href="../Command/setupformulae.html" title="Command/setupformulas">\setupformulas</a></tt>, to the left (<code>raggedleft</code>), center (<code>middle</code>, and right (<code>raggedright</code>):
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>left<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>middle<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>right<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/0b9889741af74a8ac8b905358c9e81c9.webp" width="438">
     </li>
    </ul>
    <p>With formula numbers the code is:
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>flushleft<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span>
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span> 

<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>middle<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span> 
<span class="cs"><span class="documentcs">\stopplaceformula</span></span> 

<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>flushright<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span> 
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/c2f8ceee6d5f10af7afd532ac861bb10.webp" width="438">
     </li>
    </ul>
    <p>When tracing is turned on (<tt><a class="new" href="../index.php?title=Command/showboxes&action=edit&redlink=1.html" title="Command/showboxes (page does not exist)">\showboxes</a></tt>) you can visualize the bounding box of the formula,
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by
<span class="cs"><span class="documentcs">\showboxes</span></span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span>
c^2 <span class="brx">=</span> a^2 + b^2
<span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/db24416c70290c1317eb94834b2595cf.webp" width="438">
     </li>
    </ul>
    <p>As you can see, the dimensions are the natural ones, but if needed you can force a normalized line:
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by
<span class="cs"><span class="documentcs">\showboxes</span></span>
<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>middle,strut<span class="brx">=</span>yes<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span>
c^2 <span class="brx">=</span> a^2 + b^2
<span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
      <p>This time we get a more spacy result. [Ed. Note: For this example equation, there appears to be no visible change.]
</p>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/0760a87388170ca862b868339f5bc3f5.webp" width="438">
     </li>
    </ul>
    <p>You can influence the placement of the whole box with the parameters <tt>leftmargin</tt> and <tt>rightmargin</tt>.
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
The famous result <span class="brx">(</span>once more<span class="brx">)</span> is given by
<span class="cs"><span class="documentcs">\showboxes</span></span>
<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>right,leftmargin<span class="brx">=</span>1em<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span> 

<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>right,leftmargin<span class="brx">=</span>3em<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span> 

<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>left,rightmargin<span class="brx">=</span>1em<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span> 
</pre>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/209889966c384fca0d90f2fffc14b660.webp" width="438">
     </li>
    </ul>
    <p>You can also inherit the margin from the environment.
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
Some example text, again, to show where the right and left margins of the text block are.
<span class="cs"><span class="documentcs">\showboxes</span></span>

<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>right<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span> 

<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>right,margin<span class="brx">=</span>standard<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span> 
</pre>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/9b8451472dac6a8624909e212b879c6a.webp" width="438">
     </li>
    </ul>
    <p>The distance between the formula and the number is only applied when the formula is left or right aligned.
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
Some example text, again, to show where the right and left margins of the text block are.
<span class="cs"><span class="documentcs">\showboxes</span></span>
<span class="cs"><span class="stylecs">\setupformulas</span></span><span class="brx">[</span>align<span class="brx">=</span>left,distance<span class="brx">=</span>2em<span class="brx">]</span>
<span class="cs"><span class="documentcs">\startplaceformula</span></span> 
<span class="cs"><span class="documentcs">\startformula</span></span> c^2 <span class="brx">=</span> a^2 + b^2 <span class="cs"><span class="documentcs">\stopformula</span></span>
<span class="cs"><span class="documentcs">\stopplaceformula</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span> 
</pre>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/7993c1cd2f65860bc5590e10192faeb9.webp" width="438">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Shaded_background_for_part_of_a_displayed_equation">
      Shaded background for part of a displayed equation
     </span>
    </h3>
    <p>(see also <a href="../Text_blocks/Environments/Frames.html" title="Text blocks/Environments/Frames">Frames</a>)
</p>
    <p>One may define a specific framed command, for example <tt>coloredmath</tt>, with <tt><a href="../Command/definemathframed.html" title="Command/definemathframed">\definemathframed</a></tt>.
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definemathframed</span></span><span class="brx">[</span>coloredmath<span class="brx">]</span>
	<span class="brx">[</span>
	frame<span class="brx">=</span>off,
	location<span class="brx">=</span>mathematics,
	background<span class="brx">=</span>color,
	backgroundcolor<span class="brx">=</span>lightcyan,
	backgroundoffset<span class="brx">=</span>1pt
	<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
Since for $|x| &lt; 1$ we have
<span class="cs"><span class="documentcs">\startformula</span></span>
<span class="cs">\log</span><span class="brx">(</span>1+x<span class="brx">)</span> <span class="brx">=</span> <span class="cs">\coloredmath</span><span class="br">{</span>x- <span class="cs">\displaystyle</span><span class="br">{</span>x^2<span class="cs"><span class="documentcs">\over</span></span>2<span class="br">}</span><span class="br">}</span> + <span class="br">{</span>x^3 <span class="cs"><span class="documentcs">\over</span></span> 3<span class="br">}</span> + <span class="cs">\cdots</span>
<span class="cs"><span class="documentcs">\stopformula</span></span>
we may write $<span class="cs">\log</span><span class="brx">(</span>1+x<span class="brx">)</span> <span class="brx">=</span> x + O<span class="brx">(</span>x^2<span class="brx">)</span>$.
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/43342948e2b88bf02fcf6f46e098f45c.webp" width="438">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Formatting_numbers_and_units">
      Formatting numbers and units
     </span>
    </h2>
    <p>Formatting numbers uses <tt><a href="../Command/digits.html" title="Command/digits">\digits</a></tt>, <tt><a class="new" href="../index.php?title=Command/setdigitmode&action=edit&redlink=1.html" title="Command/setdigitmode (page does not exist)">\setdigitmode</a></tt> and <tt><a class="new" href="../index.php?title=Command/setdigitorder&action=edit&redlink=1.html" title="Command/setdigitorder (page does not exist)">\setdigitorder</a></tt>.
</p>
    <p>See
</p>
    <ul>
     <li>
      <a class="external text" href="http://www.pragma-ade.nl/general/manuals/units-mkiv.pdf" rel="nofollow">
       Units manual
      </a>
      (2015).
     </li>
     <li>
      <a class="external text" href="http://www.pragma-ade.nl/general/magazines/mag-0003.pdf" rel="nofollow">
       Pasting digits together
      </a>
      ThisWay manual  (2003)
     </li>
     <li>
      <a class="extiw" href="http://www.pragma-ade.nl/general/manuals/xphysml-s.pdf" title="manual:xphysml-s.pdf">
       PhysML (MathML extension for physics)
      </a>
      by Pragma
     </li>
     <li>
      <a href="Units.html" title="Mathematics/Units">
       Units
      </a>
     </li>
    </ul>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\usemodule</span></span><span class="brx">[</span>units<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A8,landscape<span class="brx">]</span>
<span class="cs">\setdigitmode</span> <span class="br">{</span>1<span class="br">}</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
This will never be a <span class="cs"><span class="documentcs">\digits</span></span><span class="br">{</span>1,000,000<span class="br">}</span> seller.
<span class="cs"><span class="documentcs">\blank</span></span><span class="brx">[</span>line<span class="brx">]</span>
I will never grow longer than <span class="cs"><span class="documentcs">\digits</span></span><span class="br">{</span>1.86<span class="br">}</span> <span class="cs"><span class="documentcs">\unit</span></span><span class="br">{</span>m<span class="br">}</span>.
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="307" src="../wikiteximage/21dd182d261875ae6fd827765331702e.webp" width="438">
     </li>
    </ul>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\startlines</span></span>
10 <span class="cs">\setdigitmode</span> <span class="br">{</span>1<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>0<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
20 <span class="cs">\setdigitmode</span> <span class="br">{</span>2<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>0<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
30 <span class="cs">\setdigitmode</span> <span class="br">{</span>3<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>0<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
40 <span class="cs">\setdigitmode</span> <span class="br">{</span>4<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>0<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
50 <span class="cs">\setdigitmode</span> <span class="br">{</span>5<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>0<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
60 <span class="cs">\setdigitmode</span> <span class="br">{</span>6<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>0<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>

11 <span class="cs">\setdigitmode</span> <span class="br">{</span>1<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>1<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
21 <span class="cs">\setdigitmode</span> <span class="br">{</span>2<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>1<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
31 <span class="cs">\setdigitmode</span> <span class="br">{</span>3<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>1<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
41 <span class="cs">\setdigitmode</span> <span class="br">{</span>4<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>1<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
51 <span class="cs">\setdigitmode</span> <span class="br">{</span>5<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>1<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
61 <span class="cs">\setdigitmode</span> <span class="br">{</span>6<span class="br">}</span> <span class="cs">\setdigitorder</span><span class="br">{</span>1<span class="br">}</span> <span class="cs"><span class="documentcs">\digits</span></span> <span class="br">{</span>12,345.90<span class="br">}</span>
<span class="cs"><span class="documentcs">\stoplines</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="264" src="../wikiteximage/0a555f176c7fd7e3c2792a2bb6061a8c.webp" width="104">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Notes">
      Notes
     </span>
    </h2>
    <h3>
     <span class="mw-headline" id="Evaluating_expressions_in_ConTeXt">
      Evaluating expressions in ConTeXt
     </span>
    </h3>
    <p>See also <a href="../ConTeXt_and_Lua_programming/Evaluation_of_expressions.html" title="ConTeXt and Lua programming/Evaluation of expressions">Evaluation of expressions</a> (i.e. <i>doing</i> math).
</p>
    <h3>
     <span class="mw-headline" id="Note_to_Plain_TeX_Users">
      Note to Plain TeX Users
     </span>
    </h3>
    <p>ConTeXt is plain TeX compatible. So, if you have any old document written in plain TeX, it will work with ConTeXt. This does not mean that you will get pixel by pixel identical output with ConTeXt. For inline math, everything that you learnt for plain TeX is also true for ConTeXt. However, display math is significantly different. <b>Do not use <code>$$ .... $$</code></b> to write display math formulas in ConTeXt, since you will not get the correct spacing around the formulas. Instead use <tt><a href="../Command/startformula.html" title="Command/startformula">\startformula</a></tt> and <tt>\stopformula</tt>.
</p>
    <h3>
     <span id="Note_to_AMSTeX/LaTeX_Users">
     </span>
     <span class="mw-headline" id="Note_to_AMSTeX.2FLaTeX_Users">
      Note to AMSTeX/LaTeX Users
     </span>
    </h3>
    <p>ConTeXt offers almost all the features that are present in AMSTeX and LaTeX. However, ConTeXt syntax is different. See this <a class="external text" href="http://dl.contextgarden.net/myway/context-latex-math.pdf" rel="nofollow">My Way</a> for how to 'translate' from amsmath syntax to ConTeXt syntax. <a class="new" href="../index.php?title=Input_and_compilation/From_LaTeX_to_ConTeXt/LaTeX_Math_in_ConTeXt&action=edit&redlink=1.html" title="Input and compilation/From LaTeX to ConTeXt/LaTeX Math in ConTeXt (page does not exist)">LaTeX Math in ConTeXt</a> gives some brief ideas on how to get the LaTeX syntax to run in ConTeXt.
</p>
    <h3>
     <span class="mw-headline" id="Other_Methods">
      Other Methods
     </span>
    </h3>
    <ul>
     <li>
      The "native" ConTeXt way of math is
      <a href="../MathML.html" title="MathML">
       MathML
      </a>
      , an application of
      <a href="../Input_and_compilation/XML_source.html" title="Input and compilation/XML source">
       XML
      </a>
      - rather verbose but mighty.
     </li>
     <li>
      There are two different math modules on
      <a class="external text" href="http://dante.ctan.org/tex-archive/macros/context/contrib/maths/" rel="nofollow">
       CTAN
      </a>
      ,
      <a href="../Math_with_nath.html" title="Math with nath">
       nath
      </a>
      and
      <a href="../Math_with_amsl.html" title="Math with amsl">
       amsl
      </a>
      . And there's a
      <a href="../Math_with_newmat.html" title="Math with newmat">
       new math module
      </a>
      in the distribution.
     </li>
     <li>
      It is also possible to use most
      <a class="new" href="../index.php?title=Input_and_compilation/From_LaTeX_to_ConTeXt/LaTeX_Math_in_ConTeXt&action=edit&redlink=1.html" title="Input and compilation/From LaTeX to ConTeXt/LaTeX Math in ConTeXt (page does not exist)">
       LaTeX equations in ConTeXt
      </a>
      with a relatively small set of supporting definitions.
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="To_do">
      To do
     </span>
    </h3>
    <ul>
     <li>
      dots
     </li>
     <li>
      Arrows (see MyWay article
      <a class="external text" href="http://dl.contextgarden.net/myway/matharrows.pdf" rel="nofollow">
       Math Arrows
      </a>
      ) broken link.
      <a class="external text" href="../images/f/f6/matharrows.pdf" rel="nofollow">
       Math Arrows (wiki copy)
      </a>
     </li>
    </ul>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-15
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Mathematics/Tutorials">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
