<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="style.css" rel="stylesheet">
  <link href="favicon.ico" rel="icon" sizes="32x32">
  <title>
   pm39 cmdref revamp proposal&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/pm39_cmdref_revamp_proposal" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    pm39 cmdref revamp proposal
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=5382&diff=29413">2020-06-23</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <p>"Towards A Revamped ConTeXt Reference Manual"
</p>
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h2>
       Contents
      </h2>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#The_Short_Version">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         The Short Version
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-2">
       <a href="#The_Problem">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         The Problem
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-3">
       <a href="#Goals_for_this_Project">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         Goals for this Project
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-4">
         <a href="#Personal_Goals">
          <span class="tocnumber">
           3.1
          </span>
          <span class="toctext">
           Personal Goals
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-5">
         <a href="#General_Goals">
          <span class="tocnumber">
           3.2
          </span>
          <span class="toctext">
           General Goals
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-6">
         <a href="#Non-Goals">
          <span class="tocnumber">
           3.3
          </span>
          <span class="toctext">
           Non-Goals
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-7">
         <a href="#Questions_for_This_Project">
          <span class="tocnumber">
           3.4
          </span>
          <span class="toctext">
           Questions for This Project
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-8">
       <a href="#Darwin_Information_Typing_Architecture">
        <span class="tocnumber">
         4
        </span>
        <span class="toctext">
         Darwin Information Typing Architecture
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-9">
       <a href="#A_Hand-Built_Prototype">
        <span class="tocnumber">
         5
        </span>
        <span class="toctext">
         A Hand-Built Prototype
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-10">
         <a href="#Output_Products">
          <span class="tocnumber">
           5.1
          </span>
          <span class="toctext">
           Output Products
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-11">
           <a href="#HTML5">
            <span class="tocnumber">
             5.1.1
            </span>
            <span class="toctext">
             HTML5
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-12">
           <a href="#XSL-FO_PDF">
            <span class="tocnumber">
             5.1.2
            </span>
            <span class="toctext">
             XSL-FO PDF
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-13">
           <a href="#Normalized_XML">
            <span class="tocnumber">
             5.1.3
            </span>
            <span class="toctext">
             Normalized XML
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-14">
           <a href="#Web_Help">
            <span class="tocnumber">
             5.1.4
            </span>
            <span class="toctext">
             Web Help
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-15">
           <a href="#Other_Available_Transformations">
            <span class="tocnumber">
             5.1.5
            </span>
            <span class="toctext">
             Other Available Transformations
            </span>
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-16">
       <a href="#A_Full_Command_Set">
        <span class="tocnumber">
         6
        </span>
        <span class="toctext">
         A Full Command Set
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-17">
         <a href="#Dita_Sources">
          <span class="tocnumber">
           6.1
          </span>
          <span class="toctext">
           Dita Sources
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-18">
         <a href="#Topic_Level_Features">
          <span class="tocnumber">
           6.2
          </span>
          <span class="toctext">
           Topic Level Features
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-19">
           <a href="#Short_Description">
            <span class="tocnumber">
             6.2.1
            </span>
            <span class="toctext">
             Short Description
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-20">
           <a href="#Metadata">
            <span class="tocnumber">
             6.2.2
            </span>
            <span class="toctext">
             Metadata
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-21">
           <a href="#Syntax">
            <span class="tocnumber">
             6.2.3
            </span>
            <span class="toctext">
             Syntax
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-22">
           <a href="#Options">
            <span class="tocnumber">
             6.2.4
            </span>
            <span class="toctext">
             Options
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-23">
           <a href="#Settings">
            <span class="tocnumber">
             6.2.5
            </span>
            <span class="toctext">
             Settings
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-24">
           <a href="#Notes">
            <span class="tocnumber">
             6.2.6
            </span>
            <span class="toctext">
             Notes
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-25">
           <a href="#Examples">
            <span class="tocnumber">
             6.2.7
            </span>
            <span class="toctext">
             Examples
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-26">
           <a href="#Related_Topics">
            <span class="tocnumber">
             6.2.8
            </span>
            <span class="toctext">
             Related Topics
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-27">
           <a href="#Related_Links">
            <span class="tocnumber">
             6.2.9
            </span>
            <span class="toctext">
             Related Links
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2 tocsection-28">
         <a href="#System_Level_Features">
          <span class="tocnumber">
           6.3
          </span>
          <span class="toctext">
           System Level Features
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-29">
           <a href="#Using_a_Map_to_Establish_a_Hierarchy">
            <span class="tocnumber">
             6.3.1
            </span>
            <span class="toctext">
             Using a Map to Establish a Hierarchy
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-30">
           <a href="#Using_Keys_to_Reference_Other_Content">
            <span class="tocnumber">
             6.3.2
            </span>
            <span class="toctext">
             Using Keys to Reference Other Content
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-31">
           <a href="#Using_a_Map_to_Establish_Relationships_Between_Topics">
            <span class="tocnumber">
             6.3.3
            </span>
            <span class="toctext">
             Using a Map to Establish Relationships Between Topics
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-32">
           <a href="#Multiple_Maps_for_Multiple_Products">
            <span class="tocnumber">
             6.3.4
            </span>
            <span class="toctext">
             Multiple Maps for Multiple Products
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-33">
           <a href="#Keeping_Track_of_What_Needs_To_Be_Worked_On">
            <span class="tocnumber">
             6.3.5
            </span>
            <span class="toctext">
             Keeping Track of What Needs To Be Worked On
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2 tocsection-34">
         <a href="#Output_Products_2">
          <span class="tocnumber">
           6.4
          </span>
          <span class="toctext">
           Output Products
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-35">
         <a href="#Much_Yet_to_Do">
          <span class="tocnumber">
           6.5
          </span>
          <span class="toctext">
           Much Yet to Do
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-36">
       <a href="#Pros_and_Cons">
        <span class="tocnumber">
         7
        </span>
        <span class="toctext">
         Pros and Cons
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-37">
         <a href="#Pros">
          <span class="tocnumber">
           7.1
          </span>
          <span class="toctext">
           Pros
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-38">
         <a href="#Cons">
          <span class="tocnumber">
           7.2
          </span>
          <span class="toctext">
           Cons
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-39">
       <a href="#Current_Work:_Transforming_the_Current_Interface_Files">
        <span class="tocnumber">
         8
        </span>
        <span class="toctext">
         Current Work: Transforming the Current Interface Files
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-40">
       <a href="#Future_Work">
        <span class="tocnumber">
         9
        </span>
        <span class="toctext">
         Future Work
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-41">
         <a href="#Filling_In_the_Documentation">
          <span class="tocnumber">
           9.1
          </span>
          <span class="toctext">
           Filling In the Documentation
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-42">
         <a href="#Editing_the_Manual">
          <span class="tocnumber">
           9.2
          </span>
          <span class="toctext">
           Editing the Manual
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-43">
         <a href="#Maintaining_the_Documentation">
          <span class="tocnumber">
           9.3
          </span>
          <span class="toctext">
           Maintaining the Documentation
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-44">
         <a href="#Automatically_Processing_Examples">
          <span class="tocnumber">
           9.4
          </span>
          <span class="toctext">
           Automatically Processing Examples
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-45">
         <a href="#Using_Examples_as_a_Test_Suite">
          <span class="tocnumber">
           9.5
          </span>
          <span class="toctext">
           Using Examples as a Test Suite
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-46">
       <a href="#Future_Work_That.27s_Really_Hard">
        <span class="tocnumber">
         10
        </span>
        <span class="toctext">
         Future Work That's Really Hard
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-47">
         <a href="#Normalizing_Signatures">
          <span class="tocnumber">
           10.1
          </span>
          <span class="toctext">
           Normalizing Signatures
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-48">
       <a href="#Thanks.21">
        <span class="tocnumber">
         11
        </span>
        <span class="toctext">
         Thanks!
        </span>
       </a>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="The_Short_Version">
      The Short Version
     </span>
    </h2>
    <p>The ConTeXt command reference could be more complete, with full descriptions of options and settings, examples, and relations ships between commands.
</p>
    <p>One way to accomplish this is to develop the ConTeXt command reference as document set using the Darwin Information Typing Architecture (DITA) specification. This provides a well-structured way to produce and maintain the documentation for the command interface, and can be used as a platform to produce many output formats.
</p>
    <p>For an example of DITA sources:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference" rel="nofollow">https://github.com/pmazaitis/context_command_reference</a>
</p>
    <p>For examples of output:
</p>
    <p><a class="external free" href="https://paul.mazaitis.org/ctx_comref/" rel="nofollow">https://paul.mazaitis.org/ctx_comref/</a>
</p>
    <h2>
     <span class="mw-headline" id="The_Problem">
      The Problem
     </span>
    </h2>
    <p>In learning ConTeXt, one thing I run into a lot is uncertainty about what the settings do; either I'm not sure what any of the possible values mean in the key=value pairs, or I'm not even sure what all of those are.
</p>
    <p>I'd like to have a resource that is a complete description of the ConTeXt command set: I'd like to have one, central document where there is a place for all of this information to go.
</p>
    <h2>
     <span class="mw-headline" id="Goals_for_this_Project">
      Goals for this Project
     </span>
    </h2>
    <h3>
     <span class="mw-headline" id="Personal_Goals">
      Personal Goals
     </span>
    </h3>
    <p>By the end of this, I'd like to:
</p>
    <ul>
     <li>
      Have a command reference with descriptions for what all of the options and settings do.
     </li>
     <li>
      Have the command reference be in a format that I can easily transform into a Documentation Set for Dash.app (
      <a class="external free" href="https://kapeli.com/dash" rel="nofollow">
       https://kapeli.com/dash
      </a>
      ).
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="General_Goals">
      General Goals
     </span>
    </h3>
    <p>The command reference should be adaptable for different requirements: like the current interface files, it should still be able to drive automatic content on the wiki, as well as be available as a unified PDF.
</p>
    <p>The ConTeXt interface has a lot of inheritance in it. One nice feature of this is that documentation editors only need to update one piece of information, and it automatically applies everywhere. Users, though, shouldn't have to chase down relevant documentation for a command through the manual: all of the options for a command should be available in one place.
</p>
    <p>The command reference should be complete: it should be able to support a description of every command, including syntax and setups. 
</p>
    <p>Other nice features should be a MWE for each command, and how that command relates to other commands.
</p>
    <h3>
     <span class="mw-headline" id="Non-Goals">
      Non-Goals
     </span>
    </h3>
    <p>This project is focused on the command reference, and doesn't make any claims about other documentation (although, hopefully, it will be better able to support them).
</p>
    <h3>
     <span class="mw-headline" id="Questions_for_This_Project">
      Questions for This Project
     </span>
    </h3>
    <ul>
     <li>
      Will this help?
     </li>
     <li>
      Will this work?
     </li>
     <li>
      Is there something I'm missing?
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Darwin_Information_Typing_Architecture">
      Darwin Information Typing Architecture
     </span>
    </h2>
    <p>The Darwin Information Typing Architecture (DITA) is an OASIS-backed, XML-based standard for developing topic-based documentation,
</p>
    <p><a class="external free" href="https://www.xml.com/articles/2017/01/19/what-dita/" rel="nofollow">https://www.xml.com/articles/2017/01/19/what-dita/</a>
</p>
    <p>DITA supports topic-based authoring. For purposes of this manual, we can consider each command a topic, a self-contained and complete description of what the command does, it's syntax, what setups it accepts, etc.
</p>
    <p>With DITA, topics can then be compiled together using maps.  Maps are arbitrary external expressions of hierarchy, and multiple maps can share the same topic. For example, there could be a map with the complete command reference, and another that leave out the internal, developer-facing commands. These maps could be used to produce two documents, but rely on the same command topic files as sources, and editing a topic file for a particular command will ensure that it's updated for both documents when they are rebuilt. 
</p>
    <p>DITA also supports pulling content from one topic to another. For the command set, DITA can pull options and settings from one command topic into one of more other topics, and have that material included directly in the former topics when they are compiled. This preserves the inheritance and single sourcing of setups (excellent for the for the document maintainers) as well as making sure all relevant content is available everywhere it's needed (excellent for end users). 
</p>
    <h2>
     <span class="mw-headline" id="A_Hand-Built_Prototype">
      A Hand-Built Prototype
     </span>
    </h2>
    <p>I've put together a hand-built prototype with a handful of commands to act as examples:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype</a>
</p>
    <p>This is meant to be a small scale, easily digestible prototype to show how DITA might be used to develop a comprehensive documentation set.
</p>
    <h3>
     <span class="mw-headline" id="Output_Products">
      Output Products
     </span>
    </h3>
    <p>From the hand-built prototype, The DITA Open Toolkit (dita-ot) can generate lots of different formats out of the box, and use plugins for others. Here are some examples, all generated from the above DITA document set.
</p>
    <h4>
     <span class="mw-headline" id="HTML5">
      HTML5
     </span>
    </h4>
    <p><code>dita-ot</code> can generate an HTML version of the documentation set: 
</p>
    <p><code>dita --input=context_command_reference.ditamap --format=html5</code>
</p>
    <p>...as hosted here:
</p>
    <p><a class="external free" href="https://paul.mazaitis.org/ctx_comref/prototype-html5/" rel="nofollow">https://paul.mazaitis.org/ctx_comref/prototype-html5/</a>
</p>
    <p>This is without any CSS, etc. - just the structure.
</p>
    <h4>
     <span class="mw-headline" id="XSL-FO_PDF">
      XSL-FO PDF
     </span>
    </h4>
    <p><code>dita-ot</code> can generate an XSL-FO version of the documentation set:
</p>
    <p>dita --input=context_command_reference.ditamap --format=pdf
</p>
    <p>...as hosted here:
</p>
    <p><a class="external free" href="https://paul.mazaitis.org/ctx_comref/prototype-pdf/context_command_reference.pdf" rel="nofollow">https://paul.mazaitis.org/ctx_comref/prototype-pdf/context_command_reference.pdf</a>
</p>
    <p>This is pretty straightforward FO. (I imagine ConTeXt could do a nicer job...)
</p>
    <h4>
     <span class="mw-headline" id="Normalized_XML">
      Normalized XML
     </span>
    </h4>
    <p><code>dita-ot</code> can generate a normalized version of the documentation set:
</p>
    <p>dita --input=context_command_reference.ditamap --format=dita
</p>
    <p>...as available here:
</p>
    <p><a class="external free" href="https://paul.mazaitis.org/ctx_comref/prototype-normalized-topics/" rel="nofollow">https://paul.mazaitis.org/ctx_comref/prototype-normalized-topics/</a>
</p>
    <p>This transformation does all of the processing work on individual topics (coping content, resolving lints, etc.) but keeps the content as XML files for further processing.
</p>
    <h4>
     <span class="mw-headline" id="Web_Help">
      Web Help
     </span>
    </h4>
    <p>I also use the Oxygen XML Editor, which comes with several other transformations. One transformation of the documentation set that might be interesting as an example of what is possible is their Web Help implementation, hosted here:
</p>
    <p><a class="external free" href="https://paul.mazaitis.org/ctx_comref/prototype-webhelp-responsive/" rel="nofollow">https://paul.mazaitis.org/ctx_comref/prototype-webhelp-responsive/</a>
</p>
    <h4>
     <span class="mw-headline" id="Other_Available_Transformations">
      Other Available Transformations
     </span>
    </h4>
    <p>There are many other transformations available, and it is possible to create new ones.
</p>
    <h2>
     <span class="mw-headline" id="A_Full_Command_Set">
      A Full Command Set
     </span>
    </h2>
    <h3>
     <span class="mw-headline" id="Dita_Sources">
      Dita Sources
     </span>
    </h3>
    <p>A full DITA rendering of the ConTeXt command interface is tracked here:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference" rel="nofollow">https://github.com/pmazaitis/context_command_reference</a>
</p>
    <p>These files are generated by a Python script from the command interface files distributed with ConTeXt. The Script is available here:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context-interface2dita" rel="nofollow">https://github.com/pmazaitis/context-interface2dita</a>
</p>
    <p>...with a noted lack of documentation as of yet.
</p>
    <p>This documentation set is tested to build to PDF, HTML5 and Normalized DITA. 
</p>
    <h3>
     <span class="mw-headline" id="Topic_Level_Features">
      Topic Level Features
     </span>
    </h3>
    <h4>
     <span class="mw-headline" id="Short_Description">
      Short Description
     </span>
    </h4>
    <p>One of the first elements in a topic is the <code>shortdesc</code> element:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/commands/b/r_command_blank.dita#L5-L7" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/commands/b/r_command_blank.dita#L5-L7</a>
</p>
    <p>This element holds a brief description of the topic.
</p>
    <p>This is a quirk of DITA, and can be difficult to write, but is an important requirement for cross-linking references.
</p>
    <h4>
     <span class="mw-headline" id="Metadata">
      Metadata
     </span>
    </h4>
    <p>The metadata for the topic is contained in the <code>prolog</code> element:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/b/r_command_blank.dita#L8-L19" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/b/r_command_blank.dita#L8-L19</a>
</p>
    <p>We have a few interesting features here.
</p>
    <p>The <code>audience</code> element expresses the intended audience for this topic. This can be used to indicate a level of expertise expected for the audience of this particular command:
</p>
    <ul>
     <li>
      user: command is meant for the general ConTeXt user base
     </li>
     <li>
      programmer: command is meant for folks who create their own ConTeXt commands
     </li>
     <li>
      implementor: command is meant for internal use in ConTeXt development
     </li>
    </ul>
    <p>There is some flexibility here with the labels.
</p>
    <p>The <code>category</code> element describes one or more categories that this command is part of. A command topic can have multiple <code>category</code> elements.
</p>
    <p>The <code>keywords</code> element can support one or more <code>keyword</code> elements, to tag commands that fall into more than one area.
</p>
    <p>The <code>prodinfo</code> element contains metadata about how this command topic related to the entire project. The <code>prodname</code> element generally links the command to ConTeXt, while the <code>vrmlist</code> allows tracking of version (whatever makes sense) and release (which might be useful for production/experimental commands, etc.). 
</p>
    <p>The <code>vrmlist</code> can contain multiple <code>vrm</code> elements, and could be used to support commands across mkii, mkiv, etc.
</p>
    <p>These elements can be used for conditional processing. For example, we could instruct the DITA processor to only include topics that are user-focused, etc.
</p>
    <p>In addition to the formal metadata, the <code>prolog</code> also supports two other pieces of information: the <code>source</code> element, and the <code>critdates</code> element.
</p>
    <p>The <code>source</code> element may be useful here to describe a full (non-rooted?) path to the source file in the standard ConTeXt distribution.
</p>
    <p>The <code>critdates</code> element can contain <code>created</code> and <code>revised</code> elements to capture creating, modification, and expiry dates. This element can be used progamatically to identify documentation that is scheduled for an edit.
</p>
    <h4>
     <span class="mw-headline" id="Syntax">
      Syntax
     </span>
    </h4>
    <p>The main body of the topic (the <code>refbody</code> element) starts with a discussion of syntax:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/v/r_command_vspacing.dita#L20-L39" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/v/r_command_vspacing.dita#L20-L39</a>
</p>
    <p>This includes a description of the syntax phrase, as well as a table of all of the arguments, with a quick description of each.
</p>
    <h4>
     <span class="mw-headline" id="Options">
      Options
     </span>
    </h4>
    <p>Example: 
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/v/r_command_vspacing.dita#L20-L39" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/v/r_command_vspacing.dita#L20-L39</a>
</p>
    <p>If the command accepts options (single keywords, identified as 'keyword' in the interface files) as part of its setups, they are presented in a table in the body of the topic. The options table presents each option, and a brief description of what it does. The options section also can support notes, more tables, etc.
</p>
    <p>Commands can inherit option content from other topics, as in:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/b/r_command_blank.dita#L50-L53" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/b/r_command_blank.dita#L50-L53</a>
</p>
    <p>When the final document is produced, this inheritance directive will copy the source content into the topic, so it's available to users in both places immediately.
</p>
    <h4>
     <span class="mw-headline" id="Settings">
      Settings
     </span>
    </h4>
    <p>Example:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/s/r_command_setupbuffer.dita#L47-L118" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/s/r_command_setupbuffer.dita#L47-L118</a>
</p>
    <p>If the commands accepts settings (key-value pairs, identified as 'parameter' in the interface files) as part of its setups, they are presented as a grouped series of tables in the body of the topic; each key has a table of available values for the key and their descriptions.
</p>
    <p>Commands can inherit sets of settings content from other topics, as in:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/d/r_command_definebuffer.dita#L58-L71" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/d/r_command_definebuffer.dita#L58-L71</a>
</p>
    <p>Commands can also inherit an option set as the values of a setting key:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/s/r_command_setuptyping.dita#L660-L664" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/s/r_command_setuptyping.dita#L660-L664</a>
</p>
    <p>When the final document is produced, this inheritance directive will copy the source content into the topic, so it's available to users in both places immediately.
</p>
    <h4>
     <span class="mw-headline" id="Notes">
      Notes
     </span>
    </h4>
    <p>A notes <code>section</code> can be included:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/v/r_command_vspacing.dita#L251-L345" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/v/r_command_vspacing.dita#L251-L345</a>
</p>
    <p>Individual notes can be included in various sections with the <code>note</code> element: use of a notes section can also be useful for general documentation that doesn't fit elsewhere in the topic.
</p>
    <p>This is not meant to grow to take the place of more comprehensive documentation: the notes in a given topic should be focused only on the command detailed in that topic.
</p>
    <h4>
     <span class="mw-headline" id="Examples">
      Examples
     </span>
    </h4>
    <p>A goal is to have one minimal working example for every command. For example:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/b/r_command_bold.dita#L43-L52" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/b/r_command_bold.dita#L43-L52</a>
</p>
    <p>It's fairly straightforward to pull the MWE out of the topic; one piece of future work is adding automatic builds of MWEs back into the manual as image assets, if requested in the topic (using the 'otherprops' attribute). To be reasonable, this should be handled entirely automatically by the build system.
</p>
    <p>(This also presents the possibility of the manual being used as a test or coverage suite, but that's outside the scope of this project.)
</p>
    <p>A command can have more than one example, but should always have at least one.
</p>
    <h4>
     <span class="mw-headline" id="Related_Topics">
      Related Topics
     </span>
    </h4>
    <p>The related topics that appear in the final documentation do not come from the topic sources, but are generated by the DITA processor based on relationship descriptions maintained elsewhere.
</p>
    <p>For this document set, the relationships are described with a <code>reltable</code> in the relations map:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/relations.ditamap" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/relations.ditamap</a>
</p>
    <p>This allows for arbitrary relationships between commands, and the relationships can be ignored if the commands aren't included in a given product, surpassing confusing and/or broken links in the output.
</p>
    <h4>
     <span class="mw-headline" id="Related_Links">
      Related Links
     </span>
    </h4>
    <p>Each command topic can also have an explicit related links section:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/i/r_command_input.dita#L65-L69" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/936e331726515175160190a6b383f7735105c8cb/en/commands/i/r_command_input.dita#L65-L69</a>
</p>
    <p>This can also be used to pointing the user at some other external, relevant part of the ConTeXt documentation system (a manual, or a My Way, etc.).
</p>
    <h3>
     <span class="mw-headline" id="System_Level_Features">
      System Level Features
     </span>
    </h3>
    <h4>
     <span class="mw-headline" id="Using_a_Map_to_Establish_a_Hierarchy">
      Using a Map to Establish a Hierarchy
     </span>
    </h4>
    <p>The topics themselves know nothing about the hierarchy into which they're placed for a product; this is handled with a ditamap file, which establishes inclusion, hierarchy, order, and grouping:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/context_command_reference.ditamap" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/context_command_reference.ditamap</a>
</p>
    <p>Map files can link to other map files helping reduce the complexity of maintenance.
</p>
    <p>A map file should be maintained for each product; one map file for the comprehensive reference, another map file for an appendix to a particular manual, etc. In this manner, topics can be reused across multiple products, are there is no worry about a particular piece of command documentation getting out of sync.
</p>
    <h4>
     <span class="mw-headline" id="Using_Keys_to_Reference_Other_Content">
      Using Keys to Reference Other Content
     </span>
    </h4>
    <p>A core part of how DITA transforms and transcodes content from topic to topic is through the use of keys; DITA uses these (arbitrary) labels to know where to find specific pieces of content. These keys are maintained in their own map:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/inheritance.ditamap" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/inheritance.ditamap</a>
</p>
    <h4>
     <span class="mw-headline" id="Using_a_Map_to_Establish_Relationships_Between_Topics">
      Using a Map to Establish Relationships Between Topics
     </span>
    </h4>
    <p>For this document set, the relationships are described with a <code>reltable</code> in the relations map:
</p>
    <p><a class="external free" href="https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/relations.ditamap" rel="nofollow">https://github.com/pmazaitis/context_command_reference_prototype/blob/master/en/relations.ditamap</a>
</p>
    <p>This is a simple two column table that describes commands (column one) and the commands related to that command (column two).
</p>
    <h4>
     <span class="mw-headline" id="Multiple_Maps_for_Multiple_Products">
      Multiple Maps for Multiple Products
     </span>
    </h4>
    <p>At the moment, the distribution supports three maps of command topics:
</p>
    <ul>
     <li>
      The full command set
     </li>
     <li>
      User-facing commands
     </li>
     <li>
      System commands
     </li>
    </ul>
    <p>...each drawing on the same pool of command topics to build the final product.
</p>
    <p>Maps could also be made to support command glossaries for manuals, etc. 
</p>
    <h4>
     <span class="mw-headline" id="Keeping_Track_of_What_Needs_To_Be_Worked_On">
      Keeping Track of What Needs To Be Worked On
     </span>
    </h4>
    <p>Several elements in the topics now have the <code>rev</code> attribute. This can be used to keep track of what elements in the command set are still boilerplate by incrementing the attribute value after edit.
</p>
    <h3>
     <span class="mw-headline" id="Output_Products_2">
      Output Products
     </span>
    </h3>
    <p>The Normalized DITA version of the current effort is here:
</p>
    <p><a class="external free" href="https://paul.mazaitis.org/ctx_comref/ctx_com_ref-ditanorm-20200622_002.zip" rel="nofollow">https://paul.mazaitis.org/ctx_comref/ctx_com_ref-ditanorm-20200622_002.zip</a>
</p>
    <p>...presented as a zip file (to browse though a smaller example, the prototype is still available online). 
</p>
    <p>This one is interesting to me, in that it might be useful as a basis for inclusion and formatting in both ConTeXt documents (through the XML interface) and/or the Wiki (if current methods could be adopted).
</p>
    <p>Other available formats:
</p>
    <p>HTML5 (No CSS, Zipped): <a class="external free" href="https://paul.mazaitis.org/ctx_comref/ctx_com_ref-html5-20200622_002.zip" rel="nofollow">https://paul.mazaitis.org/ctx_comref/ctx_com_ref-html5-20200622_002.zip</a>
</p>
    <p>PDF (XSL-FO, Full Command Set): <a class="external free" href="https://paul.mazaitis.org/ctx_comref/ctx_com_ref-pdf-20200622_002.pdf" rel="nofollow">https://paul.mazaitis.org/ctx_comref/ctx_com_ref-pdf-20200622_002.pdf</a>
</p>
    <p>There are also maps available to build a reference manual with only system commands, and a reference manual with only user commands. A PDF version of the latter:
</p>
    <p><a class="external free" href="https://paul.mazaitis.org/ctx_comref/ctx_user_ref-pdf-20200622_002.pdf" rel="nofollow">https://paul.mazaitis.org/ctx_comref/ctx_user_ref-pdf-20200622_002.pdf</a>
</p>
    <h3>
     <span class="mw-headline" id="Much_Yet_to_Do">
      Much Yet to Do
     </span>
    </h3>
    <p>The documentation still needs to be completed and edited, etc., but I think this could be a viable way to systematically document more of the interface's depth and detail.
</p>
    <h2>
     <span class="mw-headline" id="Pros_and_Cons">
      Pros and Cons
     </span>
    </h2>
    <h3>
     <span class="mw-headline" id="Pros">
      Pros
     </span>
    </h3>
    <p>DITA is an open specification, and comes with an open source tool chain.
</p>
    <p>One set of documentation set can produce multiple documents and formats.
</p>
    <p>Documentation needs only be edited in one place.
</p>
    <p>ConTeXt can handle XML inputs, so there are intriguing possibilities for nicer representations.
</p>
    <h3>
     <span class="mw-headline" id="Cons">
      Cons
     </span>
    </h3>
    <p>DITA is a complicated specification, and requires conformant XML to work. 
</p>
    <p>DITA is strict (but that's how it works).
</p>
    <p>The DITA toolchain is complicated, and has a number of dependancies (Java, etc.). 
</p>
    <h2>
     <span class="mw-headline" id="Current_Work:_Transforming_the_Current_Interface_Files">
      Current Work: Transforming the Current Interface Files
     </span>
    </h2>
    <p>Working out a way to manage <i>variants</i> in the documentation set. 
</p>
    <h2>
     <span class="mw-headline" id="Future_Work">
      Future Work
     </span>
    </h2>
    <h3>
     <span class="mw-headline" id="Filling_In_the_Documentation">
      Filling In the Documentation
     </span>
    </h3>
    <p>This documentation set offers a place to document syntax, options, and settings; there's a lot to document, even with re-use. 
</p>
    <h3>
     <span class="mw-headline" id="Editing_the_Manual">
      Editing the Manual
     </span>
    </h3>
    <p>The manual should be correct! This, too, is a lot of editing work.
</p>
    <h3>
     <span class="mw-headline" id="Maintaining_the_Documentation">
      Maintaining the Documentation
     </span>
    </h3>
    <p>Tricky!
</p>
    <p>One way this might work is to use the wiki: use a system similar to the current one to auto-generate wiki pages for each command, and then let users fill in notes or corrections on the rest of the page...
</p>
    <h3>
     <span class="mw-headline" id="Automatically_Processing_Examples">
      Automatically Processing Examples
     </span>
    </h3>
    <p>It's fairly simple to pull out the examples from the topics; slightly more complicated is adapting the dita-ot build system (based on Ant) to automatically pull the examples, run them through ConTeXt, and then link them to the parent document as an inlined graphic.
</p>
    <h3>
     <span class="mw-headline" id="Using_Examples_as_a_Test_Suite">
      Using Examples as a Test Suite
     </span>
    </h3>
    <p>Another possibility is to pull examples from topics (either all, or a flagged subset) and use them as a test suite. 
</p>
    <h2>
     <span id="Future_Work_That's_Really_Hard">
     </span>
     <span class="mw-headline" id="Future_Work_That.27s_Really_Hard">
      Future Work That's Really Hard
     </span>
    </h2>
    <h3>
     <span class="mw-headline" id="Normalizing_Signatures">
      Normalizing Signatures
     </span>
    </h3>
    <p>Part of what makes this difficult at the moment is that settings (key=value pairs) do not have a one-to-one mapping with signatures. 
</p>
    <p>The setting foo may have these options for one command:
</p>
    <p><code>foo=(up|down)</code>
</p>
    <p>...but may have a different set of valid values for another command:
</p>
    <p><code>foo=(up|down|left|right)</code>
</p>
    <p>If all of the settings keys had one and only one signature, this would go far toward unifying and harmonizing the documentation (and would allow for really nifty content re-use in the documentation!). 
</p>
    <p>The downside, of course, is that this breaks the command interface in decidedly non-trial ways.
</p>
    <h2>
     <span id="Thanks!">
     </span>
     <span class="mw-headline" id="Thanks.21">
      Thanks!
     </span>
    </h2>
    <p>Any and all comment welcome!
</p>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-18
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/pm39_cmdref_revamp_proposal">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
