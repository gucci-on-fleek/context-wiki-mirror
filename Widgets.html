<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="style.css" rel="stylesheet">
  <link href="favicon.ico" rel="icon" sizes="32x32">
  <title>
   Widgets&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Widgets" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Widgets
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=924&diff=41409">2025-01-18</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <p>&lt; <a href="Document_layout_and_layers/Presentations.html" title="Document layout and layers/Presentations">Presentations</a> | <a href="References_notes_and_floats/PDF_navigation.html" title="References notes and floats/PDF navigation">PDFâ€¯navigation</a> &gt;
</p>
    <p>You can find more about interactive form elements in <a class="external text" href="http://www.pragma-ade.nl/general/manuals/mwidget-s.pdf" rel="nofollow">Widgets uncovered</a>. It&rsquo;s written for MkII, but still mostly valid.
</p>
    <p>Most of the following examples are from the manual.
</p>
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h3>
       Contents
      </h3>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#Fields">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         Fields
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-2">
         <a href="#Single_fields">
          <span class="tocnumber">
           1.1
          </span>
          <span class="toctext">
           Single fields
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-3">
         <a href="#Text_Entries">
          <span class="tocnumber">
           1.2
          </span>
          <span class="toctext">
           Text Entries
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-4">
         <a href="#Checkboxes">
          <span class="tocnumber">
           1.3
          </span>
          <span class="toctext">
           Checkboxes
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-5">
         <a href="#Radiobuttons">
          <span class="tocnumber">
           1.4
          </span>
          <span class="toctext">
           Radiobuttons
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-6">
           <a href="#Setup_for_questionnaire">
            <span class="tocnumber">
             1.4.1
            </span>
            <span class="toctext">
             Setup for questionnaire
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2 tocsection-7">
         <a href="#Fillin_fields">
          <span class="tocnumber">
           1.5
          </span>
          <span class="toctext">
           Fillin fields
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-8">
       <a href="#JavaScript">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         JavaScript
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-9">
         <a href="#Documentation">
          <span class="tocnumber">
           2.1
          </span>
          <span class="toctext">
           Documentation
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-10">
         <a href="#Examples">
          <span class="tocnumber">
           2.2
          </span>
          <span class="toctext">
           Examples
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-11">
           <a href="#Setting_a_default_value">
            <span class="tocnumber">
             2.2.1
            </span>
            <span class="toctext">
             Setting a default value
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-12">
           <a href="#Setting_the_current_date">
            <span class="tocnumber">
             2.2.2
            </span>
            <span class="toctext">
             Setting the current date
            </span>
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-13">
       <a href="#Tricks_and_Traps">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         Tricks and Traps
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-14">
         <a href="#General">
          <span class="tocnumber">
           3.1
          </span>
          <span class="toctext">
           General
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-15">
         <a href="#MkIV">
          <span class="tocnumber">
           3.2
          </span>
          <span class="toctext">
           MkIV
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-16">
         <a href="#MkII">
          <span class="tocnumber">
           3.3
          </span>
          <span class="toctext">
           MkII
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-17">
       <a href="#Samples">
        <span class="tocnumber">
         4
        </span>
        <span class="toctext">
         Samples
        </span>
       </a>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="Fields">
      Fields
     </span>
    </h2>
    <p>Create a field &ldquo;class&rdquo; with <tt><a href="Command/setupfield.html" title="Command/setupfield">\setupfield</a></tt>, then create single instances with <tt><a href="Command/definefield.html" title="Command/definefield">\definefield</a></tt>, finally typeset it with <tt><a href="Command/field.html" title="Command/field">\field</a></tt>.
</p>
    <p>That might look complicated, but you can use the same field several times, and the contents will automatically repeat themselves if you need the same content at several places, even on different pages. (Think e.g. of name, location and date in a set of forms.)
</p>
    <p><br>
Relevant commands:
</p>
    <ul>
     <li>
      <tt>
       <a href="Command/setupfield.html" title="Command/setupfield">
        \setupfield
       </a>
      </tt>
     </li>
     <li>
      <tt>
       <a href="Command/definefield.html" title="Command/definefield">
        \definefield
       </a>
       [name][type][setup name][content values][default content]
      </tt>
     </li>
     <li>
      <tt>
       <a href="Command/field.html" title="Command/field">
        \field
       </a>
       [name]
      </tt>
     </li>
    </ul>
    <p>Field types:
</p>
    <ul>
     <li>
      line: one line of text
     </li>
     <li>
      text: more lines of text
     </li>
     <li>
      radio: radiobutton (only one of a group can be active)
     </li>
     <li>
      check: checkbox
     </li>
     <li>
      signature: electronic signature (since 2016-03-11)
     </li>
    </ul>
    <h4>
     <span class="mw-headline" id="Single_fields">
      Single fields
     </span>
    </h4>
    <p>Since you often need fields only once, you can define your own shortcut macros:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupfield</span></span><span class="brx">[</span>MyFieldSetup<span class="brx">]</span><span class="brx">[</span>reset,horizontal<span class="brx">]</span><span class="brx">[</span>... options ...<span class="brx">]</span>
<span class="cs"><span class="systemcs">\define</span></span><span class="brx">[</span>1<span class="brx">]</span><span class="cs">\MyField</span><span class="br">{</span><span class="cs"><span class="stylecs">\definefield</span></span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span><span class="brx">[</span>line<span class="brx">]</span><span class="brx">[</span>MyFieldSetup<span class="brx">]</span><span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span><span class="br">}</span>
</pre>
    <h3>
     <span class="mw-headline" id="Text_Entries">
      Text Entries
     </span>
    </h3>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupfield</span></span><span class="brx">[</span>ShortLine<span class="brx">]</span><span class="brx">[</span>horizontal<span class="brx">]</span><span class="brx">[</span>width<span class="brx">=</span>2cm,height<span class="brx">=</span>2em<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definefield</span></span> <span class="brx">[</span>Email<span class="brx">]</span> <span class="brx">[</span>line<span class="brx">]</span> <span class="brx">[</span>ShortLine<span class="brx">]</span> <span class="brx">[</span><span class="brx">]</span> <span class="brx">[</span>sample@contextgarden.net<span class="brx">]</span>
<span class="cs"><span class="documentcs">\field</span></span> <span class="brx">[</span>Email<span class="brx">]</span> <span class="brx">[</span>your email<span class="brx">]</span>
</pre>
    <h3>
     <span class="mw-headline" id="Checkboxes">
      Checkboxes
     </span>
    </h3>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupfield</span></span><span class="brx">[</span>setup 3<span class="brx">]</span>
        <span class="brx">[</span>width<span class="brx">=</span>2cm, height<span class="brx">=</span>2cm,
        rulethickness<span class="brx">=</span>3pt, corner<span class="brx">=</span>round, framecolor<span class="brx">=</span>red<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definesymbol</span></span> <span class="brx">[</span>yes<span class="brx">]</span> <span class="brx">[</span><span class="br">{</span><span class="cs"><span class="documentcs">\externalfigure</span></span><span class="brx">[</span>mpcont.502<span class="brx">]</span><span class="br">}</span><span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesymbol</span></span> <span class="brx">[</span>no<span class="brx">]</span> <span class="brx">[</span><span class="brx">]</span>
<span class="cs"><span class="stylecs">\definefield</span></span> <span class="brx">[</span>checkme<span class="brx">]</span><span class="brx">[</span>check<span class="brx">]</span> <span class="brx">[</span>setup 3<span class="brx">]</span> <span class="brx">[</span>yes,no<span class="brx">]</span> <span class="brx">[</span>no<span class="brx">]</span>
<span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span>checkme<span class="brx">]</span>
</pre>
    <h3>
     <span class="mw-headline" id="Radiobuttons">
      Radiobuttons
     </span>
    </h3>
    <p>Example from the manual:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupfield</span></span> <span class="brx">[</span>LogoSetup<span class="brx">]</span>
        <span class="brx">[</span>width<span class="brx">=</span>4cm,
        height<span class="brx">=</span>4cm,
        frame<span class="brx">=</span>off,
        background<span class="brx">=</span>color,
        backgroundcolor<span class="brx">=</span>lightgray<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definefield</span></span><span class="brx">[</span>Logos<span class="brx">]</span> <span class="brx">[</span>radio<span class="brx">]</span> <span class="brx">[</span>LogoSetup<span class="brx">]</span><span class="brx">[</span>ConTeXt,PPCHTEX,TeXUtil<span class="brx">]</span> <span class="brx">[</span>PPCHTEX<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definesubfield</span></span> <span class="brx">[</span>ConTeXt<span class="brx">]</span> <span class="brx">[</span><span class="brx">]</span> <span class="brx">[</span>ConTeXtLogo<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesubfield</span></span> <span class="brx">[</span>PPCHTEX<span class="brx">]</span> <span class="brx">[</span><span class="brx">]</span> <span class="brx">[</span>PPCHTEXLogo<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesubfield</span></span> <span class="brx">[</span>TeXUtil<span class="brx">]</span> <span class="brx">[</span><span class="brx">]</span> <span class="brx">[</span>TeXUtilLogo<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definesymbol</span></span> <span class="brx">[</span>ConTeXtLogo<span class="brx">]</span> <span class="brx">[</span><span class="br">{</span><span class="cs"><span class="documentcs">\externalfigure</span></span><span class="brx">[</span>mpcont.502<span class="brx">]</span><span class="br">}</span><span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesymbol</span></span> <span class="brx">[</span>PPCHTEXLogo<span class="brx">]</span> <span class="brx">[</span><span class="br">{</span><span class="cs"><span class="documentcs">\externalfigure</span></span><span class="brx">[</span>mpcont.503<span class="brx">]</span><span class="br">}</span><span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesymbol</span></span> <span class="brx">[</span>TeXUtilLogo<span class="brx">]</span> <span class="brx">[</span><span class="br">{</span><span class="cs"><span class="documentcs">\externalfigure</span></span><span class="brx">[</span>mpcont.504<span class="brx">]</span><span class="br">}</span><span class="brx">]</span>

<span class="cs">\hbox</span> to <span class="cs">\hsize</span><span class="br">{</span><span class="cs">\hss</span><span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span>ConTeXt<span class="brx">]</span><span class="cs">\hss</span><span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span>PPCHTEX<span class="brx">]</span><span class="cs">\hss</span><span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span>TeXUtil<span class="brx">]</span><span class="cs">\hss</span><span class="br">}</span>
</pre>
    <p>As usual, first you need to define a class of fields (<tt><a href="Command/setupfield.html" title="Command/setupfield">\setupfield</a></tt>). Then you define the (invisible) group of radio buttons (<tt><a href="Command/definefield.html" title="Command/definefield">\definefield</a></tt> with "radio"). At last you define the single radio buttons with <tt><a href="Command/definesubfield.html" title="Command/definesubfield">\definesubfield</a></tt>.
</p>
    <p>Arguments of <tt><a href="Command/definefield.html" title="Command/definefield">\definefield</a></tt>:
</p>
    <ol>
     <li>
      field name
     </li>
     <li>
      field type "radio"
     </li>
     <li>
      setup class, as defined by
      <tt>
       <a href="Command/setupfield.html" title="Command/setupfield">
        \setupfield
       </a>
      </tt>
     </li>
     <li>
      list of field names that should be part of the group
     </li>
     <li>
      name of default (activated) button
     </li>
    </ol>
    <p>Arguments of <tt><a href="Command/definesubfield.html" title="Command/definesubfield">\definesubfield</a></tt>:
</p>
    <ol>
     <li>
      field name
     </li>
     <li>
      setup class (default is inherited, but you can use a different one)
     </li>
     <li>
      content symbol, defined by
      <tt>
       <a href="Command/definesymbol.html" title="Command/definesymbol">
        \definesymbol
       </a>
      </tt>
     </li>
    </ol>
    <h4>
     <span class="mw-headline" id="Setup_for_questionnaire">
      Setup for questionnaire
     </span>
    </h4>
    <p>If you need a lot of similar radiobuttons, like in a questionnaire where you answer every question with a range choice, a meta definition makes sense. Fortunately it&rsquo;s quite easy:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setupinteraction</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setupfield</span></span> <span class="brx">[</span>ChoiceSetup<span class="brx">]</span><span class="brx">[</span>width<span class="brx">=</span>1em,height<span class="brx">=</span>1em,corner<span class="brx">=</span>00<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definesymbol</span></span><span class="brx">[</span>X<span class="brx">]</span><span class="brx">[</span>X<span class="brx">]</span> <span class="comment">% replace with dingbat symbol</span>

<span class="cs">\def</span><span class="cs">\Choice</span><span class="brx">#</span>1<span class="br">{</span><span class="cs"><span class="stylecs">\definefield</span></span><span class="brx">[</span><span class="brx">#</span>1:main<span class="brx">]</span><span class="brx">[</span>radio<span class="brx">]</span><span class="brx">[</span>ChoiceSetup<span class="brx">]</span><span class="brx">[</span><span class="brx">#</span>1:1,<span class="brx">#</span>1:2,<span class="brx">#</span>1:3,<span class="brx">#</span>1:4,<span class="brx">#</span>1:5,<span class="brx">#</span>1:0<span class="brx">]</span><span class="brx">[</span><span class="brx">#</span>1:0<span class="brx">]</span><span class="comment">%</span>
<span class="cs"><span class="stylecs">\definesubfield</span></span> <span class="brx">[</span><span class="brx">#</span>1:1<span class="brx">]</span><span class="brx">[</span><span class="brx">]</span><span class="brx">[</span>X<span class="brx">]</span><span class="comment">%</span>
<span class="cs"><span class="stylecs">\definesubfield</span></span> <span class="brx">[</span><span class="brx">#</span>1:2<span class="brx">]</span><span class="brx">[</span><span class="brx">]</span><span class="brx">[</span>X<span class="brx">]</span><span class="comment">%</span>
<span class="cs"><span class="stylecs">\definesubfield</span></span> <span class="brx">[</span><span class="brx">#</span>1:3<span class="brx">]</span><span class="brx">[</span><span class="brx">]</span><span class="brx">[</span>X<span class="brx">]</span><span class="comment">%</span>
<span class="cs"><span class="stylecs">\definesubfield</span></span> <span class="brx">[</span><span class="brx">#</span>1:4<span class="brx">]</span><span class="brx">[</span><span class="brx">]</span><span class="brx">[</span>X<span class="brx">]</span><span class="comment">%</span>
<span class="cs"><span class="stylecs">\definesubfield</span></span> <span class="brx">[</span><span class="brx">#</span>1:5<span class="brx">]</span><span class="brx">[</span><span class="brx">]</span><span class="brx">[</span>X<span class="brx">]</span><span class="comment">%</span>
<span class="cs"><span class="stylecs">\definesubfield</span></span> <span class="brx">[</span><span class="brx">#</span>1:0<span class="brx">]</span><span class="brx">[</span><span class="brx">]</span><span class="brx">[</span>X<span class="brx">]</span><span class="comment">%</span>
<span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span><span class="brx">#</span>1:1<span class="brx">]</span>\,<span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span><span class="brx">#</span>1:2<span class="brx">]</span>\,<span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span><span class="brx">#</span>1:3<span class="brx">]</span>\,<span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span><span class="brx">#</span>1:4<span class="brx">]</span>\,<span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span><span class="brx">#</span>1:5<span class="brx">]</span><span class="cs">\hskip</span>1em<span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span><span class="brx">#</span>1:0<span class="brx">]</span><span class="br">}</span>

<span class="cs">\def</span><span class="cs">\ChoiceTitle</span><span class="br">{</span><span class="cs">\hfill</span>$-$<span class="cs">\hskip</span>4em$+$<span class="cs">\hskip</span>1.25em?\ <span class="cs"><span class="stylecs">\strut</span></span><span class="cs">\par</span><span class="br">}</span>

<span class="cs">\def</span><span class="cs">\Question</span><span class="br">{</span><span class="cs"><span class="systemcs">\dosingleempty</span></span><span class="cs">\doQuestion</span><span class="br">}</span>
<span class="comment">% We need the "optional" parameter as reference</span>
<span class="cs">\def</span><span class="cs">\doQuestion</span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span><span class="brx">#</span>2<span class="br">{</span><span class="comment">%</span>
 <span class="cs">\iffirstargument</span>
 <span class="brx">#</span>2<span class="cs"><span class="documentcs">\dotfill</span></span><span class="cs">\Choice</span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="cs">\par</span>
 <span class="cs">\else</span>
 <span class="brx">#</span>2<span class="cs">\par</span>
 <span class="cs">\fi</span>
<span class="br">}</span>

<span class="cs"><span class="documentcs">\starttext</span></span>

<span class="cs">\ChoiceTitle</span>
<span class="cs">\Question</span><span class="brx">[</span>q:ctx<span class="brx">]</span><span class="br">{</span>How much do you love <span class="protectedcs">\CONTEXT?</span><span class="br">}</span>
<span class="cs">\Question</span><span class="brx">[</span>q:lua<span class="brx">]</span><span class="br">{</span>How are your Lua skills?<span class="br">}</span>
<span class="cs">\Question</span><span class="brx">[</span>q:xml<span class="brx">]</span><span class="br">{</span>How often do you dream in XML?<span class="br">}</span>

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="1240" src="wikiteximage/fa5cb4988138cefb8023bdb47ecdbb22.webp" width="874">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Fillin_fields">
      Fillin fields
     </span>
    </h3>
    <p><tt><a href="Command/fillinfield.html" title="Command/fillinfield">\fillinfield</a></tt> is meant for clozes (texts with gaps, like in questionnaires) and defined in the <a class="external text" href="https://source.contextgarden.net/tex/context/base/mkiv/m-fields.mkiv" rel="nofollow">fields</a> module (i.e. you need <tt><a href="Command/usemodule.html" title="Command/usemodule">\usemodule</a>[fields]</tt>).
</p>
    <pre class="tex"><span class="cs">\fillinfield</span><span class="brx">[</span>name<span class="brx">]</span><span class="br">{</span>text that defines field length<span class="br">}</span>
</pre>
    <p>Disable default validation with <tt><a class="new" href="index.php?title=Command/setupfieldcategory&action=edit&redlink=1.html" title="Command/setupfieldcategory (page does not exist)">\setupfieldcategory</a>[fillinfield][validate=]</tt>, because it removes the contents from the field!
</p>
    <p>There are some commands with a similar purpose in the <a class="external text" href="https://source.contextgarden.net/tex/context/base/mkiv/pack-mrl.mkxl" rel="nofollow">core</a> that don&rsquo;t use fields:
</p>
    <ul>
     <li>
      <tt>
       <a href="Command/fillinline.html" title="Command/fillinline">
        \fillinline
       </a>
      </tt>
     </li>
     <li>
      <tt>
       <a href="Command/fillintext.html" title="Command/fillintext">
        \fillintext
       </a>
      </tt>
     </li>
     <li>
      <tt>
       <a href="Command/fillinrules.html" title="Command/fillinrules">
        \fillinrules
       </a>
      </tt>
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="JavaScript">
      JavaScript
     </span>
    </h2>
    <p>If you want to check or otherwise process the input of your forms, you need JavaScript to handle interaction. For simple forms without input validation, you don&rsquo;t need this.
</p>
    <p><b>Beware:</b> JavaScript in PDFs works only in Adobe Acrobat Reader/Professional (Win/Mac only) and very few other PDF editors, e.g. <a class="external text" href="https://www.qoppa.com" rel="nofollow">Qoppa</a>&rsquo;s PDF Studio (also on Linux) supports JS even in the free viewer, but used to crash on all forms created with TeX in the 2019 version, maybe this is fixed now.
</p>
    <pre class="tex"><span class="cs"><span class="systemcs">\startJSpreamble</span></span> <span class="br">{</span>name<span class="br">}</span>
MyCounter <span class="brx">=</span> 0&nbsp;;
<span class="cs"><span class="systemcs">\stopJSpreamble</span></span>

<span class="cs"><span class="systemcs">\startJScode</span></span> <span class="br">{</span>increment<span class="br">}</span>
MyCounter <span class="brx">=</span> MyCounter + 1&nbsp;; // or: ++MyCounter&nbsp;;
<span class="cs"><span class="systemcs">\stopJScode</span></span>

<span class="cs"><span class="documentcs">\goto</span></span> <span class="br">{</span>advance by one<span class="br">}</span> <span class="brx">[</span>JS<span class="brx">(</span>increment<span class="brx">)</span><span class="brx">]</span>
</pre>
    <p>You can pass values to a JS function:
</p>
    <pre class="tex"><span class="cs"><span class="systemcs">\startJScode</span></span> <span class="br">{</span>increment<span class="br">}</span>
MyCounter <span class="brx">=</span> MyCounter + JS_V_1&nbsp;;
<span class="cs"><span class="systemcs">\stopJScode</span></span>

<span class="cs"><span class="documentcs">\goto</span></span> <span class="br">{</span>advance by five<span class="br">}</span> <span class="brx">[</span>JS<span class="brx">(</span>increment<span class="br">{</span>V<span class="br">{</span>5<span class="br">}</span><span class="br">}</span><span class="brx">)</span><span class="brx">]</span>
</pre>
    <ul>
     <li>
      V{} is verbose, defaults to string
     </li>
     <li>
      S{} = as string
     </li>
     <li>
      R{} = as reference
     </li>
     <li>
      JS_V_n, JS_S_n, JS_R_n are the names of the variables
     </li>
     <li>
      JS_N keeps the number of arguments
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Documentation">
      Documentation
     </span>
    </h3>
    <p>JavaScript in Acrobat is different than in a web context. Documentation is sparse.
Debugging is only possible in Acrobat Pro, and also there very inconvenient.
Additionally, Acrobat&rsquo;s possibilities change with every version.
</p>
    <ul>
     <li>
      <a class="external text" href="http://www.adobe.com/devnet/acrobat/javascript.html" rel="nofollow">
       JavaScript documentation at Adobe&rsquo;s
      </a>
     </li>
     <li>
      <a class="external text" href="http://help.adobe.com/livedocs/acrobat_sdk/9.1/Acrobat9_1_HTMLHelp/wwhelp/wwhimpl/js/html/wwhelp.htm?href=JS_Dev_Tools.72.1.html&accessible=true" rel="nofollow">
       JavaScript API Reference for Acrobat 9
      </a>
     </li>
     <li>
      <a class="external text" href="https://acrobatusers.com/tutorials/javascript_console" rel="nofollow">
       Tutorial on JS in Acrobat 11
      </a>
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Examples">
      Examples
     </span>
    </h3>
    <h4>
     <span class="mw-headline" id="Setting_a_default_value">
      Setting a default value
     </span>
    </h4>
    <p>Here we set a date field to the current date on opening the document.
Additionally we have a button that can hide/show a form field.
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="stylecs">\setupinteraction</span></span>	<span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>

<span class="cs"><span class="systemcs">\startJSpreamble</span></span> <span class="br">{</span>EXAMPLE<span class="br">}</span> used now
var d <span class="brx">=</span> new Date<span class="brx">(</span><span class="brx">)</span>;
var df <span class="brx">=</span> this.getField<span class="brx">(</span>"CurDate"<span class="brx">)</span>;
df.value <span class="brx">=</span> util.printd<span class="brx">(</span>"dd.mm.yyyy", d<span class="brx">)</span>;

function toggleField<span class="brx">(</span><span class="brx">)</span><span class="br">{</span>
	var f <span class="brx">=</span> this.getField<span class="brx">(</span>"CurDate"<span class="brx">)</span>;
	f.display <span class="brx">=</span>&nbsp;! f.display;
<span class="br">}</span>
<span class="cs"><span class="systemcs">\stopJSpreamble</span></span>

<span class="cs"><span class="stylecs">\setupfield</span></span><span class="brx">[</span>shortString<span class="brx">]</span><span class="brx">[</span>reset,horizontal<span class="brx">]</span><span class="brx">[</span>height<span class="brx">=</span>5mm, width<span class="brx">=</span>50mm, frame<span class="brx">=</span>off, bottomframe<span class="brx">=</span>on<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definefield</span></span><span class="brx">[</span>CurDate<span class="brx">]</span><span class="brx">[</span>line<span class="brx">]</span><span class="brx">[</span>shortString<span class="brx">]</span><span class="brx">[</span><span class="brx">]</span><span class="brx">[</span>JavaScript should replace this text with the current date<span class="brx">]</span>

Current date: <span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span>CurDate<span class="brx">]</span>

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
    <h4>
     <span class="mw-headline" id="Setting_the_current_date">
      Setting the current date
     </span>
    </h4>
    <p>Similar, but more usable than the example above:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\starttext</span></span>

<span class="cs"><span class="stylecs">\setupinteraction</span></span> <span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>

<span class="cs"><span class="systemcs">\startJSpreamble</span></span> <span class="br">{</span>EXAMPLE<span class="br">}</span> used now
function Dummy<span class="brx">(</span><span class="brx">)</span><span class="br">{</span>
	return 0;
<span class="br">}</span>

function setCurrentDate<span class="brx">(</span>fieldname<span class="brx">)</span> <span class="br">{</span>
	var f <span class="brx">=</span> this.getField<span class="brx">(</span>fieldname<span class="brx">)</span>;
	f.value <span class="brx">=</span> util.printd<span class="brx">(</span>"yyyy-mm-dd", new Date<span class="brx">(</span><span class="brx">)</span><span class="brx">)</span>;
<span class="br">}</span>

setCurrentDate<span class="brx">(</span>"myDateField"<span class="brx">)</span>;
<span class="cs"><span class="systemcs">\stopJSpreamble</span></span>

<span class="cs"><span class="stylecs">\setupfield</span></span><span class="brx">[</span>dateString<span class="brx">]</span><span class="brx">[</span>reset,horizontal<span class="brx">]</span><span class="brx">[</span>width<span class="brx">=</span>5em,option<span class="brx">=</span>printable<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definefield</span></span><span class="brx">[</span>myDateField<span class="brx">]</span><span class="brx">[</span>line<span class="brx">]</span><span class="brx">[</span>dateString<span class="brx">]</span><span class="brx">[</span><span class="brx">]</span><span class="brx">[</span>JavaScript should replace this text with the current date<span class="brx">]</span>

Current date: <span class="cs"><span class="documentcs">\field</span></span><span class="brx">[</span>myDateField<span class="brx">]</span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
    <h2>
     <span class="mw-headline" id="Tricks_and_Traps">
      Tricks and Traps
     </span>
    </h2>
    <h3>
     <span class="mw-headline" id="General">
      General
     </span>
    </h3>
    <ul>
     <li>
      Nothing happens without
      <tt>
       <a href="Command/setupinteraction.html" title="Command/setupinteraction">
        \setupinteraction
       </a>
       [state=start]
      </tt>
      ! If you need an interactive version and a plain one (e.g. for print), then you must replace your form fields with something else (e.g.
      <tt>
       <a href="Command/framed.html" title="Command/framed">
        \framed
       </a>
      </tt>
      ). Use
      <a href="Input_and_compilation/Conditional_processing_with_Modes.html" title="Input and compilation/Conditional processing with Modes">
       Conditional processing with Modes
      </a>
      .
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="MkIV">
      MkIV
     </span>
    </h3>
    <ul>
     <li>
      JS code was only copied to the PDF if there was a
      <tt>
       <a href="Command/goto.html" title="Command/goto">
        \goto
       </a>
      </tt>
      referencing one of the defined functions! &ndash; This is actually a feature, you can get your JS without
      <tt>
       <a href="Command/goto.html" title="Command/goto">
        \goto
       </a>
      </tt>
      , using the magic incantation
      <code>used now</code>
      , as in the default value example. (This was fixed.)
     </li>
    </ul>
    <ul>
     <li>
      JS code for default values doesn&rsquo;t work (reported 2015-04-01, still true 2015-10-07); default values are always used verbatim. (Unchecked if this is fixed.)
     </li>
    </ul>
    <ul>
     <li>
      There is no
      <s>
       <tt>
        <a href="Command/setupfields.html" title="Command/setupfields">
         \setupfields
        </a>
       </tt>
      </s>
      (plural)!
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="MkII">
      MkII
     </span>
    </h3>
    <p>This helps debugging:
</p>
    <pre class="tex"><span class="cs">\tracefieldstrue</span>
<span class="cs">\showfields</span>  <span class="comment">% typeset a table of field relations</span>
<span class="cs">\logfields</span>   <span class="comment">% logs field descriptions to a file fields.log</span>
</pre>
    <h2>
     <span class="mw-headline" id="Samples">
      Samples
     </span>
    </h2>
    <ul>
     <li>
      <a href="Input_and_compilation/Sample_documents/Midgard_PC_sheet.html" title="Input and compilation/Sample documents/Midgard PC sheet">
       Midgard PC sheet
      </a>
      (RPG character sheet with lots of text fields in tables)
     </li>
    </ul>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-10
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Widgets">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
