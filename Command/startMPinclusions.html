<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../style.css" rel="stylesheet">
  <link href="../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Command/startMPinclusions&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Command/startMPinclusions" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Command/startMPinclusions
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=7038&diff=35913">2025-01-12</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h2>
       Contents
      </h2>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1">
       <a href="#.5CstartMPinclusions_..._.5CstopMPinclusions">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         \startMPinclusions ... \stopMPinclusions
        </span>
       </a>
       <ul>
        <li class="toclevel-2">
         <a href="#Summary">
          <span class="tocnumber">
           1.1
          </span>
          <span class="toctext">
           Summary
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#Settings">
          <span class="tocnumber">
           1.2
          </span>
          <span class="toctext">
           Settings
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#Description">
          <span class="tocnumber">
           1.3
          </span>
          <span class="toctext">
           Description
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#Examples">
          <span class="tocnumber">
           1.4
          </span>
          <span class="toctext">
           Examples
          </span>
         </a>
         <ul>
          <li class="toclevel-3">
           <a href="#Example_1">
            <span class="tocnumber">
             1.4.1
            </span>
            <span class="toctext">
             Example 1
            </span>
           </a>
          </li>
          <li class="toclevel-3">
           <a href="#Multiple_Inclusions">
            <span class="tocnumber">
             1.4.2
            </span>
            <span class="toctext">
             Multiple Inclusions
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2">
         <a href="#Notes">
          <span class="tocnumber">
           1.5
          </span>
          <span class="toctext">
           Notes
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#See_also">
          <span class="tocnumber">
           1.6
          </span>
          <span class="toctext">
           See also
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#Help_from_ConTeXt-Mailinglist.2FForum">
          <span class="tocnumber">
           1.7
          </span>
          <span class="toctext">
           Help from ConTeXt-Mailinglist/Forum
          </span>
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="Summary">
      Summary
     </span>
    </h2>
    <div class="cd:shortdesc">
     <p>The environment <tt>\startMPinclusions ... \stopMPinclusions</tt> is used for general MetaPost setups.
</p>
    </div>
    <h2>
     <span class="mw-headline" id="Settings">
      Settings
     </span>
    </h2>
    <div class="cd:command1">
     <table cellpadding="3" cellspacing="4" class="cmd">
      <tbody>
       <tr>
        <td class="cmd" colspan="2">\startMPinclusions<span class="arg1"><i>[...]</i></span><span class="arg2"><i>{...}</i></span> ... \stopMPinclusions</td>
       </tr>
       <tr class="arg1" valign="top">
        <td class="cmd">[...]</td>
        <td>+ </td>
       </tr>
       <tr class="arg2" valign="top">
        <td class="cmd">{...}</td>
        <td>metafun minifun extrafun lessfun doublefun binaryfun decimalfun mprun metapost nofun doublepost binarypost decimalpost simplefun </td>
       </tr>
      </tbody>
     </table>
     <br>
     <table cellpadding="3" cellspacing="4" width="100%">
     </table>
    </div>
    <h2>
     <span class="mw-headline" id="Description">
      Description
     </span>
    </h2>
    <div class="cd:description">
     Inside
     <tt>
      <a class="mw-selflink selflink">
       \startMPinclusions
      </a>
     </tt>
     one can specify MetaFun code that you would like to be present in your MetaPost instance. It is generally used to define MetaPost functions, or to input files that contain them.
    </div>
    <h2>
     <span class="mw-headline" id="Examples">
      Examples
     </span>
    </h2>
    <div class="cd:examples">
     <h3>
      <span class="mw-headline" id="Example_1">
       Example 1
      </span>
     </h3>
     <div class="mw-collapsible">
      <p>The following example defines a create_wave macro that is then used for the page background.
</p>
      <pre class="tex"><span class="cs"><span class="stylecs">\startMPinclusions</span></span>
  vardef create_wave <span class="brx">=</span>
    path wave;
    wave&nbsp;:<span class="brx">=</span> <span class="brx">(</span>0, 0<span class="brx">)</span>;

    <span class="comment">% Number of bezier points along the wave.</span>
    wave_resolution&nbsp;:<span class="brx">=</span> 20;

    <span class="comment">% Number of full wave cycles.</span>
    wave_cycles&nbsp;:<span class="brx">=</span> 2;

    for x <span class="brx">=</span> 0 step <span class="brx">(</span>1 / wave_resolution<span class="brx">)</span> until 2 wave_cycles:
      wave&nbsp;:<span class="brx">=</span> wave .. <span class="brx">(</span>x, sin<span class="brx">(</span> x * pi <span class="brx">)</span><span class="brx">)</span>;
    endfor;

    <span class="comment">% Return the path</span>
    wave
  enddef;
<span class="cs"><span class="stylecs">\stopMPinclusions</span></span>

<span class="cs"><span class="stylecs">\startuseMPgraphic</span></span><span class="br">{</span>page:ThemeBackground<span class="br">}</span>
  path wave;
  wave&nbsp;:<span class="brx">=</span> create_wave;
  draw wave xyscaled<span class="brx">(</span> 60, 20 <span class="brx">)</span> withpen pencircle scaled 1mm;
<span class="cs"><span class="stylecs">\stopuseMPgraphic</span></span>

<span class="cs"><span class="stylecs">\defineoverlay</span></span><span class="brx">[</span>page:ThemeBackground<span class="brx">]</span><span class="brx">[</span><span class="cs"><span class="stylecs">\uniqueMPgraphic</span></span><span class="br">{</span>page:ThemeBackground<span class="br">}</span><span class="brx">]</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
  <span class="cs"><span class="stylecs">\setupbackgrounds</span></span><span class="brx">[</span>page<span class="brx">]</span><span class="brx">[</span>background<span class="brx">=</span><span class="br">{</span>page:ThemeBackground<span class="br">}</span><span class="brx">]</span>
  <span class="cs"><span class="documentcs">\startchapter</span></span>
  <span class="cs"><span class="documentcs">\input</span></span> knuth
  <span class="cs"><span class="documentcs">\input</span></span> zapf
  <span class="cs"><span class="documentcs">\input</span></span> knuth
  <span class="cs"><span class="documentcs">\stopchapter</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </div>
     <h3>
      <span class="mw-headline" id="Multiple_Inclusions">
       Multiple Inclusions
      </span>
     </h3>
     <div class="mw-collapsible">
      <p>To use multiple <tt><a class="mw-selflink selflink">\startMPinclusions</a></tt> that should be combined, use <i>[+]</i>. For example, the following code will fail because the second inclusion overwrites the first:
</p>
      <pre class="tex"><span class="cs"><span class="stylecs">\startMPinclusions</span></span>
   path a&nbsp;;
<span class="cs"><span class="stylecs">\stopMPinclusions</span></span>

<span class="cs"><span class="stylecs">\startMPinclusions</span></span>
   a&nbsp;:<span class="brx">=</span> <span class="brx">(</span>0,0<span class="brx">)</span> -- <span class="brx">(</span>1cm,0<span class="brx">)</span>&nbsp;;
<span class="cs"><span class="stylecs">\stopMPinclusions</span></span>
</pre>
      <p>Use <i>[+]</i> to appended the second inclusion after the first:
</p>
      <pre class="tex"><span class="cs"><span class="stylecs">\startMPinclusions</span></span>
   path a&nbsp;;
<span class="cs"><span class="stylecs">\stopMPinclusions</span></span>

<span class="cs"><span class="stylecs">\startMPinclusions</span></span><span class="brx">[</span>+<span class="brx">]</span>
   a&nbsp;:<span class="brx">=</span> <span class="brx">(</span>0,0<span class="brx">)</span> -- <span class="brx">(</span>1cm,0<span class="brx">)</span>&nbsp;;
<span class="cs"><span class="stylecs">\stopMPinclusions</span></span>
</pre>
     </div>
    </div>
    <h2>
     <span class="mw-headline" id="Notes">
      Notes
     </span>
    </h2>
    <div class="cd:notes">
    </div>
    <h2>
     <span class="mw-headline" id="See_also">
      See also
     </span>
    </h2>
    <div class="cd:seealso">
     <ul>
      <li>
       <a class="extiw" href="http://source.contextgarden.net/meta-ini.mkiv" title="source:meta-ini.mkiv">
        meta-ini.mkiv
       </a>
      </li>
     </ul>
    </div>
    <h2>
     <span id="Help_from_ConTeXt-Mailinglist/Forum">
     </span>
     <span class="mw-headline" id="Help_from_ConTeXt-Mailinglist.2FForum">
      Help from ConTeXt-Mailinglist/Forum
     </span>
    </h2>
    <div>
     <p>All issues with:
</p>
     <ul>
      <li>
       <a class="external text" href="http://www.mail-archive.com/search?l=ntg-context%40ntg.nl&q=\startMPinclusions+sort:newest" rel="nofollow">
        \startMPinclusions on the mailing list (all results)
       </a>
      </li>
      <li>
       <a class="external text" href="http://www.mail-archive.com/search?l=ntg-context%40ntg.nl&q=subject:\startMPinclusions+sort:newest" rel="nofollow">
        \startMPinclusions on the mailing list (subject only)
       </a>
      </li>
      <li>
       <a class="external text" href="https://tex.stackexchange.com/search?q=%5Bcontext%5D+\startMPinclusions" rel="nofollow">
        \startMPinclusions on stack exchange
       </a>
      </li>
      <li>
       <a class="external text" href="http://source.contextgarden.net/?search=\startMPinclusions" rel="nofollow">
        \startMPinclusions in ConTeXt's source
       </a>
      </li>
     </ul>
    </div>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-10
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Command/startMPinclusions">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
