<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../style.css" rel="stylesheet">
  <link href="../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Command/groupedcommand&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Command/groupedcommand" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Command/groupedcommand
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=4213&diff=25015">2020-08-29</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <h2>
     <span id="Syntax_(autogenerated)">
     </span>
     <span class="mw-headline" id="Syntax_.28autogenerated.29">
      <a class="mw-redirect" href="../Help:Reference.html" title="Help:Reference">
       Syntax
      </a>
      (autogenerated)
     </span>
    </h2>
    <table cellpadding="3" cellspacing="4" class="cmd">
     <tbody>
      <tr>
       <td class="cmd" colspan="2">\groupedcommand<span class="arg1">{...}</span><span class="arg2">{...}</span></td>
      </tr>
      <tr class="arg1" valign="top">
       <td class="cmd">{...}</td>
       <td><a class="cmdvalue" href="../Commandvalue/command.html" title="Commandvalue/command">command</a> </td>
      </tr>
      <tr class="arg2" valign="top">
       <td class="cmd">{...}</td>
       <td><a class="cmdvalue" href="../Commandvalue/command.html" title="Commandvalue/command">command</a> </td>
      </tr>
     </tbody>
    </table>
    <h2>
     <span class="mw-headline" id="Syntax">
      <a class="mw-redirect" href="../Help:Reference.html" title="Help:Reference">
       Syntax
      </a>
     </span>
    </h2>
    <table cellpadding="2" cellspacing="4" class="cmd">
     <tbody>
      <tr>
       <td class="cmd" colspan="2">\groupedcommand<span class="first">{...}</span><span class="second">{...}</span></td>
      </tr>
      <tr class="first" valign="top">
       <td class="cmd">{...}</td>
       <td><i>before</i></td>
      </tr>
      <tr class="second" valign="top">
       <td class="cmd">{...}</td>
       <td><i>after</i></td>
      </tr>
     </tbody>
    </table>
    <h2>
     <span class="mw-headline" id="Description">
      Description
     </span>
    </h2>
    <p><tt><a class="mw-selflink selflink">\groupedcommand</a></tt> is used for defining commands that might receive a verbatim environment as their argument, or a block wrapped in <tt><a class="new" href="../index.php?title=Command/bgroup&action=edit&redlink=1.html" title="Command/bgroup (page does not exist)">\bgroup</a>...\egroup</tt>.
</p>
    <pre class="tex"><span class="cs">\def</span><span class="cs">\dostuff</span><span class="br">{</span><span class="cs"><span class="systemcs">\groupedcommand</span></span><span class="br">{</span>...before...<span class="br">}</span><span class="br">{</span>...after...<span class="br">}</span><span class="br">}</span>
</pre>
    <p>is a robust implementation of the more na&iuml;ve pattern
</p>
    <pre class="tex"><span class="cs">\def</span><span class="cs">\dostuff</span><span class="brx">#</span>1<span class="br">{</span>...before...<span class="brx">#</span>1...after...<span class="br">}</span>
</pre>
    <p>The first problem with the na&iuml;ve approach: the tokens that form <code>#1</code> are fixed the the moment the argument is read in. Normally this is no problem, but e.g. verbatim environments adapt the catcodes of characters and therefore are not always happy with already fixed tokens.
</p>
    <p>Another problem arises when the argument is grouped not by <code>{}</code> but by <tt><a class="new" href="../index.php?title=Command/bgroup&action=edit&redlink=1.html" title="Command/bgroup (page does not exist)">\bgroup</a></tt> and <tt><a class="new" href="../index.php?title=Command/egroup&action=edit&redlink=1.html" title="Command/egroup (page does not exist)">\egroup</a></tt>. Such an argument fails, because the <tt><a class="new" href="../index.php?title=Command/bgroup&action=edit&redlink=1.html" title="Command/bgroup (page does not exist)">\bgroup</a></tt> is seen as the argument (which is quite normal).
</p>
    <p>If you use <code>\groupedcommand</code>, the argument is identified and processed correctly.
</p>
    <h2>
     <span class="mw-headline" id="Example">
      Example
     </span>
    </h2>
    <pre class="tex"><span class="comment">% Don't write this</span>
<span class="cs">\def</span><span class="cs"><span class="documentcs">\cite</span></span><span class="brx">#</span>1<span class="comment">%</span>
  <span class="br">{</span><span class="cs">\rightquote</span><span class="cs">\rightquote</span><span class="brx">#</span>1<span class="cs">\leftquote</span><span class="cs">\leftquote</span><span class="br">}</span>

<span class="comment">% Write this, instead.</span>
<span class="cs">\def</span><span class="cs"><span class="documentcs">\cite</span></span><span class="comment">%</span>
  <span class="br">{</span><span class="cs"><span class="systemcs">\groupedcommand</span></span><span class="br">{</span><span class="cs">\rightquote</span><span class="cs">\rightquote</span><span class="br">}</span><span class="br">{</span><span class="cs">\leftquote</span><span class="cs">\leftquote</span><span class="br">}</span><span class="br">}</span>
</pre>
    <p>Another example, where the item to process is a paragraph:
</p>
    <pre class="tex"><span class="cs">\def</span><span class="cs">\BoldRaggedCenter</span><span class="comment">%</span>
  <span class="br">{</span><span class="cs"><span class="systemcs">\groupedcommand</span></span><span class="br">{</span><span class="cs"><span class="stylecs">\raggedcenter</span></span><span class="cs">\bf</span><span class="br">}</span><span class="br">{</span><span class="cs">\par</span><span class="br">}</span><span class="br">}</span>
</pre>
    <h2>
     <span class="mw-headline" id="See_also">
      See also
     </span>
    </h2>
    <ul>
     <li>
      <a class="external text" href="https://source.contextgarden.net/tex/context/base/mkiv/syst-ext.mkii" rel="nofollow">
       syst-ext.mkii
      </a>
     </li>
    </ul>
    <h2>
     <span id="Help_from_ConTeXt-Mailinglist/Forum">
     </span>
     <span class="mw-headline" id="Help_from_ConTeXt-Mailinglist.2FForum">
      Help from ConTeXt-Mailinglist/Forum
     </span>
    </h2>
    <p>All issues with:
</p>
    <ul>
     <li>
      <a class="external text" href="http://www.mail-archive.com/search?l=ntg-context%40ntg.nl&q=groupedcommand+sort:newest" rel="nofollow">
       groupedcommand on the mailing list (all results)
      </a>
     </li>
     <li>
      <a class="external text" href="http://www.mail-archive.com/search?l=ntg-context%40ntg.nl&q=subject:groupedcommand+sort:newest" rel="nofollow">
       groupedcommand on the mailing list (subject only)
      </a>
     </li>
     <li>
      <a class="external text" href="https://tex.stackexchange.com/search?q=%5Bcontext%5D+groupedcommand" rel="nofollow">
       groupedcommand on stack exchange
      </a>
     </li>
     <li>
      <a class="external text" href="http://source.contextgarden.net/?search=groupedcommand" rel="nofollow">
       groupedcommand in ConTeXt's source
      </a>
     </li>
    </ul>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-12
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Command/groupedcommand">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
