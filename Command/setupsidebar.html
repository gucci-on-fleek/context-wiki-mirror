<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../style.css" rel="stylesheet">
  <link href="../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Command/setupsidebar&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Command/setupsidebar" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Command/setupsidebar
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=6417&diff=32827">2021-10-28</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h2>
       Contents
      </h2>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1">
       <a href="#.5Csetupsidebar">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         \setupsidebar
        </span>
       </a>
       <ul>
        <li class="toclevel-2">
         <a href="#Summary">
          <span class="tocnumber">
           1.1
          </span>
          <span class="toctext">
           Summary
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#Settings">
          <span class="tocnumber">
           1.2
          </span>
          <span class="toctext">
           Settings
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#Description">
          <span class="tocnumber">
           1.3
          </span>
          <span class="toctext">
           Description
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#Examples">
          <span class="tocnumber">
           1.4
          </span>
          <span class="toctext">
           Examples
          </span>
         </a>
         <ul>
          <li class="toclevel-3">
           <a href="#Example_1">
            <span class="tocnumber">
             1.4.1
            </span>
            <span class="toctext">
             Example 1
            </span>
           </a>
          </li>
          <li class="toclevel-3">
           <a href="#Custom_fancy_sidebars">
            <span class="tocnumber">
             1.4.2
            </span>
            <span class="toctext">
             Custom fancy sidebars
            </span>
           </a>
          </li>
          <li class="toclevel-3">
           <a href="#The_location_parameter">
            <span class="tocnumber">
             1.4.3
            </span>
            <span class="toctext">
             The location parameter
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2">
         <a href="#Notes">
          <span class="tocnumber">
           1.5
          </span>
          <span class="toctext">
           Notes
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#See_also">
          <span class="tocnumber">
           1.6
          </span>
          <span class="toctext">
           See also
          </span>
         </a>
        </li>
        <li class="toclevel-2">
         <a href="#Help_from_ConTeXt-Mailinglist.2FForum">
          <span class="tocnumber">
           1.7
          </span>
          <span class="toctext">
           Help from ConTeXt-Mailinglist/Forum
          </span>
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="Summary">
      Summary
     </span>
    </h2>
    <div class="cd:shortdesc">
     <p>The command <tt>\setupsidebar</tt> is used to customize vertical bars that are used to "vertically underline" portions of text.
</p>
    </div>
    <h2>
     <span class="mw-headline" id="Settings">
      Settings
     </span>
    </h2>
    <div class="cd:command1">
     <table cellpadding="3" cellspacing="4" class="cmd">
      <tbody>
       <tr>
        <td class="cmd" colspan="2">\setupsidebar<span class="arg1"><i>[...,...]</i></span><span class="arg2">[...=...,...]</span></td>
       </tr>
       <tr class="arg1" valign="top">
        <td class="cmd">[...,...]</td>
        <td><a class="cmdvalue" href="../Commandvalue/name.html" title="Commandvalue/name">name</a> </td>
       </tr>
       <tr class="arg2" valign="top">
        <td class="cmd">rulethickness</td>
        <td><a class="cmdvalue" href="../Commandvalue/dimension.html" title="Commandvalue/dimension">dimension</a> </td>
       </tr>
       <tr class="arg2" valign="top">
        <td class="cmd">rulecolor</td>
        <td><a class="cmdvalue" href="../Commandvalue/color.html" title="Commandvalue/color">color</a> </td>
       </tr>
       <tr class="arg2" valign="top">
        <td class="cmd">alternative</td>
        <td><a class="cmdvalue" href="../Commandvalue/number.html" title="Commandvalue/number">number</a> </td>
       </tr>
       <tr class="arg2" valign="top">
        <td class="cmd">topoffset</td>
        <td><a class="cmdvalue" href="../Commandvalue/dimension.html" title="Commandvalue/dimension">dimension</a> </td>
       </tr>
       <tr class="arg2" valign="top">
        <td class="cmd">bottomoffset</td>
        <td><a class="cmdvalue" href="../Commandvalue/dimension.html" title="Commandvalue/dimension">dimension</a> </td>
       </tr>
       <tr class="arg2" valign="top">
        <td class="cmd">distance</td>
        <td><a class="cmdvalue" href="../Commandvalue/dimension.html" title="Commandvalue/dimension">dimension</a> </td>
       </tr>
       <tr class="arg2" valign="top">
        <td class="cmd">leftmargindistance</td>
        <td><a class="cmdvalue" href="../Commandvalue/dimension.html" title="Commandvalue/dimension">dimension</a> </td>
       </tr>
       <tr class="arg2" valign="top">
        <td class="cmd">level</td>
        <td><a class="cmdvalue" href="../Commandvalue/number.html" title="Commandvalue/number">number</a> </td>
       </tr>
      </tbody>
     </table>
     <br>
     <table cellpadding="3" cellspacing="4" width="100%">
      <tbody>
       <tr>
        <th align="left" width="20%">
         Option
        </th>
        <th align="left" width="80%">
         Explanation
        </th>
       </tr>
       <tr>
        <td class="arg2" valign="top">rulethickness</td>
        <td>
<table width="100%"><tbody><tr><td class="doc2" colspan="2">thickness of the bar, i.e. 1pt</td></tr>
</tbody></table></td>
       </tr>
       <tr>
        <td class="arg2" valign="top">rulecolor</td>
        <td>
<table width="100%"><tbody><tr><td class="doc2" colspan="2">the bar's color</td></tr>
</tbody></table></td>
       </tr>
       <tr>
        <td class="arg2" valign="top">alternative</td>
        <td>
<table width="100%"><tbody><tr><td class="doc2" colspan="2">a number specifying the style of the bar (currently 0=solid bar, 1=dashed bar)</td></tr>
<tr>

<td class="arg2" width="20%"><i>number</i></td>
<td class="doc2" width="80%">0 = solid bar
1 = dashed bar</td>
</tr>

</tbody></table></td>
       </tr>
       <tr>
        <td class="arg2" valign="top">topoffset</td>
        <td>
<table width="100%"><tbody><tr><td class="doc2" colspan="2">offset to start drawing the bar, from the top of the first line of text between <code>\startsidebar...\stopsidebar</code></td></tr>
</tbody></table></td>
       </tr>
       <tr>
        <td class="arg2" valign="top">bottomoffset</td>
        <td>
<table width="100%"><tbody><tr><td class="doc2" colspan="2">offset to stop drawing the bar from the bottom of the last line of text between <code>\startsidebar...\stopsidebar</code></td></tr>
</tbody></table></td>
       </tr>
       <tr>
        <td class="arg2" valign="top">distance</td>
        <td>
<table width="100%"><tbody><tr><td class="doc2" colspan="2">the distance from the left edge of the text or from the previous bar, in case of nested <code>\startsidebar...\stopsidebar</code></td></tr>
</tbody></table></td>
       </tr>
       <tr>
        <td class="arg2" valign="top">leftmargindistance</td>
        <td>
<table width="100%"><tbody><tr><td class="doc2" colspan="2">distance from the left edge of the text; if it's zero, it's made equal to distance</td></tr>
</tbody></table></td>
       </tr>
       <tr>
        <td class="arg2" valign="top">level</td>
        <td>
<table width="100%"><tbody><tr><td class="doc2" colspan="2">a number specifying a sort of layer on which the bar is drawn; when a bar is already drawn in the same level, the next one will be drawn with a <code>distance</code> offset; if you draw a second bar in a higher level, it will overlap bars of lower levels</td></tr>
</tbody></table></td>
       </tr>
      </tbody>
     </table>
    </div>
    <h2>
     <span class="mw-headline" id="Description">
      Description
     </span>
    </h2>
    <div class="cd:description">
     <p><code>\setupsidebar</code> customizes the appearance of vertical bars drawn along the portions of text between <code>\startsidebar[...]</code> and <code>\stopsidebar</code>.
</p>
     <p><code>\startsidebar[...]</code> ... <code>\stopsidebar</code> can be placed inside the text of a paragraph to "vertically underline"
portions of text.
They are drawn from the top of the first line to the bottom of the last line of the text between the two commands.
</p>
     <p>You can fine-tune the starting and ending points of a bar with <code>topoffset</code> and <code>bottomoffset</code>.
</p>
     <p><code>\startsidebar[...]</code> ... <code>\stopsidebar</code> can be nested: in this case the <code>distance</code> parameter is used to move the second bar (the inner one) relatively to the first one. The first one is drawn at distance <code>distance</code> from the left edge of the text, each of the next ones will be drawn at distance <code>distance</code> from the previous one.
</p>
     <p>In case you specify a non zero length for the <code>leftmargindistance</code> parameter, you can discriminate the distance from the text (<code>leftmargindistance</code>) from the distance between bars (<code>distance</code>).
</p>
     <p>The <code>level</code> parameter lets you define sidebars on different layers. The bars with higher values of <code>level</code> are drawn on top.
</p>
     <p>From LMTX 2021-10-28, you can use the <code>location</code> parameter: it defaults to <code>left</code>, but it can be <code>right</code>, <code>inner</code> or <code>outer</code>.
<code>right</code> draws the sidebar on the right. <code>inner</code> and <code>outer</code> are used with <code>\setuppagenumbering[alternative=doublesided]</code>, to get bars that are always in the inner or in the outer margin.
</p>
    </div>
    <h2>
     <span class="mw-headline" id="Examples">
      Examples
     </span>
    </h2>
    <div class="cd:examples">
     <h3>
      <span class="mw-headline" id="Example_1">
       Example 1
      </span>
     </h3>
     <div class="mw-collapsible">
      <ul class="demo">
       <li class="code">
        <pre class="tex"><span class="cs"><span class="stylecs">\definesidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span><span class="brx">[</span>rulethickness<span class="brx">=</span>1pt,distance<span class="brx">=</span>4pt<span class="brx">]</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs">\hsize</span><span class="brx">=</span>4cm
The sidebar follows the text between <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span><span class="br">}</span> and <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\stopsidebar</span></span><span class="br">}</span>,
<span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span> <span class="br">{</span><span class="cs">\blue</span> from the top of the first line to the bottom of the last line.<span class="br">}</span><span class="cs"><span class="documentcs">\stopsidebar</span></span>
Here the text between <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span><span class="br">}</span> and <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\stopsidebar</span></span><span class="br">}</span> has been colored in blue.

<span class="cs"><span class="documentcs">\blank</span></span>

When the <span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span> same bar is started twice on the same text, <span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span>
a second bar <span class="cs"><span class="documentcs">\stopsidebar</span></span> will be drawn, with an offset equal to the <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span>distance<span class="br">}</span> parameter.<span class="cs"><span class="documentcs">\stopsidebar</span></span>

<span class="cs"><span class="documentcs">\blank</span></span>

<span class="cs"><span class="stylecs">\setupsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span><span class="brx">[</span>leftmargindistance<span class="brx">=</span>0pt,distance<span class="brx">=</span>4pt<span class="brx">]</span>
When <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span>leftmargindistance<span class="br">}</span> is zero, <span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span>
the bar is drawn at distance <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span>distance<span class="br">}</span> from the left edge
of the text,<span class="cs"><span class="documentcs">\stopsidebar</span></span> which means 4pt in this example.

<span class="cs"><span class="documentcs">\blank</span></span>

<span class="cs"><span class="stylecs">\setupsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span><span class="brx">[</span>leftmargindistance<span class="brx">=</span>0.1pt,distance<span class="brx">=</span>4pt<span class="brx">]</span>
When <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span>leftmargindistance<span class="br">}</span> is not zero, <span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span>
the bar is drawn at distance <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span>leftmargindistance<span class="br">}</span> from the left edge
of the text, which means 0.1pt in this example.
<span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span> A second bar will be drawn at distance <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span>distance<span class="br">}</span>
from the first one.<span class="cs"><span class="documentcs">\stopsidebar</span></span><span class="cs"><span class="documentcs">\stopsidebar</span></span>

<span class="cs"><span class="documentcs">\blank</span></span>

<span class="cs"><span class="stylecs">\setupsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span><span class="brx">[</span>leftmargindistance<span class="brx">=</span>0pt,distance<span class="brx">=</span>4mm,rulethickness<span class="brx">=</span>2mm,level<span class="brx">=</span>1<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesidebar</span></span><span class="brx">[</span>over<span class="brx">]</span><span class="brx">[</span>distance<span class="brx">=</span>4mm,rulethickness<span class="brx">=</span>1mm,rulecolor<span class="brx">=</span>green,level<span class="brx">=</span>1<span class="brx">]</span>
When <span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span><span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>over<span class="brx">]</span> two sidebars are in the same level,
they are drawn at distance <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span>distance<span class="br">}</span>.<span class="cs"><span class="documentcs">\stopsidebar</span></span><span class="cs"><span class="documentcs">\stopsidebar</span></span>

<span class="cs"><span class="documentcs">\blank</span></span>

<span class="cs"><span class="stylecs">\setupsidebar</span></span><span class="brx">[</span>over<span class="brx">]</span><span class="brx">[</span>level<span class="brx">=</span>2<span class="brx">]</span>
When <span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span><span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>over<span class="brx">]</span> two sidebars are in different levels,
they are drawn as if they were in different layers.<span class="cs"><span class="documentcs">\stopsidebar</span></span><span class="cs"><span class="documentcs">\stopsidebar</span></span>

<span class="cs"><span class="documentcs">\blank</span></span>

<span class="cs"><span class="stylecs">\setupsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span><span class="brx">[</span>rulethickness<span class="brx">=</span>1pt,leftmargindistance<span class="brx">=</span><span class="cs">\dimexpr</span> -<span class="cs">\hsize</span> - 4pt<span class="cs">\relax</span><span class="brx">]</span>
<span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>simple<span class="brx">]</span> You can put a bar in the right margin.<span class="cs"><span class="documentcs">\stopsidebar</span></span>

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
       </li>
       <li class="rendering">
        <img height="1240" src="../wikiteximage/5f5e8bd905eadc3cee315f33631ab017.webp" width="874">
       </li>
      </ul>
     </div>
     <h3>
      <span class="mw-headline" id="Custom_fancy_sidebars">
       Custom fancy sidebars
      </span>
     </h3>
     <div class="mw-collapsible">
      <p>You can define fancy, zig zag bars redefining the <code>anch_sidebars_draw</code> macro:
</p>
      <ul class="demo">
       <li class="code">
        <pre class="tex"><span class="cs"><span class="stylecs">\definesidebar</span></span><span class="brx">[</span>zigzag1<span class="brx">]</span><span class="brx">[</span>rulecolor<span class="brx">=</span>black,distance<span class="brx">=</span>4pt,rulethickness<span class="brx">=</span>1pt,alternative<span class="brx">=</span>2<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesidebar</span></span><span class="brx">[</span>zigzag2<span class="brx">]</span><span class="brx">[</span>rulecolor<span class="brx">=</span>red,distance<span class="brx">=</span>4pt,rulethickness<span class="brx">=</span>1pt,alternative<span class="brx">=</span>3<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesidebar</span></span><span class="brx">[</span>wave1<span class="brx">]</span><span class="brx">[</span>rulecolor<span class="brx">=</span>blue,distance<span class="brx">=</span>4pt,rulethickness<span class="brx">=</span>1pt,alternative<span class="brx">=</span>4<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesidebar</span></span><span class="brx">[</span>wave2<span class="brx">]</span><span class="brx">[</span>rulecolor<span class="brx">=</span>cyan,distance<span class="brx">=</span>4pt,rulethickness<span class="brx">=</span>1pt,alternative<span class="brx">=</span>5<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definesidebar</span></span><span class="brx">[</span>obliquedashes<span class="brx">]</span><span class="brx">[</span>rulecolor<span class="brx">=</span>darkgreen,distance<span class="brx">=</span>4pt,rulethickness<span class="brx">=</span>1pt,alternative<span class="brx">=</span>6<span class="brx">]</span>

<span class="cs"><span class="documentcs">\startMPcode</span></span>
<span class="comment">% draws a bar repeating a pattern defined from (0,0) to (0,1)</span>
def draw_pattern_bar<span class="brx">(</span>expr a, b, pattern, patternlength, patternheight, linewidth, linecolor<span class="brx">)</span> <span class="brx">=</span>
   draw image <span class="brx">(</span>
       begingroup&nbsp;;
           save p, q, stp&nbsp;;
           pair p, q, stp&nbsp;;
           stp&nbsp;:<span class="brx">=</span> <span class="brx">(</span> <span class="brx">(</span> b - a <span class="brx">)</span> / arclength<span class="brx">(</span> a -- b <span class="brx">)</span> <span class="brx">)</span> * patternlength&nbsp;;
           path q&nbsp;; q&nbsp;:<span class="brx">=</span> pattern xscaled patternlength yscaled patternheight rotated <span class="brx">(</span>angle<span class="brx">(</span>stp<span class="brx">)</span><span class="brx">)</span>&nbsp;;
           p&nbsp;:<span class="brx">=</span> a&nbsp;;
           forever&nbsp;:
               draw
                   q shifted p
                   withpen pencircle scaled linewidth
                   withcolor linecolor&nbsp;;
               p&nbsp;:<span class="brx">=</span> p + stp&nbsp;;
               exitif arclength<span class="brx">(</span> a -- p <span class="brx">)</span> &gt; arclength<span class="brx">(</span> a -- b <span class="brx">)</span>&nbsp;;
           endfor&nbsp;;
       endgroup&nbsp;;
       clip currentpicture to
           <span class="brx">(</span>xpart llcorner currentpicture, ypart b<span class="brx">)</span> --
           <span class="brx">(</span>xpart lrcorner currentpicture, ypart b<span class="brx">)</span> --
           <span class="brx">(</span>xpart urcorner currentpicture, ypart a<span class="brx">)</span> --
           <span class="brx">(</span>xpart ulcorner currentpicture, ypart a<span class="brx">)</span> -- cycle&nbsp;;
   <span class="brx">)</span>&nbsp;;
enddef&nbsp;;

<span class="comment">% modified from metapost/context/base/mpiv/mp-apos.mpiv to add alternatives</span>
def anch_sidebars_draw <span class="brx">(</span>expr p_b_self, p_e_self, y_b_self, y_e_self, h_b_self, d_e_self,
        x, y, w, h, alternative, distance, linewidth, linecolor, topoffset, bottomoffset<span class="brx">)</span> <span class="brx">=</span>
    <span class="comment">% beware, we anchor at (x,y)</span>
    begingroup&nbsp;;
    if alternative <span class="brx">=</span> 1&nbsp;:
        interim linecap&nbsp;:<span class="brx">=</span> rounded&nbsp;;
    else&nbsp;:
        interim linecap&nbsp;:<span class="brx">=</span> butt&nbsp;;
    fi&nbsp;;
    save a, b&nbsp;; pair a, b&nbsp;;
    if p_b_self <span class="brx">=</span> p_e_self&nbsp;:
        a&nbsp;:<span class="brx">=</span> <span class="brx">(</span>-distance,y_b_self+h_b_self-y<span class="brx">)</span>&nbsp;;
        b&nbsp;:<span class="brx">=</span> <span class="brx">(</span>-distance,y_e_self-d_e_self-y<span class="brx">)</span>&nbsp;;
    elseif RealPageNumber <span class="brx">=</span> p_b_self&nbsp;:
        a&nbsp;:<span class="brx">=</span> <span class="brx">(</span>-distance,y_b_self+h_b_self-y<span class="brx">)</span>&nbsp;;
        b&nbsp;:<span class="brx">=</span> <span class="brx">(</span>-distance,0<span class="brx">)</span>&nbsp;;
    elseif RealPageNumber <span class="brx">=</span> p_e_self&nbsp;:
        a&nbsp;:<span class="brx">=</span> <span class="brx">(</span>-distance,h<span class="brx">)</span>&nbsp;;
        b&nbsp;:<span class="brx">=</span> <span class="brx">(</span>-distance,y_e_self-d_e_self-y<span class="brx">)</span>&nbsp;;
    else&nbsp;:
        a&nbsp;:<span class="brx">=</span> <span class="brx">(</span>-distance,h<span class="brx">)</span>&nbsp;;
        b&nbsp;:<span class="brx">=</span> <span class="brx">(</span>-distance,0<span class="brx">)</span>&nbsp;;
    fi&nbsp;;
    a&nbsp;:<span class="brx">=</span> <span class="brx">(</span>xpart a, min<span class="brx">(</span>ypart a + topoffset,   h<span class="brx">)</span><span class="brx">)</span>&nbsp;;
    b&nbsp;:<span class="brx">=</span> <span class="brx">(</span>xpart b, max<span class="brx">(</span>ypart b - bottomoffset,0<span class="brx">)</span><span class="brx">)</span>&nbsp;;
    if alternative <span class="brx">=</span> 2&nbsp;:
        draw_pattern_bar<span class="brx">(</span> a, b, <span class="brx">(</span><span class="brx">(</span>0,0<span class="brx">)</span>--<span class="brx">(</span>0.25,-0.5<span class="brx">)</span>--<span class="brx">(</span>0.75,0.5<span class="brx">)</span>--<span class="brx">(</span>1,0<span class="brx">)</span><span class="brx">)</span>, 2pt, 2pt, linewidth, linecolor <span class="brx">)</span>&nbsp;;
    elseif alternative <span class="brx">=</span> 3&nbsp;:
        draw_pattern_bar<span class="brx">(</span> a, b, <span class="brx">(</span><span class="brx">(</span>0,0<span class="brx">)</span>--<span class="brx">(</span>0.25,-0.5<span class="brx">)</span>--<span class="brx">(</span>0.75,0.5<span class="brx">)</span>--<span class="brx">(</span>1,0<span class="brx">)</span><span class="brx">)</span>, 4pt, 1.5pt, linewidth, linecolor <span class="brx">)</span>&nbsp;;
    elseif alternative <span class="brx">=</span> 4&nbsp;:
        draw_pattern_bar<span class="brx">(</span> a, b, <span class="brx">(</span> <span class="brx">(</span><span class="brx">(</span>0,0<span class="brx">)</span> .. controls <span class="brx">(</span>0,0.5<span class="brx">)</span> and <span class="brx">(</span>0.5,0.5<span class="brx">)</span> .. <span class="brx">(</span>0.5,0<span class="brx">)</span><span class="brx">)</span> -- <span class="brx">(</span><span class="brx">(</span>0.5,0<span class="brx">)</span> .. controls <span class="brx">(</span>0.5,-0.5<span class="brx">)</span> and <span class="brx">(</span>1,-0.5<span class="brx">)</span> .. <span class="brx">(</span>1,0<span class="brx">)</span><span class="brx">)</span> <span class="brx">)</span>, 6pt, 4pt, linewidth, linecolor <span class="brx">)</span>&nbsp;;
    elseif alternative <span class="brx">=</span> 5&nbsp;:
        draw_pattern_bar<span class="brx">(</span> a, b, <span class="brx">(</span> <span class="brx">(</span>0,0<span class="brx">)</span> .. controls <span class="brx">(</span>0,1<span class="brx">)</span> and <span class="brx">(</span>1,1<span class="brx">)</span> .. <span class="brx">(</span>1,0<span class="brx">)</span> <span class="brx">)</span>, 4pt, 2pt, linewidth, linecolor <span class="brx">)</span>&nbsp;;
    elseif alternative <span class="brx">=</span> 6&nbsp;:
        draw_pattern_bar<span class="brx">(</span> a, b, <span class="brx">(</span> <span class="brx">(</span>0,0.5<span class="brx">)</span> .. <span class="brx">(</span>1,-0.5<span class="brx">)</span> <span class="brx">)</span>, 4pt, 2pt, linewidth, linecolor <span class="brx">)</span>&nbsp;;
    else&nbsp;:
        draw
            a -- b
            if alternative <span class="brx">=</span> 1&nbsp;:
                dashed <span class="brx">(</span>withdots scaled <span class="brx">(</span>linewidth/2<span class="brx">)</span><span class="brx">)</span>
            fi
            withpen pencircle scaled linewidth
            withcolor linecolor&nbsp;;
    fi&nbsp;;
    endgroup&nbsp;;
enddef&nbsp;;
<span class="cs"><span class="documentcs">\stopMPcode</span></span>

<span class="cs">\def</span><span class="cs">\samplewithbar</span><span class="brx">#</span>1<span class="br">{</span>The sidebar follows the text
  between <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>...<span class="brx">]</span><span class="br">}</span> and <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\stopsidebar</span></span><span class="br">}</span>,
  <span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span> <span class="br">{</span><span class="cs">\blue</span> from the top of the first line to the bottom of the last line.<span class="br">}</span><span class="cs"><span class="documentcs">\stopsidebar</span></span>
  Here the text between <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\startsidebar</span></span><span class="brx">[</span>...<span class="brx">]</span><span class="br">}</span> and <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span><span class="cs"><span class="documentcs">\stopsidebar</span></span><span class="br">}</span> has been colored in blue.<span class="cs">\par</span>
  <span class="cs"><span class="documentcs">\blank</span></span><span class="br">}</span>
<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs">\hsize</span><span class="brx">=</span>4cm
<span class="cs">\samplewithbar</span><span class="br">{</span>zigzag1<span class="br">}</span>
<span class="cs">\samplewithbar</span><span class="br">{</span>zigzag2<span class="br">}</span>
<span class="cs">\samplewithbar</span><span class="br">{</span>wave1<span class="br">}</span>
<span class="cs">\samplewithbar</span><span class="br">{</span>wave2<span class="br">}</span>
<span class="cs">\samplewithbar</span><span class="br">{</span>obliquedashes<span class="br">}</span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
       </li>
       <li class="rendering">
        <img height="1240" src="../wikiteximage/f106087776e696ad1fbdf56651528e17.webp" width="874">
       </li>
      </ul>
      <p>The metapost macro <code>draw_pattern_bar</code> draws a repeating <code>pattern</code> along the bar length.
The pattern is a sort of waveform defined with a path from (0,0) to (1,0).
Its bounding box should have a height of 1, so that the base waveform has amplitude 1.
</p>
      <p>The length of the pattern and its "amplitude" are magnified
according to <code>patternlength</code> and <code>patternheight</code>.
</p>
     </div>
     <h3>
      <span class="mw-headline" id="The_location_parameter">
       The location parameter
      </span>
     </h3>
     <div class="mw-collapsible">
      <p>The default <code>\setupsidebar[location=left]</code> and <code>\setupsidebar[location=right]</code>:
</p>
      <ul class="demo">
       <li class="rendering">
        <img height="874" src="../wikiteximage/dfb6a6eca17f6778f09e74fd30da7c50.webp" width="620">
       </li>
      </ul>
      <p>In doublesided typesetting with \setuppagenumbering[alternative=doublesided], <code>\setupsidebar[location=inner]</code> puts the sidebars always in the inner margin, while <code>\setupsidebar[location=outer]</code> puts them in the outer margin:
</p>
      <ul class="demo">
       <li class="rendering">
        <img height="874" src="../wikiteximage/67a5aea15a2544d8542b66d8e2cf7bdd.webp" width="620">
       </li>
      </ul>
     </div>
    </div>
    <h2>
     <span class="mw-headline" id="Notes">
      Notes
     </span>
    </h2>
    <div class="cd:notes">
    </div>
    <h2>
     <span class="mw-headline" id="See_also">
      See also
     </span>
    </h2>
    <div class="cd:seealso">
     <ul>
      <li>
       <a href="definesidebar.html" title="Command/definesidebar">
        <tt>
         \definesidebar
        </tt>
       </a>
      </li>
      <li>
       <a class="extiw" href="http://source.contextgarden.net/anch-bar.mkiv" title="source:anch-bar.mkiv">
        anch-bar.mkiv
       </a>
      </li>
      <li>
       <a class="extiw" href="http://source.contextgarden.net/mp-apos.mpiv" title="source:mp-apos.mpiv">
        mp-apos.mpiv
       </a>
      </li>
     </ul>
    </div>
    <h2>
     <span id="Help_from_ConTeXt-Mailinglist/Forum">
     </span>
     <span class="mw-headline" id="Help_from_ConTeXt-Mailinglist.2FForum">
      Help from ConTeXt-Mailinglist/Forum
     </span>
    </h2>
    <div>
     <p>All issues with:
</p>
     <ul>
      <li>
       <a class="external text" href="http://www.mail-archive.com/search?l=ntg-context%40ntg.nl&q=\setupsidebar+sort:newest" rel="nofollow">
        \setupsidebar on the mailing list (all results)
       </a>
      </li>
      <li>
       <a class="external text" href="http://www.mail-archive.com/search?l=ntg-context%40ntg.nl&q=subject:\setupsidebar+sort:newest" rel="nofollow">
        \setupsidebar on the mailing list (subject only)
       </a>
      </li>
      <li>
       <a class="external text" href="https://tex.stackexchange.com/search?q=%5Bcontext%5D+\setupsidebar" rel="nofollow">
        \setupsidebar on stack exchange
       </a>
      </li>
      <li>
       <a class="external text" href="http://source.contextgarden.net/?search=\setupsidebar" rel="nofollow">
        \setupsidebar in ConTeXt's source
       </a>
      </li>
     </ul>
    </div>
    <!-- 
NewPP limit report
Cached time: 20260109212343
Cache expiry: 86400
Dynamic content: false
Complications: []
CPU time usage: 0.079 seconds
Real time usage: 0.226 seconds
Preprocessor visited node count: 66/1000000
Preprocessor generated node count: 0/1000000
Post‐expand include size: 479/2097152 bytes
Template argument size: 104/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 20600/5000000 bytes
-->
    <!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    4.018      1 Template:Forum
100.00%    4.018      1 -total
-->
    <!-- Saved in parser cache with key wikidb16_33:pcache:idhash:6417-1!canonical and timestamp 20260109212342 and revision id 32827
 -->
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-10
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Command/setupsidebar">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
