<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../../style.css" rel="stylesheet">
  <link href="../../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Text blocks/Environments/Verse&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Text_blocks/Environments/Verse" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Text blocks/Environments/Verse
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=2600&diff=42146">2025-02-07</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h3>
       Contents
      </h3>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#The_lines_environment">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         The lines environment
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-2">
         <a href="#A_simple_example">
          <span class="tocnumber">
           1.1
          </span>
          <span class="toctext">
           A simple example
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-3">
         <a href="#Setting_up_lines">
          <span class="tocnumber">
           1.2
          </span>
          <span class="toctext">
           Setting up lines
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-4">
         <a href="#Defining_new_line_environments">
          <span class="tocnumber">
           1.3
          </span>
          <span class="toctext">
           Defining new line environments
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-5">
         <a href="#Preventing_pagebreaks">
          <span class="tocnumber">
           1.4
          </span>
          <span class="toctext">
           Preventing pagebreaks
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-6">
       <a href="#Centering_verse">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         Centering verse
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-7">
         <a href="#Manually">
          <span class="tocnumber">
           2.1
          </span>
          <span class="toctext">
           Manually
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-8">
         <a href="#Automatically">
          <span class="tocnumber">
           2.2
          </span>
          <span class="toctext">
           Automatically
          </span>
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="The_lines_environment">
      The
      <a class="mw-redirect" href="../../Command/_startlines.html" title="Command/startlines">
       lines
      </a>
      environment
     </span>
    </h2>
    <p>The usual way to set verse in ConTeXt is to enclose it in <tt><a class="mw-redirect" href="../../Command/_startlines.html" title="Command/startlines">\startlines</a></tt>, which ensures that each new line in the code produces a line break in the compiled output. Additionally, <tt><a class="mw-redirect" href="../../Command/_startlines.html" title="Command/startlines">\startlines</a></tt> has some arguments that can be used to configure how the lines of text look, such as their indentation patterns. As usual in ConTeXt, these arguments can be set up globally with <tt><a href="../../Command/setuplines.html" title="Command/setuplines">\setuplines</a></tt>, and new "lines" environments created <tt><a href="../../Command/definelines.html" title="Command/definelines">\definelines</a></tt>.
</p>
    <h3>
     <span class="mw-headline" id="A_simple_example">
      A simple example
     </span>
    </h3>
    <p>For example, to set an excerpt from <i>The Monks and the Giants</i> by John Hookham Frere:
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>B8, landscape<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setuppagenumbering</span></span><span class="brx">[</span>location<span class="brx">=</span>none<span class="brx">]</span>

<span class="cs"><span class="documentcs">\starttext</span></span>

<span class="cs"><span class="documentcs">\title</span></span><span class="br">{</span>The Monks and the Giants<span class="br">}</span>

<span class="cs"><span class="documentcs">\startlines</span></span>
But chiefly, when the shadowy moon had shed
O'er woods and waters her mysterious hue,
Their passive hearts and vacant fancies fed
With thoughts and aspirations strange and new,
Till their brute souls with inward working bred
Dark hints that in the depths of instinct grew
Subjection not from Locke's associations,
Nor David Hartley's doctrine of vibrations.
<span class="cs"><span class="documentcs">\stoplines</span></span>

<span class="cs">\hfill</span> John Hookham Frere

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="367" src="../../wikiteximage/44369470df6725c973ac4ddcb98e5b0e.webp" width="520">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Setting_up_lines">
      Setting up lines
     </span>
    </h3>
    <p>The <tt><a class="mw-redirect" href="../../Command/_startlines.html" title="Command/startlines">\startlines</a></tt> command has several useful options for configuring the overall look of the text that it applies to.
As is usual in ConTeXt, you can use <tt><a href="../../Command/setuplines.html" title="Command/setuplines">\setuplines</a></tt> to set options globally, and square brackets after <tt><a class="mw-redirect" href="../../Command/_startlines.html" title="Command/startlines">\startlines</a></tt> to set them locally. For example:
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>B8, landscape<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setuppagenumbering</span></span><span class="brx">[</span>location<span class="brx">=</span>none<span class="brx">]</span>

<span class="cs"><span class="stylecs">\setuplines</span></span><span class="brx">[</span>indenting<span class="brx">=</span><span class="br">{</span>yes, small, even<span class="br">}</span><span class="brx">]</span>

<span class="cs"><span class="documentcs">\starttext</span></span>

<span class="cs"><span class="documentcs">\title</span></span><span class="br">{</span>The Monks and the Giants<span class="br">}</span>

<span class="cs"><span class="documentcs">\startlines</span></span><span class="brx">[</span>style<span class="brx">=</span>italic<span class="brx">]</span>
But chiefly, when the shadowy moon had shed
O'er woods and waters her mysterious hue,
Their passive hearts and vacant fancies fed
With thoughts and aspirations strange and new,
Till their brute souls with inward working bred
Dark hints that in the depths of instinct grew
Subjection not from Locke's associations,
Nor David Hartley's doctrine of vibrations.
<span class="cs"><span class="documentcs">\stoplines</span></span>

<span class="cs">\hfill</span> John Hookham Frere

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="367" src="../../wikiteximage/b259c7f7968ab52aa06987dee7c8a0c1.webp" width="520">
     </li>
    </ul>
    <p>The <code>yes</code> turns the indenting on, the <code>small</code> makes it a small amount, and the <code>even</code> makes it only for even-numbered lines. The <code>style</code> option controls the text formatting. To see all configuration options, visit the <tt><a href="../../Command/setuplines.html" title="Command/setuplines">\setuplines</a></tt> page.
</p>
    <h3>
     <span class="mw-headline" id="Defining_new_line_environments">
      Defining new line environments
     </span>
    </h3>
    <p>If you have different indentation patterns that you would like to use for verse in your documents, it would be good to give each one a defined name to refer to with <tt><a href="../../Command/definelines.html" title="Command/definelines">\definelines</a></tt>. Then you can still make global adjustments to a single look with a single change, without affecting all the other looks that you have defined. For example:
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A7, landscape<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setuppagenumbering</span></span><span class="brx">[</span>location<span class="brx">=</span>none<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definelines</span></span><span class="brx">[</span>ottavaRima<span class="brx">]</span>
  <span class="brx">[</span>indenting<span class="brx">=</span><span class="br">{</span>yes, small, even<span class="br">}</span>,
   style<span class="brx">=</span>italic<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definelines</span></span><span class="brx">[</span>nurseryRhyme<span class="brx">]</span>
  <span class="brx">[</span>indenting<span class="brx">=</span><span class="br">{</span>yes, big, even<span class="br">}</span>,
   style<span class="brx">=</span>sansserif<span class="brx">]</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs">\startottavaRima</span>
But chiefly, when the shadowy moon had shed
O'er woods and waters her mysterious hue,
Their passive hearts and vacant fancies fed
With thoughts and aspirations strange and new,
Till their brute souls with inward working bred
Dark hints that in the depths of instinct grew
Subjection not from Locke's associations,
Nor David Hartley's doctrine of vibrations.
<span class="cs">\stopottavaRima</span>

And now we can typeset a nursery rhyme with its own formatting:

<span class="cs">\startnurseryRhyme</span>
Hey diddle diddle, the cat played the fiddle,
The cow jumped over the moon.
The little dog laughed to see such craft,
And the dish ran away with the spoon.
<span class="cs">\stopnurseryRhyme</span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="438" src="../../wikiteximage/7aa7a9be2ef068841fa06ca7bdb8b9bb.webp" width="620">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Preventing_pagebreaks">
      Preventing pagebreaks
     </span>
    </h3>
    <p>The commands <tt><a class="mw-redirect" href="../../Command/_startlines.html" title="Command/startlines">\startlines</a></tt>, <tt><a href="../../Command/setuplines.html" title="Command/setuplines">\setuplines</a></tt>, and <tt><a class="new" href="../../index.php?title=Command/startuplines&action=edit&redlink=1.html" title="Command/startuplines (page does not exist)">\startuplines</a></tt> have many other options to configure the look of verse. 
For example, you can specify commands to be executed before and after the verse with the <code>before</code> and <code>after</code> arguments. One way that this can be used is to prevent pagebreaks by enclosing the verse in <tt><a class="mw-redirect" href="../../Command/_startframedtext.html" title="Command/startframedtext">\startframedtext</a></tt> <tt><a class="new" href="../../index.php?title=Command/stopframedtext&action=edit&redlink=1.html" title="Command/stopframedtext (page does not exist)">\stopframedtext</a></tt>, as in:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\startlines</span></span><span class="brx">[</span>before<span class="brx">=</span><span class="br">{</span><span class="cs"><span class="documentcs">\startframedtext</span></span><span class="brx">[</span>frame<span class="brx">=</span>off<span class="brx">]</span><span class="br">}</span>, after<span class="brx">=</span><span class="cs"><span class="documentcs">\stopframedtext</span></span><span class="brx">]</span>
But chiefly, when the shadowy moon had shed
O'er woods and waters her mysterious hue,
Their passive hearts and vacant fancies fed
With thoughts and aspirations strange and new,
Till their brute souls with inward working bred
Dark hints that in the depths of instinct grew
Subjection not from Locke's associations,
Nor David Hartley's doctrine of vibrations.
<span class="cs"><span class="documentcs">\stoplines</span></span>
</pre>
    <p>See the documentation for <tt><a href="../../Command/setuplines.html" title="Command/setuplines">\setuplines</a></tt> for further details of what can be customized.
</p>
    <h2>
     <span class="mw-headline" id="Centering_verse">
      Centering verse
     </span>
    </h2>
    <p>Verse is commonly typeset in a left-aligned block, which is then horizontally centred on the page.
There's no built-in environment which provides this functionality, but we can certaily create one.
</p>
    <h3>
     <span class="mw-headline" id="Manually">
      Manually
     </span>
    </h3>
    <p>If it is not a problem to figure out the longest line manually, then the solution is quite short:
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A6<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setuphead</span></span><span class="brx">[</span>title<span class="brx">]</span><span class="brx">[</span>align<span class="brx">=</span>middle<span class="brx">]</span>

<span class="cs">\def</span><span class="cs">\startpoem</span><span class="brx">[</span><span class="brx">#</span>1<span class="brx">]</span><span class="comment">%</span>
  <span class="br">{</span><span class="cs">\begingroup</span> 
   <span class="cs">\setbox</span>0<span class="cs">\hbox</span><span class="br">{</span><span class="brx">#</span>1<span class="br">}</span><span class="comment">%</span>
   <span class="cs"><span class="stylecs">\setupnarrower</span></span><span class="brx">[</span>left<span class="brx">=</span><span class="cs">\dimexpr</span><span class="brx">(</span><span class="cs">\the</span><span class="cs">\hsize</span>-<span class="cs">\the</span><span class="cs">\wd</span>0<span class="brx">)</span>/2<span class="cs">\relax</span><span class="brx">]</span><span class="comment">%</span>
   <span class="cs"><span class="documentcs">\startnarrower</span></span><span class="brx">[</span>left<span class="brx">]</span><span class="comment">%</span>
   <span class="cs"><span class="documentcs">\startlines</span></span><span class="br">}</span>

<span class="cs">\def</span><span class="cs">\stoppoem</span>
   <span class="br">{</span><span class="cs"><span class="documentcs">\stoplines</span></span>
    <span class="cs"><span class="documentcs">\stopnarrower</span></span>
    <span class="cs">\endgroup</span><span class="br">}</span>

<span class="cs"><span class="documentcs">\starttext</span></span> <span class="comment">%-----------------------------------------</span>

<span class="cs"><span class="documentcs">\title</span></span><span class="br">{</span>A Dream Within a Dream<span class="br">}</span>

<span class="comment">% Pass the longest line as the argument.</span>
<span class="cs">\startpoem</span><span class="brx">[</span>That my days have been a dream;<span class="brx">]</span>
  <span class="cs"><span class="documentcs">\input</span></span> poe
<span class="cs">\stoppoem</span>
<span class="cs">\hfill</span> Edgar Allan Poe

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="874" src="../../wikiteximage/4e91b52396b6878bbb3a1fbb81769d84.webp" width="620">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Automatically">
      Automatically
     </span>
    </h3>
    <p>With a bit more code, it is also possible to ask ConTeXt to figure things out for us:
</p>
    <ul class="demosbs">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuppapersize</span></span><span class="brx">[</span>A6<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setuphead</span></span><span class="brx">[</span>title<span class="brx">]</span><span class="brx">[</span>align<span class="brx">=</span>middle<span class="brx">]</span>

<span class="cs"><span class="stylecs">\defineframedtext</span></span><span class="brx">[</span>poemframed<span class="brx">]</span>
  <span class="brx">[</span>width<span class="brx">=</span><span class="cs">\textwidth</span>,
   autowidth<span class="brx">=</span>force,
   align<span class="brx">=</span>flushleft,
   before<span class="brx">=</span>,
   after<span class="brx">=</span>,
   frame<span class="brx">=</span>off,
   offset<span class="brx">=</span>none<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definenarrower</span></span><span class="brx">[</span>poemnarrower<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definelines</span></span><span class="brx">[</span>poemlines<span class="brx">]</span>
  <span class="brx">[</span>before<span class="brx">=</span><span class="br">{</span><span class="cs">\startpoemnarrower</span><span class="brx">[</span>left<span class="brx">]</span><span class="br">}</span>,
   after<span class="brx">=</span><span class="cs">\stoppoemnarrower</span><span class="brx">]</span>

<span class="cs"><span class="stylecs">\definebuffer</span></span><span class="brx">[</span>poem<span class="brx">]</span>

<span class="cs">\def</span><span class="cs">\stoppoem</span><span class="br">{</span><span class="cs"><span class="stylecs">\setups</span></span><span class="br">{</span>poems:buffer<span class="br">}</span><span class="br">}</span>

<span class="cs"><span class="stylecs">\startsetups</span></span> poems:buffer
  <span class="cs"><span class="stylecs">\setupnarrower</span></span><span class="brx">[</span>poemnarrower<span class="brx">]</span><span class="brx">[</span>left<span class="brx">=</span>0pt<span class="brx">]</span>
  <span class="cs">\setbox</span><span class="cs">\scratchbox</span><span class="cs">\vbox</span><span class="comment">%</span>
    <span class="br">{</span><span class="cs">\poemframed</span>
    <span class="br">{</span><span class="cs">\startpoemlines</span>
       <span class="cs">\getpoem</span>
      <span class="cs">\stoppoemlines</span><span class="br">}</span><span class="br">}</span>
  <span class="cs">\edef</span><span class="cs">\poemhsize</span><span class="br">{</span><span class="cs">\the</span><span class="cs">\dimexpr</span><span class="brx">(</span><span class="cs">\hsize</span>-<span class="cs">\wd</span><span class="cs">\scratchbox</span><span class="brx">)</span>/2<span class="cs">\relax</span><span class="br">}</span>
  <span class="cs"><span class="stylecs">\setupnarrower</span></span><span class="brx">[</span>poemnarrower<span class="brx">]</span><span class="brx">[</span>left<span class="brx">=</span><span class="cs">\poemhsize</span><span class="brx">]</span>
  <span class="cs">\startpoemlines</span>
    <span class="cs">\getpoem</span>
  <span class="cs">\stoppoemlines</span>
<span class="cs"><span class="stylecs">\stopsetups</span></span>

<span class="cs"><span class="documentcs">\starttext</span></span> <span class="comment">%-----------------------------------------</span>

<span class="cs"><span class="documentcs">\title</span></span><span class="br">{</span>A Dream Within a Dream<span class="br">}</span>

<span class="cs">\startpoem</span>
  <span class="cs"><span class="documentcs">\input</span></span> poe
<span class="cs">\stoppoem</span>
<span class="cs">\hfill</span> Edgar Allan Poe

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="874" src="../../wikiteximage/d4bc0ae212cd70f8c3946df0eafb61c2.webp" width="620">
     </li>
    </ul>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-12
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Text_blocks/Environments/Verse">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
