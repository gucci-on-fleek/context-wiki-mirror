<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="../../style.css" rel="stylesheet">
  <link href="../../favicon.ico" rel="icon" sizes="32x32">
  <title>
   Text blocks/Environments/Typing&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Text_blocks/Environments/Typing" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Text blocks/Environments/Typing
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=984&diff=41450">2025-01-18</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <div class="toc" id="toc">
     <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox">
     <div class="toctitle" dir="ltr" lang="en">
      <h3>
       Contents
      </h3>
      <span class="toctogglespan">
       <label class="toctogglelabel" for="toctogglecheckbox">
       </label>
      </span>
     </div>
     <ul>
      <li class="toclevel-1 tocsection-1">
       <a href="#Displayed_text">
        <span class="tocnumber">
         1
        </span>
        <span class="toctext">
         Displayed text
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-2">
       <a href="#Inline_text">
        <span class="tocnumber">
         2
        </span>
        <span class="toctext">
         Inline text
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-3">
       <a href="#Making_a_tight_vertical_fit">
        <span class="tocnumber">
         3
        </span>
        <span class="toctext">
         Making a tight vertical fit
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-4">
       <a href="#Embedded_formatting_commands">
        <span class="tocnumber">
         4
        </span>
        <span class="toctext">
         Embedded formatting commands
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-5">
       <a href="#Verbatim_with_line_breaks">
        <span class="tocnumber">
         5
        </span>
        <span class="toctext">
         Verbatim with line breaks
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-6">
       <a href="#Pretty_printing">
        <span class="tocnumber">
         6
        </span>
        <span class="toctext">
         Pretty printing
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-7">
         <a href="#Included_Formatters">
          <span class="tocnumber">
           6.1
          </span>
          <span class="toctext">
           Included Formatters
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-8">
         <a href="#Your_own_formatter">
          <span class="tocnumber">
           6.2
          </span>
          <span class="toctext">
           Your own formatter
          </span>
         </a>
         <ul>
          <li class="toclevel-3 tocsection-9">
           <a href="#How_should_I_name_my_file.3F">
            <span class="tocnumber">
             6.2.1
            </span>
            <span class="toctext">
             How should I name my file?
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-10">
           <a href="#Where_should_i_put_my_file.3F">
            <span class="tocnumber">
             6.2.2
            </span>
            <span class="toctext">
             Where should i put my file?
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-11">
           <a href="#Do_I_have_to_do_anything_else_to_get_ConTeXt_to_recognise_and_use_it.3F">
            <span class="tocnumber">
             6.2.3
            </span>
            <span class="toctext">
             Do I have to do anything else to get ConTeXt to recognise and use it?
            </span>
           </a>
          </li>
          <li class="toclevel-3 tocsection-12">
           <a href="#How_to_write_the_pretty_printer.3F">
            <span class="tocnumber">
             6.2.4
            </span>
            <span class="toctext">
             How to write the pretty printer?
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-2 tocsection-13">
         <a href="#Improved_pretty_printing">
          <span class="tocnumber">
           6.3
          </span>
          <span class="toctext">
           Improved pretty printing
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-14">
       <a href="#Tabbing">
        <span class="tocnumber">
         7
        </span>
        <span class="toctext">
         Tabbing
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-15">
       <a href="#Syntax_highlighting_in_color">
        <span class="tocnumber">
         8
        </span>
        <span class="toctext">
         Syntax highlighting in color
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-16">
         <a href="#Defining_your_own_set_of_colors">
          <span class="tocnumber">
           8.1
          </span>
          <span class="toctext">
           Defining your own set of colors
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-17">
         <a href="#Syntax_highlighting_source_code_or_configuration_files">
          <span class="tocnumber">
           8.2
          </span>
          <span class="toctext">
           Syntax highlighting source code or configuration files
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-18">
       <a href="#Colored_background">
        <span class="tocnumber">
         9
        </span>
        <span class="toctext">
         Colored background
        </span>
       </a>
      </li>
      <li class="toclevel-1 tocsection-19">
       <a href="#Line_numbering">
        <span class="tocnumber">
         10
        </span>
        <span class="toctext">
         Line numbering
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-20">
         <a href="#Preliminary_setting">
          <span class="tocnumber">
           10.1
          </span>
          <span class="toctext">
           Preliminary setting
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-21">
         <a href="#Default_line_numbering">
          <span class="tocnumber">
           10.2
          </span>
          <span class="toctext">
           Default line numbering
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-22">
         <a href="#Line_numbers_in_the_text">
          <span class="tocnumber">
           10.3
          </span>
          <span class="toctext">
           Line numbers in the text
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-23">
         <a href="#Continuing_the_numbering">
          <span class="tocnumber">
           10.4
          </span>
          <span class="toctext">
           Continuing the numbering
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-24">
         <a href="#Arbitrary_starting_line_number">
          <span class="tocnumber">
           10.5
          </span>
          <span class="toctext">
           Arbitrary starting line number
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-25">
         <a href="#Line_number_steps">
          <span class="tocnumber">
           10.6
          </span>
          <span class="toctext">
           Line number steps
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-26">
         <a href="#Referencing_line_numbers">
          <span class="tocnumber">
           10.7
          </span>
          <span class="toctext">
           Referencing line numbers
          </span>
         </a>
        </li>
       </ul>
      </li>
      <li class="toclevel-1 tocsection-27">
       <a href="#A_different_approach_to_formatting_and_code_colorization">
        <span class="tocnumber">
         11
        </span>
        <span class="toctext">
         A different approach to formatting and code colorization
        </span>
       </a>
       <ul>
        <li class="toclevel-2 tocsection-28">
         <a href="#Writing_a_parser.2Fformatter">
          <span class="tocnumber">
           11.1
          </span>
          <span class="toctext">
           Writing   a parser/formatter
          </span>
         </a>
        </li>
        <li class="toclevel-2 tocsection-29">
         <a href="#Embedding_the_source_code">
          <span class="tocnumber">
           11.2
          </span>
          <span class="toctext">
           Embedding the source code
          </span>
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
    <h2>
     <span class="mw-headline" id="Displayed_text">
      Displayed text
     </span>
    </h2>
    <p><tt><a class="mw-redirect" href="../../Command/_starttyping.html" title="Command/starttyping">\starttyping</a></tt>,
<tt><a href="../../Command/typebuffer.html" title="Command/typebuffer">\typebuffer</a></tt>
</p>
    <p>Unlike LaTeX's <code>verbatim</code> environment, ConTeXt's <code>typing</code> environments have quite a range of built-in options for formatting the verbatim text, see below.
</p>
    <h2>
     <span class="mw-headline" id="Inline_text">
      Inline text
     </span>
    </h2>
    <p>To typeset code inside the paragraph, you have the command <code>\type</code>. It can be configured with <code>\setuptype[type][...]</code>. 
</p>
    <p>To have colored code, you need to use <code>\definetype[NAME][option=TEX]</code> and use it with the name you chose. Other values are: <code>mp lua xml parsed-xml nested tex context</code>.
</p>
    <p>An example that shows both features:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\definetype</span></span><span class="brx">[</span>inlineTEX<span class="brx">]</span><span class="brx">[</span>option<span class="brx">=</span>TEX<span class="brx">]</span>

This is the way to type code: <span class="cs"><span class="documentcs">\type</span></span><span class="br">{</span>the <span class="cs"><span class="documentcs">\ConTeXt</span></span>\ command<span class="br">}</span>.

And this is the way to have colored code: <span class="cs">\inlineTEX</span><span class="br">{</span>the <span class="cs"><span class="documentcs">\ConTeXt</span></span>\ command<span class="br">}</span>,
</pre>
     </li>
     <li class="rendering">
      <img height="37" src="../../wikiteximage/720cdc1bb239c8c2340c49cb7de38054.webp" width="498">
     </li>
    </ul>
    <p><br>
You can also refer to a TeX command with: <tt><a href="../../Command/tex.html" title="Command/tex">\tex</a></tt><tt>{a tex command}</tt>
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\tex</span></span><span class="br">{</span>a tex command<span class="br">}</span>
</pre>
     </li>
     <li class="rendering">
      <img height="16" src="../../wikiteximage/bc2f3b3d2d153f01c0844ee4cad5624d.webp" width="125">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Making_a_tight_vertical_fit">
      Making a tight vertical fit
     </span>
    </h2>
    <p>By default, typing environments include some blank space before the first line and after the last line of the verbatim text. This is because the <tt>before</tt> and <tt>after</tt> commands are set to <tt>\blank</tt> by default. For example:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>offset<span class="brx">=</span>0mm,strut<span class="brx">=</span>no,align<span class="brx">=</span>right<span class="brx">]</span><span class="br">{</span>
<span class="cs"><span class="documentcs">\starttyping</span></span>
Foo
<span class="cs"><span class="documentcs">\stoptyping</span></span>
<span class="br">}</span>
</pre>
     </li>
     <li class="rendering">
      <img height="59" src="../../wikiteximage/20eba91fd3cf342fb8a98a23bb8f1765.webp" width="30">
     </li>
    </ul>
    <p>Here, we've added a <tt>\framed</tt> so you can see the extra spacing, but with <tt>offset=0mm</tt> and <tt>strut=no</tt> to prevent framed from introducing spacing, and <tt>align=right</tt> to prevent framed from eating all newlines (not sure why that works like this).
</p>
    <p>To prevent this extra vertical space, we must unset the <tt>before</tt> and <tt>after</tt> options:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="stylecs">\setuptyping</span></span><span class="brx">[</span>before<span class="brx">=</span>,after<span class="brx">=</span><span class="brx">]</span>
<span class="cs"><span class="documentcs">\framed</span></span><span class="brx">[</span>offset<span class="brx">=</span>0mm,strut<span class="brx">=</span>no,align<span class="brx">=</span>right<span class="brx">]</span><span class="br">{</span>
<span class="cs"><span class="documentcs">\starttyping</span></span>
Foo
<span class="cs"><span class="documentcs">\stoptyping</span></span>
<span class="br">}</span>
</pre>
     </li>
     <li class="rendering">
      <img height="30" src="../../wikiteximage/2a583c02a6acc1f2e636b113aadc8dfa.webp" width="30">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Embedded_formatting_commands">
      Embedded formatting commands
     </span>
    </h2>
    <p>The <tt>option=commands</tt> setting allows the usage of ConTeXt commands inside verbatim text, as in this example:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\definetyping</span></span><span class="brx">[</span>C<span class="brx">]</span><span class="brx">[</span>option<span class="brx">=</span>commands<span class="brx">]</span>
<span class="cs">\startC</span>
<span class="brx">#</span>include &lt;stdio.h&gt;
int main<span class="brx">(</span><span class="brx">)</span><span class="br">{</span>
	return 0;
	/BTEX<span class="br">{</span><span class="cs"><span class="documentcs">\em</span></span> unreachedCode;<span class="br">}</span>/ETEX
<span class="br">}</span>
<span class="cs">\stopC</span>
</pre>
    <ul class="demo">
     <li class="rendering">
      <img height="117" src="../../wikiteximage/ee93037e717941347ba8892dd655cf68.webp" width="325">
     </li>
    </ul>
    <p>In mkiv option-commands is gone and escape no longer is an escape character but a condition (range or start), as in this example:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setuptyping</span></span><span class="brx">[</span>TEX<span class="brx">]</span><span class="brx">[</span>escape<span class="brx">=</span>yes<span class="brx">]</span>

<span class="cs"><span class="documentcs">\startTEX</span></span>
/BTEX<span class="cs"><span class="documentcs">\em</span></span> sometex/ETEX
/BTEX<span class="cs"><span class="documentcs">\em</span></span> sometex/ETEX <span class="cs">\after</span>
<span class="cs">\before</span> /BTEX<span class="cs"><span class="documentcs">\em</span></span> sometex/ETEX
<span class="cs">\before</span> /BTEX<span class="cs"><span class="documentcs">\em</span></span> sometex/ETEX <span class="cs">\after</span>
<span class="cs">\before</span> /BTEX<span class="cs"><span class="documentcs">\em</span></span> sometex/ETEX <span class="cs">\inbetween</span> /BTEX<span class="cs"><span class="documentcs">\em</span></span> sometex/ETEX <span class="cs">\after</span>
<span class="cs">\before</span> <span class="cs">\after</span>
<span class="cs"><span class="documentcs">\stopTEX</span></span>

<span class="cs"><span class="stylecs">\setuptyping</span></span><span class="brx">[</span>TEX<span class="brx">]</span><span class="brx">[</span>escape<span class="brx">=</span><span class="br">{</span><span class="brx">[</span><span class="brx">[</span>,<span class="brx">]</span><span class="brx">]</span><span class="br">}</span><span class="brx">]</span>

<span class="cs"><span class="documentcs">\startTEX</span></span>
<span class="brx">[</span><span class="brx">[</span><span class="cs"><span class="documentcs">\em</span></span> sometex<span class="brx">]</span><span class="brx">]</span>
<span class="brx">[</span><span class="brx">[</span><span class="cs"><span class="documentcs">\em</span></span> sometex<span class="brx">]</span><span class="brx">]</span> <span class="cs">\after</span>
<span class="cs">\before</span> <span class="brx">[</span><span class="brx">[</span><span class="cs"><span class="documentcs">\em</span></span> sometex<span class="brx">]</span><span class="brx">]</span>
<span class="cs">\before</span> <span class="brx">[</span><span class="brx">[</span><span class="cs"><span class="documentcs">\em</span></span> sometex<span class="brx">]</span><span class="brx">]</span> <span class="cs">\after</span>
<span class="cs">\before</span> <span class="brx">[</span><span class="brx">[</span><span class="cs"><span class="documentcs">\em</span></span> sometex<span class="brx">]</span><span class="brx">]</span> <span class="cs">\inbetween</span> <span class="brx">[</span><span class="brx">[</span><span class="cs"><span class="documentcs">\em</span></span> sometex<span class="brx">]</span><span class="brx">]</span> <span class="cs">\after</span>
<span class="cs">\before</span> <span class="cs">\after</span>
<span class="cs"><span class="documentcs">\stopTEX</span></span>

<span class="cs"><span class="stylecs">\setuptyping</span></span><span class="brx">[</span>TEX<span class="brx">]</span><span class="brx">[</span>escape<span class="brx">=</span>//<span class="brx">]</span>

<span class="cs"><span class="documentcs">\startTEX</span></span>
//<span class="cs"><span class="documentcs">\em</span></span> sometex
<span class="cs">\before</span> //<span class="cs"><span class="documentcs">\em</span></span> sometex
<span class="cs"><span class="documentcs">\stopTEX</span></span>
</pre>
    <p><a class="image" href="../../File:Verbatim-mkiv.png"><img alt="Verbatim-mkiv.png" decoding="async" height="375" src="../../images/4/43/Verbatim-mkiv.webp" width="433"></a>
</p>
    <h2>
     <span class="mw-headline" id="Verbatim_with_line_breaks">
      Verbatim with line breaks
     </span>
    </h2>
    <ul>
     <li>
      <a href="../Collections_of_tips_and_tricks#Verbatim_with_line_breaks.html" title="Text blocks/Collections of tips and tricks">
       Verbatim with line breaks
      </a>
     </li>
     <li>
      <a href="../Collections_of_tips_and_tricks#End_of_line_marker_in_verbatim_texts.html" title="Text blocks/Collections of tips and tricks">
       End of line marker in verbatim texts
      </a>
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Pretty_printing">
      Pretty printing
     </span>
    </h2>
    <p>The context distribution includes a number of formatters (or pretty
printers), that can apply some nice formatting to your verbatim text.
Each formatter knows how to handle a specific file format or programming
language and applies syntax highlighting or other fancy displaying.
</p>
    <p>ConTeXt includes a number of predefined formatters, but it is also
possible to define your own. Pretty printing has been completely
redesigned in MkIV, so there are a few differences between MkII and
MkIV. In particular, MkII commonly refers to "formatters", while MkIV
often uses "pretty printers".
</p>
    <h3>
     <span class="mw-headline" id="Included_Formatters">
      Included Formatters
     </span>
    </h3>
    <p>There are already some formatters for several programming languages in
the ConTeXt distribution. The following list is for MkII and MkIV.
</p>
    <table>
     <tbody>
      <tr>
       <th>
        Language
       </th>
       <th>
        Code for MkII
       </th>
       <th>
        Code for MkIV
       </th>
      </tr>
      <tr>
       <td>C</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-c.mkii" title="source:verb-c.mkii">C</a></td>
       <td><a class="extiw" href="http://modules.contextgarden.net/pret-c" title="modules:pret-c">C</a>
</td>
      </tr>
      <tr>
       <td>Eiffel</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-eif.mkii" title="source:verb-eif.mkii">EIF</a></td>
       <td>
</td>
      </tr>
      <tr>
       <td>JavaScript</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-js.mkii" title="source:verb-js.mkii">JS</a></td>
       <td>
</td>
      </tr>
      <tr>
       <td>Java</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-jv.mkii" title="source:verb-jv.mkii">JV</a></td>
       <td>
</td>
      </tr>
      <tr>
       <td>Lua</td>
       <td></td>
       <td><a class="extiw" href="http://source.contextgarden.net/pret-lua.lua" title="source:pret-lua.lua">LUA</a>
</td>
      </tr>
      <tr>
       <td>MetaPost & MetaFont</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-mp.mkii" title="source:verb-mp.mkii">MP</a></td>
       <td><a class="extiw" href="http://source.contextgarden.net/pret-mp.lua" title="source:pret-mp.lua">MP</a>
</td>
      </tr>
      <tr>
       <td>Pascal & Modula</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-pas.mkii" title="source:verb-pas.mkii">PAS</a></td>
       <td>
</td>
      </tr>
      <tr>
       <td>Perl 5</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-pl.mkii" title="source:verb-pl.mkii">PL</a></td>
       <td>
</td>
      </tr>
      <tr>
       <td>SQL</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-sql.mkii" title="source:verb-sql.mkii">SQL</a></td>
       <td>
</td>
      </tr>
      <tr>
       <td>TeX</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-tex.mkii" title="source:verb-tex.mkii">TEX</a></td>
       <td><a class="extiw" href="http://source.contextgarden.net/pret-tex.lua" title="source:pret-tex.lua">TEX</a>
</td>
      </tr>
      <tr>
       <td>XML</td>
       <td><a class="extiw" href="http://source.contextgarden.net/verb-xml.mkii" title="source:verb-xml.mkii">XML</a></td>
       <td><a class="extiw" href="http://source.contextgarden.net/pret-xml.lua" title="source:pret-xml.lua">XML</a>
</td>
      </tr>
     </tbody>
    </table>
    <h3>
     <span class="mw-headline" id="Your_own_formatter">
      Your own formatter
     </span>
    </h3>
    <p>You should start from the definition that is closest to the language you want to define (especially wrt comment and string syntax) and can probably have a go at making a version of this. Some  
questions occur:
</p>
    <h4>
     <span id="How_should_I_name_my_file?">
     </span>
     <span class="mw-headline" id="How_should_I_name_my_file.3F">
      How should I name my file?
     </span>
    </h4>
    <dl>
     <dt>
      MkII
     </dt>
     <dd>
      <tt>
       verb-xxxx.tex
      </tt>
      , where
      <tt>
       xxxx
      </tt>
      is the lowercase name of the formatter.
     </dd>
     <dt>
      MkIV
     </dt>
     <dd>
      <tt>
       pret-xxxx.lua
      </tt>
      , where
      <tt>
       xxxx
      </tt>
      is the lowercase name of the pretty printer.
     </dd>
    </dl>
    <h4>
     <span id="Where_should_i_put_my_file?">
     </span>
     <span class="mw-headline" id="Where_should_i_put_my_file.3F">
      Where should i put my file?
     </span>
    </h4>
    <ol>
     <li>
      Possibly the best place is: In the context distribution, but that depends a bit on what language it is, precisely (you can email me the completed file, in that case).
     </li>
     <li>
      Second best place:
      <a class="external free" href="http://modules.contextgarden.net" rel="nofollow">
       http://modules.contextgarden.net
      </a>
      , so it can be included in cont-ext.zip (third-party addons that are distributed by Pragma-Ade alongside the normal distribution).
     </li>
     <li>
      Third best: The directory &lt;$HOME/texmf/tex/context/base&gt; (the place where your TeX installation finds local files).
     </li>
     <li>
      Final option: Same directory as the file to be processed
     </li>
    </ol>
    <h4>
     <span id="Do_I_have_to_do_anything_else_to_get_ConTeXt_to_recognise_and_use_it?">
     </span>
     <span class="mw-headline" id="Do_I_have_to_do_anything_else_to_get_ConTeXt_to_recognise_and_use_it.3F">
      Do I have to do anything else to get ConTeXt to recognise and use it?
     </span>
    </h4>
    <p>You refer to a pretty printer using its name (<i>e.g.</i>, the
<tt>xxxx</tt> in <tt>verb-xxxx.tex</tt> or <tt>pret-xxxx.lua</tt>),
which should be in lowercase. Before you can use a pretty printer, you
should let ConTeXt know about it (this has already been done for the
included formatters).
</p>
    <pre class="tex"><span class="cs">\installprettytype</span> <span class="brx">[</span>PHP<span class="brx">]</span>        <span class="brx">[</span>PHP<span class="brx">]</span>
</pre>
    <p>This maps the command <code>\starttyping[option=PHP]</code> to the
<tt>php</tt> pretty printer.
</p>
    <p>The first argument is the option as passed to \starttyping, the second
argument is an uppercase version of the pretty printer name
(<i>e.g.</i> <tt>xxxx</tt>) (thus allowing ConTeXt to find the file).
</p>
    <p>And you probably also want:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\definetyping</span></span><span class="brx">[</span>PHP<span class="brx">]</span>   <span class="brx">[</span>option<span class="brx">=</span>PHP<span class="brx">]</span>
</pre>
    <p>Because that allows  <code>\startPHP ... \stopPHP</code> as a shortcut
to <tt>\starttyping[option=PHP] ... \stoptyping</tt>.
</p>
    <h4>
     <span id="How_to_write_the_pretty_printer?">
     </span>
     <span class="mw-headline" id="How_to_write_the_pretty_printer.3F">
      How to write the pretty printer?
     </span>
    </h4>
    <p>For MkII, there seems to be no real documentation here. You should take
a good look at the existing formatters and base your work off those.
However, if you really need custom pretty printing, you might be better
of to look at MkIV instead, since that allows you to write a pretty
printer in lua, which is a lot less painful than writing them in plain
TeX.
</p>
    <p>For MkIV, you should simply write a lua script that processes each line
of input and produces tex output. The details about this are discussed
at <a href="Typing/Custom_pretty_printer.html" title="Text blocks/Environments/Typing/Custom pretty printer">Custom pretty printer</a>.
</p>
    <h3>
     <span class="mw-headline" id="Improved_pretty_printing">
      Improved pretty printing
     </span>
    </h3>
    <p>Default ConTeXt comment handling can be shown in the following sample:
</p>
    <ul class="demo">
     <li class="code">
      <pre class="tex"><span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="documentcs">\startbuffer</span></span><span class="brx">[</span>texcode<span class="brx">]</span>
This is text. <span class="comment">% and this is a comment</span>
<span class="cs"><span class="documentcs">\stopbuffer</span></span>

<span class="cs"><span class="documentcs">\startbuffer</span></span><span class="brx">[</span>xmlcode<span class="brx">]</span>
<p>This is text.</p>
<span class="cs"><span class="documentcs">\stopbuffer</span></span>

<span class="cs"><span class="documentcs">\startbuffer</span></span><span class="brx">[</span>luacode<span class="brx">]</span>
if code<span class="brx">=</span><span class="brx">=</span>"code" then --this is a comment

--<span class="brx">[</span><span class="brx">[</span>
this is a

multiline comment
--<span class="brx">]</span><span class="brx">]</span>

---<span class="brx">[</span><span class="brx">[</span>
but this isn&rsquo;t a

multiline comment
--<span class="brx">]</span><span class="brx">]</span>
<span class="cs"><span class="documentcs">\stopbuffer</span></span>

<span class="cs"><span class="documentcs">\typebuffer</span></span><span class="brx">[</span>texcode<span class="brx">]</span><span class="brx">[</span>option<span class="brx">=</span>TEX<span class="brx">]</span>
<span class="cs"><span class="documentcs">\typebuffer</span></span><span class="brx">[</span>xmlcode<span class="brx">]</span><span class="brx">[</span>option<span class="brx">=</span>XML<span class="brx">]</span>
<span class="cs"><span class="documentcs">\typebuffer</span></span><span class="brx">[</span>luacode<span class="brx">]</span><span class="brx">[</span>option<span class="brx">=</span>LUA<span class="brx">]</span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
     </li>
     <li class="rendering">
      <img height="1240" src="../../wikiteximage/f7ad15e2d85a3187fc61ce8071cb3ffc.webp" width="874">
     </li>
    </ul>
    <p>If you want to improve Lua multiline comments and to color the whole comments (not only the comment marker), write <code>\usemodule[scite]</code> before <code>\starttext</code>. (I cannot show it here, since ConTeXt at the wiki seems to have a problem with that.)
</p>
    <h2>
     <span class="mw-headline" id="Tabbing">
      Tabbing
     </span>
    </h2>
    <p>The tab character normally corresponds to one character, as can be seen above.  That value can be adjusted, using the following code (available in the 2005.06.01 version and later):
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\definetyping</span></span><span class="brx">[</span>C<span class="brx">]</span><span class="brx">[</span>tab<span class="brx">=</span>3<span class="brx">]</span>
<span class="comment">% for older ConTeXt versions: \chardef\spacespertab=3</span>
<span class="cs">\startC</span>
int func<span class="brx">(</span>int a<span class="brx">)</span><span class="br">{</span>
	if<span class="brx">(</span>a &gt; 4<span class="brx">)</span>
		return 0;
	else
		return 10;
<span class="br">}</span>
<span class="cs">\stopC</span>
</pre>
    <ul class="demo">
     <li class="rendering">
      <img height="137" src="../../wikiteximage/b7c6e18ed3ed370cfe09b2b2e4fff056.webp" width="141">
     </li>
    </ul>
    <h2>
     <span class="mw-headline" id="Syntax_highlighting_in_color">
      Syntax highlighting in color
     </span>
    </h2>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupcolors</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setuptyping</span></span><span class="brx">[</span>option<span class="brx">=</span>color<span class="brx">]</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="documentcs">\startXML</span></span>
... your XML code ...
<span class="cs"><span class="documentcs">\stopXML</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
    <dl>
     <dd>
      <ul class="demo">
       <li class="rendering">
        <img height="1240" src="../../wikiteximage/f12c2823e55289658b0a5173ff04180c.webp" width="874">
       </li>
      </ul>
     </dd>
    </dl>
    <h3>
     <span class="mw-headline" id="Defining_your_own_set_of_colors">
      Defining your own set of colors
     </span>
    </h3>
    <p>Sometimes you may be not quite satisfied with the default colors used in the built-in syntax highlighting.  <a href="../../User:Taco.html" title="User:Taco">Taco</a> posted this solution in the discussion on the <a class="external text" href="http://archive.contextgarden.net/message/20050825.112308.db696b94.en.html" rel="nofollow">mailing list</a>:
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupcolors</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>
<span class="cs"><span class="stylecs">\setuptyping</span></span><span class="brx">[</span>option<span class="brx">=</span>color<span class="brx">]</span>

<span class="comment">% define the colors to fit your document style</span>
<span class="cs"><span class="stylecs">\definecolor</span></span><span class="brx">[</span>MYcolorone<span class="brx">]</span>  <span class="brx">[</span>r<span class="brx">=</span>.8,g<span class="brx">=</span>.5,b<span class="brx">=</span>.5<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definecolor</span></span><span class="brx">[</span>MYcolortwo<span class="brx">]</span>  <span class="brx">[</span>r<span class="brx">=</span>.8,g<span class="brx">=</span>.5,b<span class="brx">=</span>.2<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definecolor</span></span><span class="brx">[</span>MYcolorthree<span class="brx">]</span><span class="brx">[</span>r<span class="brx">=</span>.8,g<span class="brx">=</span>.5,b<span class="brx">=</span>.8<span class="brx">]</span>
<span class="cs"><span class="stylecs">\definecolor</span></span><span class="brx">[</span>MYcolorfour<span class="brx">]</span> <span class="brx">[</span>r<span class="brx">=</span>.8,g<span class="brx">=</span>.2,b<span class="brx">=</span>.5<span class="brx">]</span>

<span class="comment">% define a palete using these four colors</span>
<span class="cs"><span class="stylecs">\definepalet</span></span><span class="brx">[</span>MYcolors<span class="brx">]</span>
  <span class="brx">[</span>prettyone<span class="brx">=</span>MYcolorone,
   prettytwo<span class="brx">=</span>MYcolortwo,
   prettythree<span class="brx">=</span>MYcolorthree,
   prettyfour<span class="brx">=</span>MYcolorfour<span class="brx">]</span>

<span class="comment">% XML code will be typeset with the palette you just defined</span>
<span class="cs"><span class="stylecs">\definepalet</span></span><span class="brx">[</span>XMLcolorpretty<span class="brx">]</span><span class="brx">[</span>MYcolors<span class="brx">]</span> <span class="comment">% the name is magic&nbsp;! - mkii only</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="documentcs">\startXML</span></span>
... your XML code ...
<span class="cs"><span class="documentcs">\stopXML</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
    <p>This results in:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="1240" src="../../wikiteximage/5e80da4008ea046ebf173b0553b113cc.webp" width="874">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Syntax_highlighting_source_code_or_configuration_files">
      Syntax highlighting source code or configuration files
     </span>
    </h3>
    <p>see <a href="Typing/Verbatim_with_LuaTeX.html" title="Text blocks/Environments/Typing/Verbatim with LuaTeX">Verbatim with LuaTeX</a> with Python, Apache httpd.conf and zc.buildout config files examples.
</p>
    <h2>
     <span class="mw-headline" id="Colored_background">
      Colored background
     </span>
    </h2>
    <pre class="tex"><span class="cs"><span class="stylecs">\setupcolors</span></span><span class="brx">[</span>state<span class="brx">=</span>start<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definetextbackground</span></span><span class="brx">[</span>verbatim<span class="brx">]</span>
<span class="brx">[</span>background<span class="brx">=</span>color,
backgroundcolor<span class="brx">=</span>yellow,
backgroundoffset<span class="brx">=</span>0cm,
offset<span class="brx">=</span>0.5cm,
frame<span class="brx">=</span>on,
framecolor<span class="brx">=</span>black,
location<span class="brx">=</span>paragraph,
color<span class="brx">=</span>black<span class="brx">]</span>

<span class="comment">% Setup verbatim</span>
<span class="cs"><span class="stylecs">\setuptyping</span></span><span class="brx">[</span>typing<span class="brx">]</span><span class="brx">[</span>margin<span class="brx">=</span>1cm,bodyfont<span class="brx">=</span>8.0pt,
before<span class="brx">=</span><span class="br">{</span><span class="cs"><span class="documentcs">\starttextbackground</span></span><span class="brx">[</span>verbatim<span class="brx">]</span><span class="br">}</span>,
after<span class="brx">=</span><span class="br">{</span><span class="cs"><span class="documentcs">\stoptextbackground</span></span><span class="br">}</span><span class="brx">]</span>

<span class="cs"><span class="documentcs">\starttext</span></span>
<span class="cs"><span class="documentcs">\starttyping</span></span>
This is the first line.
This is the second line.
<span class="cs"><span class="documentcs">\stoptyping</span></span>
<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
    <h2>
     <span class="mw-headline" id="Line_numbering">
      Line numbering
     </span>
    </h2>
    <p>In technical documents it can be required to display some code listings with the line numbers. You can do this with ConTeXt, and even more. All the features shown here are also available when displaying external files with <tt><a href="../../Command/typefile.html" title="Command/typefile">\typefile</a></tt>.
</p>
    <h3>
     <span class="mw-headline" id="Preliminary_setting">
      Preliminary setting
     </span>
    </h3>
    <p>Let's define our own typing style, named "code". The typing is put in a framedtext, to demonstrate the wrapping feature in a next section.
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\defineframedtext</span></span>
  <span class="brx">[</span>framedcode<span class="brx">]</span>
  <span class="brx">[</span>strut<span class="brx">=</span>yes,
   offset<span class="brx">=</span>2mm,
   width<span class="brx">=</span>7cm,
   align<span class="brx">=</span>right<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definetyping</span></span><span class="brx">[</span>code<span class="brx">]</span><span class="brx">[</span>numbering<span class="brx">=</span>line,
                    bodyfont<span class="brx">=</span>small,
                    before<span class="brx">=</span><span class="br">{</span><span class="cs">\startframedcode</span><span class="br">}</span>,
                    after<span class="brx">=</span><span class="br">{</span><span class="cs">\stopframedcode</span><span class="br">}</span><span class="brx">]</span>
</pre>
    <h3>
     <span class="mw-headline" id="Default_line_numbering">
      Default line numbering
     </span>
    </h3>
    <p>With the defined typing, every line is numbered, and the number goes in the margin. The option to have the line numbers displayed is <tt>numbering=line</tt>.
</p>
    <pre class="tex"><span class="cs">\startcode</span>
This is the first line
This is a rather long line that is wrapped, so look how the line numbering is done
Another line

Last line after an empty line
<span class="cs">\stopcode</span>
</pre>
    <p>It is rendered as:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="136" src="../../wikiteximage/54e31e577496d410ae8160239bde6acd.webp" width="624">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Line_numbers_in_the_text">
      Line numbers in the text
     </span>
    </h3>
    <p>To have the line numbers in the text, change the linenumbering setup like this (<tt>location=text</tt> for mkiv resp.):
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setuplinenumbering</span></span><span class="brx">[</span>location<span class="brx">=</span>text<span class="brx">]</span>
<span class="cs">\startcode</span>
This is the first line
This is a rather long line that is wrapped, so look how the line numbering is done
Another line

Last line after an empty line
<span class="cs">\stopcode</span>
</pre>
    <ul class="demo">
     <li class="rendering">
      <img height="136" src="../../wikiteximage/f62c1b662ad084c180fc7390231a5c1d.webp" width="624">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Continuing_the_numbering">
      Continuing the numbering
     </span>
    </h3>
    <p>Another handy feature is the ability to continue the numbering from one portion of code to another. Use the option <tt>continue</tt> for this.
</p>
    <pre class="tex"><span class="cs">\startcode</span>
This is the first line
This is a rather long line that is wrapped, so look how the line numbering is done
Another line

Last line after an empty line
<span class="cs">\stopcode</span>

Some normal text to explain the first piece of code,
and introduce the following lines.

<span class="cs">\startcode</span><span class="brx">[</span>continue<span class="brx">]</span>
This is the first continuing line
This is a rather long line that is wrapped, so look how the line numbering is done
Another line
Last line
<span class="cs">\stopcode</span>
</pre>
    <ul class="demo">
     <li class="rendering">
      <img height="292" src="../../wikiteximage/2fa7abf0d711138fdab91eb60e487983.webp" width="624">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Arbitrary_starting_line_number">
      Arbitrary starting line number
     </span>
    </h3>
    <p>You can also decide what the starting line number is. Use the option <tt>start=number</tt> for this.
</p>
    <pre class="tex"><span class="cs">\startcode</span><span class="brx">[</span>start<span class="brx">=</span>200<span class="brx">]</span>
This is the first line
This is a rather long line that is wrapped, so look how the line numbering is done
Another line
Last line
<span class="cs">\stopcode</span>
</pre>
    <ul class="demo">
     <li class="rendering">
      <img height="122" src="../../wikiteximage/2802e44b6b7ca72fe5651752e8836da7.webp" width="624">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Line_number_steps">
      Line number steps
     </span>
    </h3>
    <p>You want to print a number every two lines? Ok, just use the option <tt>step=number</tt> for this.
</p>
    <pre class="tex"><span class="cs">\startcode</span><span class="brx">[</span>start<span class="brx">=</span>200,step<span class="brx">=</span>2<span class="brx">]</span>
This is the first line
This is a rather long line that is wrapped, so look how the line numbering is done
Another line
Last line
<span class="cs">\stopcode</span>
</pre>
    <ul class="demo">
     <li class="rendering">
      <img height="122" src="../../wikiteximage/163cb8389e93a45325c62849cea56e65.webp" width="624">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Referencing_line_numbers">
      Referencing line numbers
     </span>
    </h3>
    <p>The following example from the mailing list <a class="external autonumber" href="http://archive.contextgarden.net/thread/20101026.191201.55344b94.en.html#20101026.191201.55344b94" rel="nofollow">[1]</a> shows how to reference line numbers from a typing in the surrounding text (MkIV).
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\setuptyping</span></span><span class="brx">[</span>numbering<span class="brx">=</span>line,escape<span class="brx">=</span>yes<span class="brx">]</span>

<span class="cs"><span class="documentcs">\starttext</span></span>

See <span class="cs"><span class="documentcs">\inline</span></span><span class="brx">[</span>line:single<span class="brx">]</span> and also <span class="cs"><span class="documentcs">\inline</span></span><span class="brx">[</span>line:range<span class="brx">]</span>.

See <span class="cs"><span class="documentcs">\inline</span></span><span class="br">{</span>typeline<span class="br">}</span><span class="brx">[</span>line:single<span class="brx">]</span> and also <span class="cs"><span class="documentcs">\inline</span></span><span class="br">{</span>typelines<span class="br">}</span><span class="brx">[</span>line:range<span class="brx">]</span>.

See line~<span class="cs"><span class="documentcs">\inlinerange</span></span><span class="brx">[</span>line:single<span class="brx">]</span> and also lines~<span class="cs"><span class="documentcs">\inlinerange</span></span><span class="brx">[</span>line:range<span class="brx">]</span>.

<span class="cs"><span class="documentcs">\starttyping</span></span>
line 1
line 2/BTEX<span class="cs"><span class="documentcs">\startline</span></span><span class="brx">[</span>line:range<span class="brx">]</span>/ETEX
line 3/BTEX<span class="cs"><span class="documentcs">\someline</span></span><span class="brx">[</span>line:single<span class="brx">]</span>/ETEX
line 4
line 5/BTEX<span class="cs"><span class="documentcs">\stopline</span></span><span class="brx">[</span>line:range<span class="brx">]</span>/ETEX
line 6
<span class="cs"><span class="documentcs">\stoptyping</span></span>

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
    <h2>
     <span class="mw-headline" id="A_different_approach_to_formatting_and_code_colorization">
      A different approach to formatting and code colorization
     </span>
    </h2>
    <p>Supposing that: 
</p>
    <p>a) you are much more fluent in another programming language  than TeX 
</p>
    <p>b) you have  a large project involving many code snippets to be inserted and colorized
</p>
    <p>you can go for another, less elegant, way to format your verbatim text, which can include all the discussed ConTeXt benefits. 
</p>
    <h3>
     <span id="Writing_a_parser/formatter">
     </span>
     <span class="mw-headline" id="Writing_a_parser.2Fformatter">
      Writing   a parser/formatter
     </span>
    </h3>
    <p>It is fairly simple to write a little parser which takes as its input your source file and gives in output a .tex file containing the code plus the opportune commands for colorization. You can then include the resulting .tex file in the global ConTeXt document file.
As an example, <a class="external text" href="http://www.fonurgia.unito.it/andrea/sw/sc/scToConTeXt.py" rel="nofollow">this</a> is a Python script for the SuperCollider language, which has a strict Smalltalk-like syntax.
</p>
    <p>Fed with the following source code contained in e.g. example.sc file:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="137" src="../../wikiteximage/413a3101f5a984e0db66417b95783f29.webp" width="244">
     </li>
    </ul>
    <p><br>
the script outputs this tex code, which is written into a file contained in the same folder of the source file (named example.tex):
</p>
    <pre class="tex"><span class="cs">\startSC</span>
/BTEX<span class="cs"><span class="documentcs">\color</span></span><span class="brx">[</span>SCred<span class="brx">]</span><span class="br">{</span>//// an example starting with a comment<span class="br">}</span>/ETEX
/BTEX<span class="cs"><span class="documentcs">\color</span></span><span class="brx">[</span>SCgrey<span class="brx">]</span><span class="br">{</span>"this is a string"<span class="br">}</span>/ETEX .postln&nbsp;;

/BTEX<span class="cs"><span class="documentcs">\color</span></span><span class="brx">[</span>SCgreen<span class="brx">]</span><span class="br">{</span><span class="cs"><span class="documentcs">\letterbackslash</span></span> aSymbol<span class="br">}</span>/ETEX  ;

/BTEX<span class="cs"><span class="documentcs">\color</span></span><span class="brx">[</span>SCblue<span class="brx">]</span><span class="br">{</span>ThisClassDoesNotExists<span class="br">}</span>/ETEX  ;
<span class="cs">\stopSC</span>
</pre>
    <p>Basically, the idea is to envelope each item to be colorized inside a /BTEX /ETEX block. 
Note that inside the block the text is no more verbatim, so you have to define some string replacements for special characters (e.g. _,&nbsp;%, $, \, etc). 
As an example, the problem of the backslash (\) is solved here by replacing it with \letterbackslash. 
</p>
    <p>You can then insert example.tex in your ConTeXt file with
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\input</span></span> example
</pre>
    <p><br>
The example.tex file uses some definitions (explained in the previous sections) which have to be put in the ConTeXt file (use <tt>escape=yes</tt> instead of <tt>option=commands</tt> for mkiv). 
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\defineframedtext</span></span>
  <span class="brx">[</span>framedSC<span class="brx">]</span>
  <span class="brx">[</span>framecolor<span class="brx">=</span>cirmaBlue,
   strut<span class="brx">=</span>yes,
   offset<span class="brx">=</span>2mm,
   width<span class="brx">=</span>local,
   align<span class="brx">=</span>right<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definetyping</span></span><span class="brx">[</span>SC<span class="brx">]</span><span class="brx">[</span>option<span class="brx">=</span>commands, 
					tab<span class="brx">=</span>2,numbering<span class="brx">=</span>line,
                    before<span class="brx">=</span><span class="br">{</span><span class="cs">\startframedSC</span><span class="br">}</span>,
                    after<span class="brx">=</span><span class="br">{</span><span class="cs">\stopframedSC</span><span class="br">}</span><span class="brx">]</span>
</pre>
    <p>Also, example.tex requires color definitions, which are created following SuperCollider colorization interpreter scheme and have to be inserted in  the ConTeXt file too:
</p>
    <pre class="tex"><span class="comment">%% SC colors&nbsp;%%</span>
<span class="cs"><span class="stylecs">\definecolor</span></span> <span class="brx">[</span>SCwhite<span class="brx">]</span> <span class="brx">[</span>r<span class="brx">=</span>1.0, g<span class="brx">=</span>1.0, b<span class="brx">=</span>1.0<span class="brx">]</span> 
<span class="cs"><span class="stylecs">\definecolor</span></span> <span class="brx">[</span>SCblack<span class="brx">]</span> <span class="brx">[</span>r<span class="brx">=</span>0.0, g<span class="brx">=</span>0.0, b<span class="brx">=</span>0.0<span class="brx">]</span> 
<span class="cs"><span class="stylecs">\definecolor</span></span> <span class="brx">[</span>SCblue<span class="brx">]</span> <span class="brx">[</span>r<span class="brx">=</span>0.0, g<span class="brx">=</span>0.0, b<span class="brx">=</span>0.75<span class="brx">]</span> 
<span class="cs"><span class="stylecs">\definecolor</span></span> <span class="brx">[</span>SCred<span class="brx">]</span> <span class="brx">[</span>r<span class="brx">=</span>0.75, g<span class="brx">=</span>0.0, b<span class="brx">=</span>0.0<span class="brx">]</span> 
<span class="cs"><span class="stylecs">\definecolor</span></span> <span class="brx">[</span>SCgrey<span class="brx">]</span> <span class="brx">[</span>r<span class="brx">=</span>0.376, g<span class="brx">=</span>0.376, b<span class="brx">=</span>0.376<span class="brx">]</span> 
<span class="cs"><span class="stylecs">\definecolor</span></span> <span class="brx">[</span>SCgreen<span class="brx">]</span> <span class="brx">[</span>r<span class="brx">=</span>0.0, g<span class="brx">=</span>0.45, b<span class="brx">=</span>0.0<span class="brx">]</span>

<span class="cs"><span class="stylecs">\definecolor</span></span><span class="brx">[</span>cirmaBlue<span class="brx">]</span> <span class="brx">[</span>r<span class="brx">=</span>.0,g<span class="brx">=</span>.2,b<span class="brx">=</span>.6<span class="brx">]</span>  <span class="comment">% for frame</span>
</pre>
    <p>The previous definitions will be used for all the code files  inserted with \input.
After compiling, this is the result of the discussed example:
</p>
    <ul class="demo">
     <li class="rendering">
      <img height="1240" src="../../wikiteximage/b08cd0839f64c79332b048a5966dbb8a.webp" width="874">
     </li>
    </ul>
    <h3>
     <span class="mw-headline" id="Embedding_the_source_code">
      Embedding the source code
     </span>
    </h3>
    <p>If your document is inteded to provide code examples to be tested by the readers, the presence of format signs (e.g. line numbers) can create some troubles while copying and pasting the code text from your document to the language environment. More generally, the copy and paste approach, being slow and possibly related to encodings, is not satisfying at all.
You can include source files in the pdf with a couple of ConTeXt commands:
</p>
    <pre class="tex"><span class="cs">\useattachment</span><span class="brx">[</span>ex<span class="brx">]</span><span class="brx">[</span>example.sc<span class="brx">]</span>
<span class="cs"><span class="documentcs">\attachment</span></span><span class="brx">[</span>ex<span class="brx">]</span>
</pre>
    <p><br>
So that you can have this structure for each code snippet:
</p>
    <pre class="tex"><span class="cs"><span class="documentcs">\input</span></span> example

<span class="cs">\useattachment</span><span class="brx">[</span>ex<span class="brx">]</span><span class="brx">[</span>example.sc<span class="brx">]</span>
<span class="cs"><span class="documentcs">\attachment</span></span><span class="brx">[</span>ex<span class="brx">]</span>
</pre>
    <p><br>
The commands embed example.sc in the pdf, so that it is accessible by double-clicking on a generated icon. In this case the icon is placed after the colorized code frame.
If you use Acrobat Reader (Preview.app in MacOSX does not provide support for the behaviour) example.sc will be open in the related application (e.g. SuperCollider.app in the discussed case).
</p>
    <p><br>
The discussed approach has been implemented <a class="external text" href="http://www.cirma.unito.it/andrea/sw/sc/prd_tSCIRMA.pdf" rel="nofollow">here</a>.
</p>
    <p>(-a- --&gt; <a href="../../User:Andrea.html" title="User:Andrea">User:Andrea</a>)
</p>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="../../index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-15
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Text_blocks/Environments/Typing">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
