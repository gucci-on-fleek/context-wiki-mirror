<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <link href="style.css" rel="stylesheet">
  <link href="favicon.ico" rel="icon" sizes="32x32">
  <title>
   Version Control&mdash;ConTeXt Wiki Mirror
  </title>
  <link href="https://wiki.contextgarden.net/Version_Control" rel="canonical">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="#241504" name="theme-color">
  <meta content="light dark" name="color-scheme">
 </head>
 <body>
  <header>
   <h1 id="page-title">
    Version Control
   </h1>
   <p>Unofficial <a href="https://wiki.contextgarden.net/">ConTeXt Wiki</a> mirror</p>
   <p>Last modified: <a href="https://wiki.contextgarden.net/index.php?curid=2679&diff=41755">2025-01-19</a>
        </p>
  </header>
  <article>
   <div class="mw-parser-output">
    <h2>
     <span class="mw-headline" id="Version_control">
      Version control
     </span>
    </h2>
    <p>Version or revision control software like Bazaar, Git and Subversion, is used for managing different versions or revisions of files <a class="external autonumber" href="http://en.wikipedia.org/wiki/Revision_control" rel="nofollow">[1]</a>.
This can be used for different reasons.
For instance for collaborate editing of files and keeping track of who edits what.
Programmers use this kind of software, but it is also useful as a backup mechanism for TeX files.
</p>
    <p>Stephan Hennig created a version control bundle for TeX and friends
<a class="external autonumber" href="https://www.ctan.org/pkg/vc" rel="nofollow">[2]</a>.
This bundle, meant not only for LaTeX but for TeX and friends, is useful for getting among other things revision number of your project 
to use it in your TeX-document.
Of course you should have Bazaar, Git or Subversion installed and (some of) the files in your directory should be under version control.
GNU awk is also required.
</p>
    <p>The bundle basically consists of some scripts which produce a vc.tex file with some macros which can be used in a ConTeXt file:
</p>
    <pre class="tex">input vc
</pre>
    <p>The manual of the bundle is very clear.
For your convenience here an example of how to use the macros with Git <a class="external autonumber" href="http://git-scm.com/" rel="nofollow">[3]</a>.
Derived from Mark Eli Kalderon <a class="external autonumber" href="http://markelikalderon.com/blog/2008/03/23/running-vc/" rel="nofollow">[4]</a> and the vc manual.
</p>
    <pre class="tex"><span class="cs"><span class="stylecs">\enableregime</span></span><span class="brx">[</span>utf<span class="brx">]</span>

<span class="comment">%\immediate\write18{sh ./vc} </span>
<span class="cs"><span class="documentcs">\input</span></span> vc

<span class="cs"><span class="documentcs">\starttext</span></span> 

<span class="cs"><span class="documentcs">\startitemize</span></span>
<span class="cs"><span class="documentcs">\item</span></span> VCRevision <span class="brx">=</span> <span class="cs">\VCRevision</span>\ current <span class="brx">(</span>maximum<span class="brx">)</span> working copy revision number
<span class="cs"><span class="documentcs">\item</span></span> VCRevisionMod <span class="brx">=</span> <span class="cs">\VCRevisionMod</span>\ as VCRevision <span class="brx">=</span> <span class="cs">\VCRevision</span>, but with an additional note if the working copy contains modi&filig;ed &filig;les
<span class="cs"><span class="documentcs">\item</span></span> VCAuthor <span class="brx">=</span> <span class="cs">\VCAuthor</span>\ author of the last check-in operation
<span class="cs"><span class="documentcs">\item</span></span> VCDateRaw <span class="brx">=</span> <span class="cs">\VCDateRAW</span>\ date of last check-in in native format of the VCS software
<span class="cs"><span class="documentcs">\item</span></span> VCDateISO <span class="brx">=</span> <span class="cs">\VCDateISO</span>\ date of last check-in in ISO format YYYY-MM-DD
<span class="cs"><span class="documentcs">\item</span></span> VCDateTEX <span class="brx">=</span> <span class="cs">\VCDateTEX</span>\ date of last check-in in TeX format YYYY/MM/DD
<span class="cs"><span class="documentcs">\item</span></span> VCTime <span class="brx">=</span> <span class="cs">\VCTime</span>\ time of last check-in
<span class="cs"><span class="documentcs">\item</span></span> VCModifiedText <span class="brx">=</span> <span class="cs">\VCModifiedText</span>\ contains the note shown in macro VCRevisionMod <span class="brx">=</span> <span class="cs">\VCRevisionMod</span>\ if there were modi&filig;ed &filig;les.
This macro can be rede&filig;ned by the user.
<span class="cs"><span class="documentcs">\item</span></span> VCModified <span class="brx">=</span> <span class="cs">\VCModified</span>\ 0 if there are no modi&filig;ed &filig;les in the working copy directory; 1 or 2 if there are modi&filig;ed &filig;les.
In general you don't need this macro.
<span class="cs"><span class="documentcs">\stopitemize</span></span>

These macros can be called wherever appropriate. 

Revision: <span class="cs">\VCRevision</span>&nbsp;; Author: <span class="cs">\VCAuthor</span>&nbsp;; Date: <span class="cs">\VCDateISO</span>

<span class="cs"><span class="documentcs">\startitemize</span></span>
<span class="cs"><span class="documentcs">\item</span></span> GITHash <span class="brx">=</span> <span class="cs">\GITHash</span>\ 40-hexdigit SHA1 commit hash
<span class="cs"><span class="documentcs">\item</span></span> GITAbrHash <span class="brx">=</span> <span class="cs">\GITAbrHash</span>\ abbreviated commit hash  
<span class="cs"><span class="documentcs">\item</span></span> GITParentHashes <span class="brx">=</span> <span class="cs">\GITParentHashes</span>\ parent hashes
<span class="cs"><span class="documentcs">\item</span></span> GITAbrParentHashes <span class="brx">=</span> <span class="cs">\GITAbrParentHashes</span>\ abbreviated parent hashes
<span class="cs"><span class="documentcs">\item</span></span> GITAuthorName <span class="brx">=</span> <span class="cs">\GITAuthorName</span>\ author name
<span class="cs"><span class="documentcs">\item</span></span> GITAuthorEmail <span class="brx">=</span> <span class="cs">\GITAuthorEmail</span>\ author email
<span class="cs"><span class="documentcs">\item</span></span> GITAuthorDate <span class="brx">=</span> <span class="cs">\GITAuthorDate</span>\ author date
<span class="cs"><span class="documentcs">\item</span></span> GITCommitterName <span class="brx">=</span> <span class="cs">\GITCommitterName</span>\ committer name
<span class="cs"><span class="documentcs">\item</span></span> GITCommitterEmail <span class="brx">=</span> <span class="cs">\GITCommitterEmail</span>\ committer e-mail
<span class="cs"><span class="documentcs">\item</span></span> GITCommitterDate <span class="brx">=</span> <span class="cs">\GITCommitterDate</span>\ committer date
<span class="cs"><span class="documentcs">\stopitemize</span></span>

<span class="cs"><span class="documentcs">\stoptext</span></span>
</pre>
    <h2>
     <span class="mw-headline" id="A_Simple_Solution_in_Mkiv">
      A Simple Solution in Mkiv
     </span>
    </h2>
    <p>The vc.tex bundle is certainly nice and powerful, but I found it somewhat difficult to install. If you are using mkiv and just want to typeset some information from your version control system, there is an easier solution: you can typeset the output of system commands via lua code. Here is an example that will print the revision and date of a mercurial system:
</p>
    <pre class="tex"><span class="cs"><span class="systemcs">\ctxlua</span></span><span class="br">{</span>context<span class="brx">(</span>os.resultof<span class="brx">(</span>"hg id -i -r tip"<span class="brx">)</span><span class="brx">)</span><span class="br">}</span>: 
<span class="cs"><span class="systemcs">\ctxlua</span></span><span class="br">{</span>context<span class="brx">(</span>os.resultof<span class="brx">(</span>"hg log -r tip --template '<span class="br">{</span>date|isodate<span class="br">}</span>'"<span class="brx">)</span><span class="brx">)</span><span class="br">}</span>
</pre>
    <p>The same would work with any version control system; all you need to do is consult its documentation to figure out the exact syntax to receive the information you want to typeset.
</p>
   </div>
  </article>
  <footer>
   <ul role="list">
    <li>
     <a href="index.html">
      Home
     </a>
    </li>
    <li>
     Mirrored on 2026-01-10
    </li>
    <li>
     <a href="http://www.gnu.org/copyleft/fdl.html" rel="license">
      GFDL 1.2
     </a>
    </li>
    <li>
     <a href="https://wiki.contextgarden.net/Version_Control">
      Original page
     </a>
    </li>
   </ul>
  </footer>
 </body>
</html>
